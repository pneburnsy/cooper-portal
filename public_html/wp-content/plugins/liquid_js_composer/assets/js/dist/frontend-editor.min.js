/*!
* WPBakery Page Builder v6.0.0 (https://wpbakery.com)
* Copyright 2011-2020 Michael M, WPBakery
* License: Commercial. More details: http://go.wpbakery.com/licensing
*/
function vc_guid(){return VCS4()+VCS4()+"-"+VCS4()}function VCS4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}window.vc||(window.vc={}),function(){"use strict";function e(e){return"\\"+i[e]}vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var t=/(.)^/,i={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},n=/\\|'|\r|\n|\u2028|\u2029/g;vc.template=function(i,a){a=_.defaults({},a,vc.templateOptions.default);var o,s=RegExp([(a.escape||t).source,(a.interpolate||t).source,(a.evaluate||t).source].join("|")+"|$","g"),c=0,r="__p+='";i.replace(s,(function(t,a,o,s,l){return r+=i.slice(c,l).replace(n,e),c=l+t.length,a?r+="'+\n((__t=("+a+"))==null?'':_.escape(__t))+\n'":o?r+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t})),r+="';\n",a.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{o=new Function(a.variable||"obj","_",r)}catch(e){throw e.source=r,e}function l(e){return o.call(this,e,_)}var d=a.variable||"obj";return l.source="function("+d+"){\n"+r+"}",l}}(),function($){"use strict";var e,t,i;(e=function(e,t){var i=this;this.options=t,this.$element=$(e),this.$dropdownContainer=this.$element.find(this.options.dropdownContainerSelector),this.$dropdown=this.$dropdownContainer.find(this.options.dropdownSelector),this.options.delayInit?(i.$element.addClass(this.options.initializingClass),setTimeout((function(){i.options.autoRefresh||i.refresh(),i.moveTabs(),i.$element.removeClass(i.options.initializingClass)}),i.options.delayInitTime)):(this.options.autoRefresh||this.refresh(),this.moveTabs()),$(window).on("resize",$.proxy(this.moveTabs,this)),this.$dropdownContainer.on("click.vc.tabsLine",$.proxy(this.checkDropdownContainerActive,this))}).DEFAULTS={initializingClass:"vc_initializing",delayInit:!1,delayInitTime:1e3,activeClass:"vc_active",visibleClass:"vc_visible",dropdownContainerSelector:'[data-vc-ui-element="panel-tabs-line-toggle"]',dropdownSelector:'[data-vc-ui-element="panel-tabs-line-dropdown"]',tabSelector:'>li:not([data-vc-ui-element="panel-tabs-line-toggle"])',dropdownTabSelector:"li",freeSpaceOffset:5,autoRefresh:!1,showDevInfo:!1},e.prototype.refresh=function(){var e,t=this;return t.tabs=[],t.dropdownTabs=[],t.$element.find(t.options.tabSelector).each((function(){t.tabs.push({$tab:$(this),width:$(this).outerWidth()})})),t.$dropdown.find(t.options.dropdownTabSelector).each((function(){var e=$(this).clone().css({visibility:"hidden",position:"fixed"});e.appendTo(t.$element),t.dropdownTabs.push({$tab:$(this),width:e.outerWidth()}),e.remove(),$(this).on("click",t.options.onTabClick)})),"function"==typeof this.options.onTabClick&&(e=function(e){void 0===e.$tab.data("tabClickSet")&&(e.$tab.on("click",$.proxy(t.options.onTabClick,e.$tab)),e.$tab.data("tabClickSet",!0))},t.tabs.map(e),t.dropdownTabs.map(e)),this},e.prototype.moveLastToDropdown=function(){var e;return this.tabs.length&&((e=this.tabs.pop()).$tab.prependTo(this.$dropdown),this.dropdownTabs.unshift(e)),this.checkDropdownContainer(),this},e.prototype.moveFirstToContainer=function(){var e;return this.dropdownTabs.length&&((e=this.dropdownTabs.shift()).$tab.appendTo(this.$element),this.tabs.push(e)),this.checkDropdownContainer(),this},e.prototype.getTabsWidth=function(){var e=0;return this.tabs.forEach((function(t){e+=t.width})),e},e.prototype.isDropdownContainerVisible=function(){return this.$dropdownContainer.hasClass(this.options.visibleClass)},e.prototype.getFreeSpace=function(){var e=this.$element.width()-this.getTabsWidth()-this.options.freeSpaceOffset;return this.isDropdownContainerVisible()&&(e-=this.$dropdownContainer.outerWidth(),1===this.dropdownTabs.length&&0<=e-this.dropdownTabs[0].width+this.$dropdownContainer.outerWidth()&&(e+=this.$dropdownContainer.outerWidth())),e},e.prototype.moveTabsToDropdown=function(){for(var e=this.tabs.length-1;0<=e;e--){if(!(this.getFreeSpace()<0))return this;this.moveLastToDropdown()}return this},e.prototype.moveDropdownToTabs=function(){for(var e=this.dropdownTabs.length,t=0;t<e;t++){if(!(0<=this.getFreeSpace()-this.dropdownTabs[0].width))return this;this.moveFirstToContainer()}return this},e.prototype.showDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.visibleClass),this},e.prototype.hideDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.visibleClass),this},e.prototype.activateDropdownContainer=function(){return this.$dropdownContainer.addClass(this.options.activeClass),this},e.prototype.deactivateDropdownContainer=function(){return this.$dropdownContainer.removeClass(this.options.activeClass),this},e.prototype.checkDropdownContainerActive=function(){return this.$dropdown.find("."+this.options.activeClass+":first").length?this.activateDropdownContainer():this.deactivateDropdownContainer(),this},e.prototype.checkDropdownContainer=function(){return this.dropdownTabs.length?this.showDropdownContainer():this.hideDropdownContainer(),this.checkDropdownContainerActive(),this},e.prototype.moveTabs=function(){return this.options.autoRefresh&&this.refresh(),this.checkDropdownContainer(),this.moveTabsToDropdown(),this.moveDropdownToTabs(),this.options.showDevInfo&&this.showDevInfo(),this},e.prototype.showDevInfo=function(){var e=$("#vc-ui-tabs-line-dev-info");e.length&&(this.$devBlock=e),void 0===this.$devBlock&&(this.$devBlock=$('<div id="vc-ui-tabs-line-dev-info" />').css({position:"fixed",right:"40px",top:"40px",padding:"7px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",background:"rgba(0, 0, 0, 0.7)",color:"#0a0","border-radius":"5px","font-family":"tahoma","font-size":"12px","z-index":1100}),this.$devBlock.appendTo("body")),void 0===this.$devInfo&&(this.$devInfo=$("<div />").css({"margin-bottom":"7px","padding-bottom":"7px","border-bottom":"1px dashed rgba(0, 200, 0, .35)"}),this.$devInfo.appendTo(this.$devBlock)),this.$devInfo.empty(),this.$devInfo.append($("<div />").text("Tabs count: "+this.tabs.length)),this.$devInfo.append($("<div />").text("Dropdown count: "+this.dropdownTabs.length)),this.$devInfo.append($("<div />").text("El width: "+this.$element.width())),this.$devInfo.append($("<div />").text("Tabs width: "+this.getTabsWidth())),this.$devInfo.append($("<div />").text("Tabs width with dots: "+(this.getTabsWidth()+this.$dropdownContainer.outerWidth()))),this.$devInfo.append($("<div />").text("Free space: "+this.getFreeSpace())),this.tabs.length&&this.$devInfo.append($("<div />").text("Last tab width: "+this.tabs[this.tabs.length-1].width)),this.dropdownTabs.length&&this.$devInfo.append($("<div />").text("First dropdown tab width: "+this.dropdownTabs[0].width))},t=function(t){return this.each((function(){var i=$(this),n=i.data("vcUiTabsLine"),a=i.data("vc.tabsLine"),o=$.extend(!0,{},e.DEFAULTS,i.data(),n,"object"==typeof t&&t),s="string"==typeof t?t:o.action;a||i.data("vc.tabsLine",a=new e(this,o)),s&&a[s]()}))},i=$.fn.vcTabsLine,$.fn.vcTabsLine=t,$.fn.vcTabsLine.Constructor=e,$.fn.vcTabsLine.noConflict=function(){return $.fn.vcTabsLine=i,this},$(window).on("load",(function(){$("[data-vc-ui-tabs-line]").each((function(){var e=$(this);t.call(e,e.data())}))}))}(window.jQuery),window.vc||(window.vc={}),function(){var e=vc.events={};_.extend(e,Backbone.Events),e.triggerShortcodeEvents=function(e,t){var i;i=t.get("shortcode"),this.trigger("shortcodes",t,e),this.trigger("shortcodes:"+i,t,e),this.trigger("shortcodes:"+e,t),this.trigger("shortcodes:"+i+":"+e,t),this.trigger("shortcodes:"+i+":"+e+":parent:"+t.get("parent_id"),t),this.triggerParamsEvents(e,t)},e.triggerParamsEvents=function(e,t){var i,n,a;i=t.get("shortcode"),n=_.extend({},t.get("params")),a=vc.map[i],_.isArray(a.params)&&_.each(a.params,(function(a){this.trigger("shortcodes:"+e+":param",t,n[a.param_name],a),this.trigger("shortcodes:"+i+":"+e+":param",t,n[a.param_name],a),this.trigger("shortcodes:"+e+":param:type:"+a.type,t,n[a.param_name],a),this.trigger("shortcodes:"+i+":"+e+":param:type:"+a.type,t,n[a.param_name],a),this.trigger("shortcodes:"+e+":param:name:"+a.param_name,t,n[a.param_name],a),this.trigger("shortcodes:"+i+":"+e+":param:name:"+a.param_name,t,n[a.param_name],a)}),this)}}(window.jQuery),function($){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var e=this.$editor.session.getLength();this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)}else this.$editor.focus()},setEditorAce:function(e){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.$editor.focus();var t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(e){return this.$editor||(this.$editor=$("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),$("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(e),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var e=$(window).height()-380;this.aceEnabled()?$("#"+this.sel).css({height:e,minHeight:e}):(this.$editor.parent().css({height:e,minHeight:e}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var e,t,i=$("#"+this.sel);t=i.offset().top,e=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top-t-70,this.aceEnabled()?i.css({height:e,minHeight:e}):(this.$editor.parent().css({height:e,minHeight:e}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(){"use strict";window.Backbone.View.vcExtendUI=function(e){var t=this.extend(e);return t.prototype._vcUIEventsHooks||(t.prototype._vcUIEventsHooks=[]),e.uiEvents&&t.prototype._vcUIEventsHooks.push(e.uiEvents),t},window.vc.View=Backbone.View.extend({delegateEvents:function(){vc.View.__super__.delegateEvents.call(this),this._vcUIEventsHooks&&this._vcUIEventsHooks.length&&_.each(this._vcUIEventsHooks,(function(e){_.isObject(e)&&_.each(e,(function(e,t){_.isString(e)&&_.each(e.split(/\s+/),(function(e){this.on(t,this[e],this)}),this)}),this)}),this)}})}(),window._.isUndefined(window.vc)&&(window.vc={}),function(e,t,$){"use strict";window.vc_toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},window.vc_convert_column_size=function(e){var i,n,a,o;return i=e?e.split("/"):[1,1],n=t.range(1,13),a=!t.isUndefined(i[0])&&0<=t.indexOf(n,parseInt(i[0],10))&&parseInt(i[0],10),o=!t.isUndefined(i[1])&&0<=t.indexOf(n,parseInt(i[1],10))&&parseInt(i[1],10),!1!==a&&!1!==o?"vc_col-sm-"+12*a/o:"vc_col-sm-12"},window.vc_convert_column_span_size=function(e){return"span12"===(e=e.replace(/^vc_/,""))?"1/1":"span11"===e?"11/12":"span10"===e?"5/6":"span9"===e?"3/4":"span8"===e?"2/3":"span7"===e?"7/12":"span6"===e?"1/2":"span5"===e?"5/12":"span4"===e?"1/3":"span3"===e?"1/4":"span2"===e?"1/6":"span1"===e&&"1/12"},window.vc_get_column_mask=function(e){var i,n,a,o;for(o in n=(i=e.split("_")).length,a=0,i)if(!isNaN(parseFloat(i[o]))&&isFinite(i[o])){var s=i[o].match(/(\d{1,2})(\d{1,2})/);a=t.reduce(s.slice(1),(function(e,t){return e+parseInt(t,10)}),a)}return n+""+a},window.VCS4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},window.vc_guid=function(){return window.VCS4()+window.VCS4()+"-"+window.VCS4()},window.vc_button_param_target_callback=function(){var e,i;e=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),i=$(".wpb-edit-form [name=href]");var n=t.debounce((function(){var t=$(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()}),300);i.on("keyup",n).trigger("keyup")},window.vc_cta_button_param_target_callback=function(){var e,i;e=this.$content.find("[name=target]").parents('[data-vc-ui-element="panel-shortcode-param"]:first'),i=$(".wpb-edit-form [name=href]");var n=t.debounce((function(){var t=$(this).val();0<t.length&&"http://"!==t&&"https://"!==t?e.show():e.hide()}),300);i.on("keyup",n).trigger("keyup")},window.vc_grid_exclude_dependency_callback=function(){var e=$(".wpb_vc_param_value[name=exclude]",this.$content).data("vc-param-object");if(!e)return!1;var t=$('select.wpb_vc_param_value[name="post_type"]',this.$content),i=t.val();e.source_data=function(e,t){return{query:{query:i,term:e.term}}},e.source_data_val=i,t.on("change",(function(){i=$(this).val(),e.source_data_val!=i&&(e.source_data=function(e,t){return{query:{query:i,term:e.term}}},e.$el.data("uiAutocomplete").destroy(),e.$sortable_wrapper.find(".vc_data").remove(),e.render(),e.source_data_val=i)}))},window.vcGridFilterExcludeCallBack=function(){var e,t,i,n;if(e=$(".wpb_vc_param_value[name=filter_source]",this.$content),n=e.val(),t=$(".wpb_vc_param_value[name=exclude_filter]",this.$content),void 0===(i=t.data("vc-param-object")))return!1;e.on("change",(function(){var e=$(this);n!==e.val()&&i.clearValue(),i.source_data=function(){return{vc_filter_by:e.val()}}})).trigger("change")},window.vcGridTaxonomiesCallBack=function(){var e,t,i,n;if(e=$(".wpb_vc_param_value[name=post_type]",this.$content),n=e.val(),t=$(".wpb_vc_param_value[name=taxonomies]",this.$content),void 0===(i=t.data("vc-param-object")))return!1;e.on("change",(function(){var t=$(this);n!==t.val()&&i.clearValue(),i.source_data=function(){return{vc_filter_post_type:e.val()}}})).trigger("change")},window.vcChartCustomColorDependency=function(){var e,t;e=$(".wpb_vc_param_value[name=style]",this.$content),t=this.$content,e.on("change",(function(){var e;e=$(this).val(),t.toggleClass("vc_chart-edit-form-custom-color","custom"===e)})),e.trigger("change")},window.vc_wpnop=function(e){if(e=void 0!==e?e+"":"",window.switchEditors&&void 0!==window.switchEditors.pre_wpautop)return(e=window.switchEditors.pre_wpautop(e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1");if(!e)return"";var t="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",i=t+"|div|p",n=t+"|pre",a=!1,o=!1,s=[];return-1===e.indexOf("<script")&&-1===e.indexOf("<style")||(e=e.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return s.push(e),"<wp-preserve>"}))),-1!==e.indexOf("<pre")&&(a=!0,e=e.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(function(e){return(e=(e=e.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")}))),-1!==e.indexOf("[caption")&&(o=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")}))),-1!==(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(new RegExp("\\s*</("+i+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+i+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,(function(e,t){return t&&-1!==t.indexOf("\n")?"\n\n":"\n"}))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+n+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+n+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")&&(e=(e=e.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==e.indexOf("<hr")&&(e=e.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/[\r\n]+/g,"")}))),e=(e=(e=(e=e.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),a&&(e=e.replace(/<wp-line-break>/g,"\n")),o&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),s.length&&(e=e.replace(/<wp-preserve>/g,(function(){return s.shift()}))),e},window.vc_wpautop=function(e){if(e=void 0!==e?e+"":"",window.switchEditors&&void 0!==window.switchEditors.wpautop)return(e=window.switchEditors.wpautop(e)).replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1");var t=!1,i=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return-1!==(e=e.replace(/\r\n|\r/g,"\n")).indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,(function(e){return e.replace(/\n+/g,"")}))),-1===(e=e.replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/g," ")}))).indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,(function(e){return e.replace(/\n/g,"<wp-line-break>")}))),-1!==e.indexOf("<figcaption")&&(e=(e=e.replace(/\s*(<figcaption[^>]*>)/g,"$1")).replace(/<\/figcaption>\s*/g,"</figcaption>")),-1!==e.indexOf("[caption")&&(i=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,(function(e){return(e=(e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>")).replace(/<[^<>]+>/g,(function(e){return e.replace(/[\n\t ]+/," ")}))).replace(/\s*\n\s*/g,"<wp-temp-br />")}))),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+="\n\n").replace(/<br \/>\s*<br \/>/gi,"\n\n")).replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n\n$1")).replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n")).replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n")).replace(/\s*<option/gi,"<option")).replace(/<\/option>\s*/gi,"</option>")).replace(/\n\s*\n+/g,"\n\n")).replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n")).replace(/<p>\s*?<\/p>/gi,"")).replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/<p>(<li.+?)<\/p>/gi,"$1")).replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1")).replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1")).replace(/(<br[^>]*>)\s*\n/gi,"$1")).replace(/\s*\n/g,"<br />\n")).replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1")).replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]")).replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,(function(e,t,i){return i.match(/<p( [^>]*)?>/)?e:t+"<p>"+i+"</p>"})),t&&(e=e.replace(/<wp-line-break>/g,"\n")),i&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e.replace(/<p>(<!--(?:.*)-->)<\/p>/g,"$1")},window.vc_regexp_shortcode=t.memoize((function(){return RegExp("\\[(\\[?)([\\w|-]+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})),window.vcAddShortcodeDefaultParams=function(i){var n=i.get("params"),a=i.get("preset");n=t.extend({},e.getDefaults(i.get("shortcode")),n),a&&window.vc_all_presets[a]&&(n=window.vc_all_presets[a],void 0!==e.frame_window&&window.vc_all_presets[a].css&&e.frame_window.vc_iframe.setCustomShortcodeCss(window.vc_all_presets[a].css)),i.set({params:n},{silent:!0})},window.vc_globalHashCode=function(e){return"string"!=typeof e&&(e=JSON.stringify(e)),e.length?e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0):0},e.memoizeWrapper=function(e,i){var n={};return function(){var a=i?i.apply(this,arguments):arguments[0];return t.hasOwnProperty.call(n,a)||(n[a]=e.apply(this,arguments)),t.isObject(n[a])?window.jQuery.fn.extend(!0,{},n[a]):n[a]}},window.vcChartParamAfterAddCallback=function(e,t){if("new"!==t&&"clone"!==t||e.find(".vc_control.column_toggle").click(),"new"===t){var i,n,a,o,s,c;for(s=["white","black"],a=(n=e.find("[name=values_color]")).find("option"),i=0;!(100<i++);)if(o=Math.floor(Math.random()*a.length),-1===window.jQuery.inArray(a.eq(o).val(),s)){a.eq(o).prop("selected",!0),n.change();break}c=["#5472d2","#00c1cf","#fe6c61","#8d6dc4","#4cadc9","#cec2ab","#50485b","#75d69c","#f7be68","#5aa1e3","#6dab3c","#f4524d","#f79468","#b97ebb","#ebebeb","#f7f7f7","#0088cc","#58b9da","#6ab165","#ff9900","#ff675b","#555555"],o=Math.floor(Math.random()*c.length),e.find("[name=values_custom_color]").val(c[o]).change()}},e.events.on("shortcodes:vc_row:add:param:name:parallax shortcodes:vc_row:update:param:name:parallax",(function(e,t){if(t){var i=e.get("params");i&&i.css&&(i.css=i.css.replace(/(background(\-position)?\s*\:\s*[\S]+(\s*[^\!\s]+)?)[\s*\!important]*/g,"$1"),e.set("params",i,{silent:!0}))}})),e.events.on("shortcodes:vc_single_image:sync shortcodes:vc_single_image:add",(function(e){var t=e.get("params");t.link&&!t.onclick&&(t.onclick="custom_link",e.save({params:t}))})),window.vcEscapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return null==e?"":e.replace(/[&<>"']/g,(function(e){return t[e]}))},window.vc_slugify=function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}}(window.vc,window._,window.jQuery),window.jQuery.expr[":"].containsi=function(e,t,i){return 0<=window.jQuery(e).text().toUpperCase().indexOf(i[3].toUpperCase())},function($,e){"use strict";var t,i=[],n=wp.media,a=n.featuredImage.set,o=n.editor.send.attachment,s=i18nLocale,c={};function r(e,t){var a=e.models?e.pluck("id"):e;$.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:a,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done((function(i){var a,o,s;if("function"==typeof t){for(a=[],s=0;s<i.data.ids.length;s++)o=(o="function"==typeof o?e.get(i.data.ids[s]):e[i.data.ids[s]])||n.model.Attachment.get(i.data.ids[s]),a.push(o);var c=function(e){for(var t=[],i=0;i<e.length;i++)e[i].get("url")||t.push(e[i].fetch());return t}(a);$.when.apply($,c).done((function(){t(a)}))}})).fail((function(e){$(".media-modal-close").click(),i=[],window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&window.vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.warn&&window.console.warn("processImages failed",e)})).always((function(){$(".media-modal").removeClass("processing-media")}))}function l(e){var t,i,n;if((n=$(".media-frame:visible [data-vc-preview-image-filter="+e+"]")).length){if(t=$(".media-frame:visible .attachment-info .thumbnail-image").eq(-1),i=t.find("img"),t.addClass("loading"),i.data("original-src")||i.data("original-src",i.attr("src")),!n.val().length)return i.attr("src",i.data("original-src")),void t.removeClass("loading");$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"vc_media_editor_preview_image",filter:n.val(),attachment_id:e,preferred_size:window.getUserSetting("imgsize","medium"),_vcnonce:window.vcAdminNonce}}).done((function(e){e.success&&e.data.src.length&&i.attr("src",e.data.src)})).fail((function(e,t,i){window.console.warn("Filter preview failed:",t,i)})).always((function(){t.removeClass("loading")}))}}t=e.extend(n.view.AttachmentCompat.prototype.render),n.view.AttachmentCompat.prototype.render=function(){var i,n=this;return i=this.model.get("id"),t.call(this),e.defer((function(){var e,t,a,o;e=n.controller.$el.find(".attachment-info"),o=n.controller.$el.find("[data-vc-preview-image-filter]"),e.length&&o.length&&(t='<label class="setting vc-image-filter-setting">',t+='<span class="name">'+o.parent().find(".vc-filter-label").text()+"</span>",t+=o[0].outerHTML,t+="</label>",e.before(t),o.parents("tr").remove()),void 0!==window.vc_selectedFilters&&void 0!==window.vc_selectedFilters[i]&&(a=$(".media-frame:visible [data-vc-preview-image-filter="+i+"]")).length&&a.val(window.vc_selectedFilters[i]).change(),l(i)})),this},n.editor.send.attachment=function(e,t){i.push(t.id),r([t.id],(function(t){var a=t.slice(0).pop().attributes;o(e,a).done((function(e){!function e(t,a){i&&i[0]!==a?setTimeout((function(){e(t,a)}),50):(i.shift(),n.editor.insert(t))}(e,a.id)}))}))},n.featuredImage.set=function(e){var t=[e];-1!==e?$.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:t,_vcnonce:window.vcAdminNonce}}).done((function(t){var i;!0===t.success&&t.data.ids.length?(i=t.data.ids.pop(),a(i)):a(e)})).fail((function(){a(e)})):a(e)},n.controller.VcSingleImage=n.controller.FeaturedImage.extend({defaults:e.defaults({id:"vc_single-image",filterable:"uploaded",multiple:!1,toolbar:"vc_single-image",title:s.set_image,priority:60,syncSelection:!1},n.controller.Library.prototype.defaults),updateSelection:function(){var t,i=this.get("selection"),a=n.vc_editor.getData();void 0!==a&&""!==a&&-1!==a&&(t=e.map(a.toString().split(/,/),(function(e){var t=n.model.Attachment.get(e);return t.get("url")&&t.get("url").length||t.fetch(),t}))),i.reset(t)}}),n.controller.VcGallery=n.controller.VcSingleImage.extend({defaults:e.defaults({id:"vc_gallery",title:s.add_images,toolbar:"main-insert",filterable:"uploaded",library:n.query({type:"image"}),multiple:"add",editable:!0,priority:60,syncSelection:!1},n.controller.Library.prototype.defaults)}),n.VcSingleImage={getData:function(){return this.$hidden_ids.val()},set:function(e){var t=vc.template($("#vc_settings-image-block").html(),vc.templateOptions.custom);return this.$img_ul.html(t(e)),this.$clear_button.show(),this.$hidden_ids.val(e.id).trigger("change"),!1},frame:function(e){return window.vc_selectedFilters={},this.element=e,this.$button=$(this.element),this.$block=this.$button.closest(".edit_form_line"),this.$hidden_ids=this.$block.find(".gallery_widget_attached_images_ids"),this.$img_ul=this.$block.find(".gallery_widget_attached_images_list"),this.$clear_button=this.$img_ul.next(),this._frame||(this._frame=n({state:"vc_single-image",states:[new n.controller.VcSingleImage]}),this._frame.on("toolbar:create:vc_single-image",(function(e){this.createSelectToolbar(e,{text:s.set_image,close:!1})}),this._frame),this._frame.state("vc_single-image").on("select",this.select)),this._frame},select:function(){var e=this.get("selection");vc.events.trigger("click:media_editor:add_image",e,"single")}},n.view.MediaFrame.VcGallery=n.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new n.controller.VcGallery])},bindHandlers:function(){n.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:create:main-insert",this.createToolbar,this),e.each({content:{embed:"embedContent","edit-selection":"editSelectionContent"},toolbar:{"main-insert":"mainInsertToolbar"}},(function(t,i){e.each(t,(function(e,t){this.on(i+":render:"+t,this[e],this)}),this)}),this)},mainInsertToolbar:function(e){var t=this;this.selectionStatusToolbar(e),e.set("insert",{style:"primary",priority:80,text:s.add_images,requires:{selection:!0},click:function(){var e=t.state(),i=e.get("selection");vc.events.trigger("click:media_editor:add_image",i,"gallery"),e.trigger("insert",i)}})}}),n.vc_editor=e.clone(n.editor),e.extend(n.vc_editor,{$vc_editor_element:null,getData:function(){return n.vc_editor.$vc_editor_element.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val()},insert:function(t){var i=n.vc_editor.$vc_editor_element.closest(".edit_form_line"),a=i.find(".gallery_widget_attached_images_ids"),o=i.find(".gallery_widget_attached_images_list"),s="",c=vc.template($("#vc_settings-image-block").html(),vc.templateOptions.custom);e.each(t,(function(e){s+=c(e)})),a.val(e.map(t,(function(e){return e.id})).join(",")).trigger("change"),o.html(s)},open:function(e){var t;return e=this.id(e),t=(t=this.get(e))||this.add(e),window.vc_selectedFilters={},t.open()},add:function(t,i){var a=this.get(t);return a||(c[t]?c[t]:a=c[t]=new n.view.MediaFrame.VcGallery(e.defaults(i||{},{state:"vc_gallery",title:s.add_images,library:{type:"image"},multiple:!0})))},init:function(){$("body").unbind("click.vcGalleryWidget").on("click.vcGalleryWidget",".gallery_widget_add_images",(function(e){e.preventDefault();var t=$(this);n.vc_editor.$vc_editor_element=$(this),"true"!==t.attr("use-single")?(t.blur(),n.vc_editor.open("visual-composer")):n.VcSingleImage.frame(this).open("vc_editor")}))}}),e.bindAll(n.vc_editor,"open"),$(document).ready((function(){n.vc_editor.init()})),vc.events.on("click:media_editor:add_image",(function(t,i){$(".media-modal").addClass("processing-media"),r(t,(function(a){var o,s;switch(o=e.map(a,(function(e){return e.attributes})),t.reset(o),s=e.map(t.models,(function(e){return e.attributes})),void 0===i&&(i=""),i){case"gallery":n.vc_editor.insert(s);break;case"single":n.VcSingleImage.set(s[0])}$(".media-modal").removeClass("processing-media"),$(".media-modal-close").click()}))})),$("body").on("change","[data-vc-preview-image-filter]",(function(){var e;e=$(this).data("vcPreviewImageFilter"),void 0===window.vc_selectedFilters&&(window.vc_selectedFilters={}),window.vc_selectedFilters[e]=$(this).val(),l(e)}))}(window.jQuery,window._),_.isUndefined(window.vc)&&(window.vc={}),window.vc.filters={templates:[]},window.vc.addTemplateFilter=function(e){_.isFunction(e)&&this.filters.templates.push(e)},function($){"use strict";function e(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape)}function t(e,t){this.el=e,this.$el=$(this.el),this.$el_wrap="",this.$block="",this.suggester="",this.selected_items=[],this.options=_.isObject(t)?t:{},_.defaults(this.options,{css_class:"vc_suggester",limit:!1,source:{},predefined:[],locked:!1,select_callback:function(e,t){},remove_callback:function(e,t){},update_callback:function(e,t){},check_locked_callback:function(e,t){return!1}}),this.init()}window.init_textarea_html=function(e){var t,i,n,a;(t=$("#wp-link")).parent().hasClass("wp-dialog")&&t.wpdialog("destroy"),i=e.attr("id"),a=(n=e.closest(".edit_form_line")).find(".vc_textarea_html_content");try{_.isUndefined(tinyMCEPreInit.qtInit[i])&&(window.tinyMCEPreInit.qtInit[i]=_.extend({},window.tinyMCEPreInit.qtInit[window.wpActiveEditor],{id:i})),window.tinyMCEPreInit&&window.tinyMCEPreInit.mceInit[window.wpActiveEditor]&&(window.tinyMCEPreInit.mceInit[i]=_.extend({},window.tinyMCEPreInit.mceInit[window.wpActiveEditor],{resize:"vertical",height:200,id:i,setup:function(e){void 0!==e.on?e.on("init",(function(e){window.wpActiveEditor=i})):e.onInit.add((function(e){window.wpActiveEditor=i}))}}),window.tinyMCEPreInit.mceInit[i].plugins=window.tinyMCEPreInit.mceInit[i].plugins.replace(/,?wpfullscreen/,""),window.tinyMCEPreInit.mceInit[i].wp_autoresize_on=!1),vc.edit_element_block_view&&vc.edit_element_block_view.currentModelParams?e.val(vc_wpautop(vc.edit_element_block_view.currentModelParams[a.attr("name")]||"")):e.val(a.val()),quicktags(window.tinyMCEPreInit.qtInit[i]),QTags._buttonsInit(),window.tinymce&&(window.switchEditors&&window.switchEditors.go(i,"tmce"),"4"===tinymce.majorVersion&&tinymce.execCommand("mceAddEditor",!0,i)),window.wpActiveEditor=i}catch(t){e.data("vcTinyMceDisabled",!0).appendTo(n),$("#wp-"+i+"-wrap").remove(),console&&console.error&&(console.error("VC: Tinymce error! Compatibility problem with other plugins."),console.error(t))}},
Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e},vc.loop_partial=function(e,t,i,n){var a=_.isObject(i)&&!_.isUndefined(i[t])?i[t]:"";return vc.template($("#_vcl-"+e).html(),vc.templateOptions.custom)({name:t,data:a,settings:n})},vc.loop_field_not_hidden=function(e,t){return!(_.isObject(t[e])&&_.isBoolean(t[e].hidden)&&!0===t[e].hidden)},vc.is_locked=function(e){return _.isObject(e)&&_.isBoolean(e.locked)&&!0===e.locked},t.prototype={constructor:t,init:function(){_.bindAll(this,"buildSource","itemSelected","labelClick","setFocus","resize"),this.$el.wrap('<ul class="'+this.options.css_class+'"><li class="input"/></ul>'),this.$el_wrap=this.$el.parent(),this.$block=this.$el_wrap.closest("ul").append($('<li class="clear"/>')),this.$el.on("focus",this.resize).on("blur",(function(){$(this).parent().width(170),$(this).val("")})),this.$block.on("click",this.setFocus),this.suggester=this.$el.data("suggest"),this.$el.autocomplete({source:this.buildSource,select:this.itemSelected,minLength:2,focus:function(e,t){return!1}}).data("ui-autocomplete")._renderItem=function(e,t){return $('<li data-value="'+t.value+'">').append("<a>"+t.name+"</a>").appendTo(e)},this.$el.autocomplete("widget").addClass("vc_ui-front"),_.isArray(this.options.predefined)&&_.each(this.options.predefined,(function(e){this.create(e)}),this)},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el_wrap.width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4))},setFocus:function(e){e.preventDefault(),$(e.target).hasClass(this.options.css_class)&&this.$el.trigger("focus")},itemSelected:function(e,t){return this.$el.blur(),this.create(t.item),this.$el.focus(),!1},create:function(e){var t,i,n=this.selected_items.push(e)-1,a=!0===this.options.check_locked_callback(this.$el,e)?"":' <a class="remove">&times;</a>';_.isUndefined(this.selected_items[n].action)&&(this.selected_items[n].action="+"),i="-"===this.selected_items[n].action?" exclude":" include",(t=$('<li class="vc_suggest-label'+i+'" data-index="'+n+'" data-value="'+e.value+'"><span class="label">'+e.name+"</span>"+a+"</li>")).insertBefore(this.$el_wrap),_.isEmpty(a)||t.on("click",this.labelClick),this.options.select_callback(t,this.selected_items)},labelClick:function(e){e.preventDefault();var t=$(e.currentTarget),i=parseInt(t.data("index"),10);if($(e.target).is(".remove"))return this.selected_items.splice(i,1),this.options.remove_callback(t,this.selected_items),t.remove(),!1;this.selected_items[i].action="+"===this.selected_items[i].action?"-":"+","+"===this.selected_items[i].action?t.removeClass("exclude").addClass("include"):t.removeClass("include").addClass("exclude"),this.options.update_callback(t,this.selected_items)},buildSource:function(e,t){this.ajax&&(this.ajax.abort(),t([]),this.ajax=!1);var i=_.filter(_.map(this.selected_items,(function(e){return e?e.value:void 0}))).join(",");this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_suggestion",field:this.suggester,exclude:i,query:e.term,_vcnonce:window.vcAdminNonce}}).done((function(e){t(e)}))}},$.fn.suggester=function(e){return this.each((function(){var i=$(this),n=i.data("suggester");n||i.data("suggester",n=new t(this,e)),"string"==typeof e&&n[e]()}))};var i=Backbone.View.extend({className:"loop_params_holder",events:{"click input, select":"save","change input, select":"save","change :checkbox[data-input]":"updateCheckbox"},query_options:{},return_array:{},controller:"",initialize:function(){_.bindAll(this,"save","updateSuggestion","suggestionLocked")},render:function(e){var t=vc.template($("#vcl-loop-frame").html(),_.extend({},vc.templateOptions.custom,{variable:"loop"}));return this.controller=e,this.$el.html(t(this.model)),this.controller.$el.append(this.$el),_.each($("[data-suggest]"),(function(e){var t=$(e),i=window.decodeURIComponent($("[data-suggest-prefill="+t.data("suggest")+"]").val());t.suggester({predefined:$.parseJSON(i),select_callback:this.updateSuggestion,update_callback:this.updateSuggestion,remove_callback:this.updateSuggestion,check_locked_callback:this.suggestionLocked})}),this),this.save(),this},show:function(){this.$el.slideDown()},save:function(e){this.return_array={},_.each(this.model,(function(e,t){var i=this.getValue(t,e);_.isString(i)&&!_.isEmpty(i)&&(this.return_array[t]=i)}),this),this.controller.setInputValue(this.return_array)},getValue:function(e){return $("[name="+e+"]",this.$el).val()},hide:function(){this.$el.slideUp()},toggle:function(){this.$el.is(":animated")||this.$el.slideToggle()},updateCheckbox:function(e){var t=$(e.currentTarget).data("input"),i=$("[data-name="+t+"]",this.$el),n=[];$("[data-input="+t+"]:checked").each((function(){n.push($(this).val())})),i.val(n),this.save()},updateSuggestion:function(e,t){var i,n=e.closest("[data-block=suggestion]");i=_.reduce(t,(function(e,t){return _.isEmpty(t)?"":e+(_.isEmpty(e)?"":",")+("-"===t.action?"-":"")+t.value}),"").trim(),n.find("[data-suggest-value]").val(i).trigger("change")},suggestionLocked:function(e,t){var i,n;return i=t.value,n=e.closest("[data-block=suggestion]").find("[data-suggest-value]").data("suggest-value"),this.controller.settings&&this.controller.settings[n]&&_.isBoolean(this.controller.settings[n].locked)&&1==this.controller.settings[n].locked&&_.isString(this.controller.settings[n].value)&&0<=_.indexOf(this.controller.settings[n].value.replace("-","").split(/\,/),""+i)}}),n=Backbone.View.extend({events:{"click .vc_loop-build":"showEditor"},initialize:function(){_.bindAll(this,"createEditor"),this.$input=$(".wpb_vc_param_value",this.$el),this.$button=this.$el.find(".vc_loop-build"),this.data=this.$input.val(),this.settings=$.parseJSON(window.decodeURIComponent(this.$button.data("settings")))},render:function(){return this},showEditor:function(e){if(e.preventDefault(),_.isObject(this.loop_editor_view))return this.loop_editor_view.toggle(),!1;$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:{action:"wpb_get_loop_settings",value:this.data,settings:this.settings,post_id:vc_post_id,_vcnonce:window.vcAdminNonce}}).done(this.createEditor)},createEditor:function(e){this.loop_editor_view=new i({model:_.isEmpty(e)?{}:e}),this.loop_editor_view.render(this).show()},setInputValue:function(e){this.$input.val(_.map(e,(function(e,t){return t+":"+e})).join("|"))}}),a=Backbone.View.extend({events:{"click .vc_options-edit":"showEditor","click .vc_close-button":"showEditor","click input, select":"save","change input, select":"save","keyup input":"save"},data:{},fields:{},initialize:function(){this.$button=this.$el.find(".vc_options-edit"),this.$form=this.$el.find(".vc_options-fields"),this.$input=this.$el.find(".wpb_vc_param_value"),this.settings=this.$form.data("settings"),this.parseData(),this.render()},render:function(){var e="";return _.each(this.settings,(function(t){_.isUndefined(this.data[t.name])?_.isUndefined(t.value)||(t.value=t.value.toString().split(","),this.data[t.name]=t.value):t.value=this.data[t.name],this.fields[t.name]=t;var i=$("#vcl-options-field-"+t.type);if(i.is("script")){var n=vc.template(i.html(),vc.templateOptions.custom);e+=n(_.extend({},{name:"",label:"",value:[],options:"",description:""},t))}}),this),this.$form.html(e+this.$form.html()),this},parseData:function(){_.each(this.$input.val().split("|"),(function(e){if(e.match(/\:/)){var t=e.split(":"),i=t[0],n=t[1];this.data[i]=_.map(n.split(","),(function(e){return window.decodeURIComponent(e)}))}}),this)},saveData:function(){var e=_.map(this.data,(function(e,t){return t+":"+_.map(e,(function(e){return window.encodeURIComponent(e)})).join(",")})).join("|");this.$input.val(e)},showEditor:function(){this.$form.slideToggle()},save:function(e){var t=$(e.currentTarget);if(t.is(":checkbox")){var i=[];this.$el.find("input[name="+t.attr("name")+"]").each((function(){this.checked&&i.push($(this).val())})),this.data[t.attr("name")]=i}else this.data[t.attr("name")]=[t.val()];this.saveData()}});function o(e,t){this.el=e,this.$el=$(this.el),this.$data_field=this.$el.find(".wpb_vc_param_value"),this.$toolbar=this.$el.find(".vc_sorted-list-toolbar"),this.$current_control=this.$el.find(".vc_sorted-list-container"),_.defaults(this.options,{}),this.init()}o.prototype={constructor:o,init:function(){function e(e){return window.decodeURIComponent(e)}_.bindAll(this,"controlEvent","save"),this.$toolbar.on("change","input",this.controlEvent);var t=this.$data_field.val().split(",");for(var i in t){var n,a;!1!==(a=!(!(n=t[i].split("|")).length||!n[0].length)&&this.$toolbar.find("[data-element="+decodeURIComponent(n[0])+"]"))&&a.is("input")&&(a.prop("checked",!0),this.createControl({value:a.val(),label:a.parent().text(),sub:a.data("subcontrol"),sub_value:_.map(n.slice(1),e)}))}this.$current_control.sortable({stop:this.save}).on("change","select",this.save)},createControl:function(e){var t="",i=_.isUndefined(e.sub_value)?[]:e.sub_value;_.isArray(e.sub)&&_.each(e.sub,(function(e,n){t+=" <select>",_.each(e,(function(e){t+='<option value="'+e[0]+'"'+(_.isString(i[n])&&i[n]===e[0]?' selected="true"':"")+">"+e[1]+"</option>"})),t+="</select>"}),this),this.$current_control.append('<li class="vc_control-'+e.value+'" data-name="'+e.value+'">'+e.label+t+"</li>")},controlEvent:function(e){var t=$(e.currentTarget);t[0].checked?this.createControl({value:t.val(),label:t.parent().text(),sub:t.data("subcontrol")}):this.$current_control.find(".vc_control-"+t.val()).remove(),this.save()},save:function(){var e=_.map(this.$current_control.find("[data-name]"),(function(e){var t=encodeURIComponent($(e).data("name"));return $(e).find("select").each((function(){var e=$(this);e.is("select")&&""!==e.val()&&(t+="|"+encodeURIComponent(e.val()))})),t})).join(",");this.$data_field.val(e)}},$.fn.VcSortedList=function(e){return this.each((function(){var t=$(this),i=t.data("vc_sorted_list");_.isObject(e),i||t.data("vc_sorted_list",i=new o(this)),"string"==typeof e&&i[e]()}))};var s=Backbone.View.extend({preview_el:".vc_google_fonts_form_field-preview-container > span",font_family_dropdown_el:".vc_google_fonts_form_field-font_family-container > select",font_style_dropdown_el:".vc_google_fonts_form_field-font_style-container > select",font_style_dropdown_el_container:".vc_google_fonts_form_field-font_style-container",status_el:".vc_google_fonts_form_field-status-container > span",events:{"change .vc_google_fonts_form_field-font_family-container > select":"fontFamilyDropdownChange","change .vc_google_fonts_form_field-font_style-container > select":"fontStyleDropdownChange"},initialize:function(e){_.bindAll(this,"previewElementInactive","previewElementActive","previewElementLoading"),this.$preview_el=$(this.preview_el,this.$el),this.$font_family_dropdown_el=$(this.font_family_dropdown_el,this.$el),this.$font_style_dropdown_el=$(this.font_style_dropdown_el,this.$el),this.$font_style_dropdown_el_container=$(this.font_style_dropdown_el_container,this.$el),this.$status_el=$(this.status_el,this.$el),this.fontFamilyDropdownRender()},render:function(){return this},previewElementRender:function(){return this.$preview_el.css({"font-family":this.font_family,"font-style":this.font_style,"font-weight":this.font_weight}),this},previewElementInactive:function(){this.$status_el.text(window.i18nLocale.gfonts_loading_google_font_failed||"Loading google font failed.").css("color","#FF0000")},previewElementActive:function(){this.$preview_el.text("Grumpy wizards make toxic brew for the evil Queen and Jack.").css("color","inherit"),this.fontStyleDropdownRender()},previewElementLoading:function(){this.$preview_el.text(window.i18nLocale.gfonts_loading_google_font||"Loading Font...")},fontFamilyDropdownRender:function(){return this.fontFamilyDropdownChange(),this},fontFamilyDropdownChange:function(){var e=this.$font_family_dropdown_el.find(":selected");return this.font_family_url=e.val(),this.font_family=e.attr("data[font_family]"),this.font_types=e.attr("data[font_types]"),this.$font_style_dropdown_el_container.parent().hide(),this.font_family_url&&0<this.font_family_url.length&&WebFont.load({google:{families:[this.font_family_url]},inactive:this.previewElementInactive,active:this.previewElementActive,loading:this.previewElementLoading}),this},fontStyleDropdownRender:function(){var e=this.font_types.split(","),t="",i=this.$font_family_dropdown_el.attr("default[font_style]");for(var n in e){var a=e[n].split(":"),o="";_.isString(i)&&0<i.length&&e[n]==i&&(o="selected"),t=t+"<option "+o+' value="'+e[n]+'" data[font_weight]="'+a[1]+'" data[font_style]="'+a[2]+'" class="'+a[2]+"_"+a[1]+'" >'+a[0]+"</option>"}return this.$font_style_dropdown_el.html(t),this.$font_style_dropdown_el_container.parent().show(),this.fontStyleDropdownChange(),this},fontStyleDropdownChange:function(){var e=this.$font_style_dropdown_el.find(":selected");return this.font_weight=e.attr("data[font_weight]"),this.font_style=e.attr("data[font_style]"),this.previewElementRender(),this}}),c=Backbone.View.extend({min_length:2,delay:500,auto_focus:!0,ajax_url:window.ajaxurl,source_data:function(){return{}},replace_values_on_select:!1,initialize:function(e){_.bindAll(this,"sortableChange","resize","labelRemoveHook","updateItems","sortableCreate","sortableUpdate","source","select","labelRemoveClick","createBox","focus","response","change","close","open","create","search","_renderItem","_renderMenu","_renderItemData","_resizeMenu"),e=$.extend({min_length:this.min_length,delay:this.delay,auto_focus:this.auto_focus,replace_values_on_select:this.replace_values_on_select},e),this.options=e,this.param_name=this.options.param_name,this.$el=this.options.$el,this.$el_wrap=this.$el.parent(),this.$sortable_wrapper=this.$el_wrap.parent(),this.$input_param=this.options.$param_input,this.selected_items=[],this.isMultiple=!1,this.render()},resize:function(){var e=this.$el_wrap.position(),t=this.$block.position();this.$el.autocomplete("widget").width(parseFloat(this.$block.width())-(parseFloat(e.left)-parseFloat(t.left)+4)+11)},enableMultiple:function(){this.isMultiple=!0,this.$el.show(),this.$el.focus()},enableSortable:function(){this.sortable=this.$sortable_wrapper.sortable({items:".vc_data",axis:"y",change:this.sortableChange,create:this.sortableCreate,update:this.sortableUpdate})},updateItems:function(){this.selected_items.length?this.$input_param.val(this.getSelectedItems().join(", ")):this.$input_param.val("")},sortableChange:function(e,t){},itemsCreate:function(){var e=[];this.$block.find(".vc_data").each((function(t,i){e.push({label:i.dataset.label,value:i.dataset.value})})),this.selected_items=e},sortableCreate:function(e,t){},sortableUpdate:function(e,t){var i=this.$sortable_wrapper.sortable("toArray",{attribute:"data-index"}),n=[];_.each(i,(function(e){n.push(this.selected_items[e])}),this);var a=0;$("li.vc_data",this.$sortable_wrapper).each((function(){$(this).attr("data-index",a++)})),this.selected_items=n,this.updateItems()},getWidget:function(){return this.$el.autocomplete("widget")},render:function(){if(this.$el.on("focus",this.resize),this.data=this.$el.autocomplete({source:this.source,minLength:this.options.min_length,delay:this.options.delay,autoFocus:this.options.auto_focus,select:this.select,focus:this.focus,response:this.response,change:this.change,close:this.close,open:this.open,create:this.create,search:this.search}),this.data.data("ui-autocomplete")._renderItem=this._renderItem,this.data.data("ui-autocomplete")._renderMenu=this._renderMenu,this.data.data("ui-autocomplete")._resizeMenu=this._resizeMenu,0<this.$input_param.val().length){this.isMultiple?this.$el.focus():this.$el.hide();var e=this;$(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).each((function(){e.labelRemoveHook($(this))}))}return this.getWidget().addClass("vc_ui-front").addClass("vc_ui-auotocomplete"),this.$block=this.$el_wrap.closest("ul").append($('<li class="clear"/>')),this.itemsCreate(),this},close:function(e,t){this.selected&&this.options.no_hide&&(this.getWidget().show(),this.selected++,2<this.selected&&(this.selected=void 0))},open:function(e,t){var i=this.getWidget().menu(),n=i.position();i.css("left",n.left-6),i.css("top",n.top+2)},focus:function(e,t){if(!this.options.replace_values_on_select)return e.preventDefault(),!1},create:function(e,t){},change:function(e,t){},response:function(e,t){},search:function(e,t){},select:function(e,t){if(this.selected=1,t.item){if(this.options.unique_values){var i=this.getWidget().data("uiMenu").active;if(this.options.groups){var n=i.prev(),a=i.next();n.hasClass("vc_autocomplete-group")&&!a.hasClass("vc_autocomplete-item")&&n.remove()}i.remove(),$("li.ui-menu-item",this.getWidget()).length||(this.selected=void 0)}this.createBox(t.item),this.isMultiple?this.$el.focus():this.$el.hide()}return!1},createBox:function(e){var t,i=this.selected_items.push(e)-1;this.updateItems(),(t=$('<li class="vc_autocomplete-label vc_data" data-index="'+i+'" data-value="'+e.value+'" data-label="'+e.label+'"><span class="vc_autocomplete-label"><a>'+e.label+'</a></span><a class="vc_autocomplete-remove">&times;</a></li>')).insertBefore(this.$el_wrap),this.labelRemoveHook(t)},labelRemoveHook:function(e){this.$el.blur(),this.$el.val(""),e.on("click",this.labelRemoveClick)},labelRemoveClick:function(e,t){e.preventDefault();var i=$(e.currentTarget);if($(e.target).is(".vc_autocomplete-remove"))return this.selected_items.splice(i.index(),1),i.remove(),this.updateItems(),this.$el.show(),!1},getSelectedItems:function(){if(this.selected_items.length){var e=[];return _.each(this.selected_items,(function(t){e.push(t.value)})),e}return!1},_renderMenu:function(e,t){var i=this,n=null;this.options.groups&&t.sort((function(e,t){return e.group>t.group})),$.each(t,(function(t,a){i.options.groups&&a.group!=n&&(n=a.group,e.append("<li class='ui-autocomplete-group vc_autocomplete-group' aria-label='"+n+"'>"+n+"</li>")),i._renderItemData(e,a)}))},_renderItem:function(e,t){return $('<li data-value="'+t.value+'" class="vc_autocomplete-item">').append("<a>"+t.label+"</a>").appendTo(e)},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_resizeMenu:function(){},clearValue:function(){this.selected_items=[],this.updateItems(),$(".vc_autocomplete-label.vc_data",this.$sortable_wrapper).remove()},source:function(e,t){var i=this;this.options.values&&0<this.options.values.length?this.options.unique_values?t($.ui.autocomplete.filter(_.difference(this.options.values,this.selected_items),e.term)):t($.ui.autocomplete.filter(this.options.values,e.term)):$.ajax({type:"POST",dataType:"json",url:this.ajax_url,data:$.extend({action:"vc_get_autocomplete_suggestion",shortcode:vc.active_panel.model.get("shortcode"),param:this.param_name,query:e.term,_vcnonce:window.vcAdminNonce},this.source_data(e,t))}).done((function(e){i.options.unique_values?t(_.filter(e,(function(e){return!_.findWhere(i.selected_items,e)}))):t(e)}))}}),r=Backbone.View.extend({$content:{},initialize:function(){_.bindAll(this,"content"),this.$content=this.$el,this.model=vc.active_panel.model},setContent:function(e){this.$content=e},content:function(){return this.$content},render:function(){var e;return $('[data-vc-ui-element="panel-shortcode-param"]',(e=this).content()).each((function(){var t=$(this),i=t.data("param_settings");vc.atts.init.call(e,i,t),t.data("vcInitParam",!0)})),this}}),l=Backbone.View.extend({options:{max_items:0,sortable:!0,deletable:!0,collapsible:!0},items:0,$ul:!1,initializer:{},mappedParams:{},adminLabelParams:[],groupParamName:"",events:{"click > .edit_form_line > .vc_param_group-list > .vc_param_group-add_content":"addNew"},initialize:function(e){var t,i,n;this.$ul=this.$el.find("> .edit_form_line > .vc_param_group-list"),t=$("> .wpb_vc_row",this.$ul),this.initializer=new r({el:this.$el}),this.model=vc.active_panel.model,i=this.$ul.data("settings"),this.mappedParams={},this.adminLabelParams=[],this.options=_.defaults({},_.isObject(e.settings)?e.settings:{},i,this.options),this.groupParamName=this.options.param.param_name,_.isObject(this.options.param)&&_.isArray(this.options.param.params)&&_.each(this.options.param.params,(function(e){var t;t=this.groupParamName+"_"+e.param_name,this.mappedParams[t]=e,_.isObject(e)&&!0===e.admin_label&&this.adminLabelParams.push(t)}),this),this.items=0,n=this,t.length&&t.each((function(){t.data("vc-param-group-param",new d({el:$(this),parent:n})),n.items++,n.afterAdd($(this),"init")})),this.options.sortable&&this.$ul.sortable({handle:".vc_control.column_move",items:"> .wpb_vc_row:not(vc_param_group-add_content-wrapper)",placeholder:"vc_placeholder"})},addNew:function(e){if(e.preventDefault(),this.addAllowed()){var t,i;if(void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.before_add&&"function"==typeof(i=window[this.options.param.callbacks.before_add])&&!i())return;(t=$(JSON.parse(this.$ul.next(".vc_param_group-template").html()))).removeClass("vc_param_group-add_content-wrapper"),t.insertBefore(e.currentTarget),t.show(),this.initializer.setContent(t.find("> .wpb_element_wrapper")),this.initializer.render(),this.items++,t.data("vc-param-group-param",new d({el:t,parent:this})),this.afterAdd(t,"new"),vc.events.trigger("vc-param-group-add-new",e,t,this)}},addAllowed:function(){return 0<this.options.max_items&&this.items+1<=this.options.max_items||this.options.max_items<=0},afterAdd:function(e,t){var i;this.addAllowed()||(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").hide(),this.$ul.find("> .vc_param_group-add_content").hide()),this.options.sortable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_control.column_move").hide(),this.options.deletable||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_delete").hide(),this.options.collapsible||this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_toggle").hide(),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_add&&"function"==typeof(i=window[this.options.param.callbacks.after_add])&&i(e,t)},afterDelete:function(){var e;this.addAllowed()&&(this.$ul.find("> .wpb_vc_row > .vc_param_group-controls > .vc_row_edit_clone_delete > .vc_control.column_clone").show(),this.$ul.find("> .vc_param_group-add_content").show()),void 0!==this.options.param.callbacks&&void 0!==this.options.param.callbacks.after_delete&&"function"==typeof(e=window[this.options.param.callbacks.after_delete])&&e()}}),d=Backbone.View.extend({dependentElements:!1,mappedParams:!1,groupParamName:"",adminLabelParams:[],events:{"click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_toggle":"toggle","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_delete":"deleteParam","click > .vc_controls > .vc_row_edit_clone_delete > .vc_control.column_clone":"clone"},initialize:function(e){this.options=e,this.$content=this.options.parent.$ul,this.model=vc.active_panel.model,this.mappedParams=this.options.parent.mappedParams,this.groupParamName=this.options.parent.groupParamName,this.adminLabelParams=this.options.parent.adminLabelParams,this.dependentElements={},_.bindAll(this,"hookDependent"),this.initializeDependency(),_.bindAll(this,"hookAdminLabel"),this.initializeAdminLabels()},initializeAdminLabels:function(){var e,t;function i(){var e=$(this);e.data("vc_admin_labels")||(e.data("vc_admin_labels",!0),e.bind("keyup change",t),t({currentTarget:this}))}for(t=this.hookAdminLabel,e=0;e<this.adminLabelParams.length;e++)$("[name="+this.adminLabelParams[e]+"].wpb_vc_param_value",this.$el).each(i)},hookAdminLabel:function(e){var t,i,n,a,o,s,c,r,l;for(s=o="",c=[],l=(r=$(e.currentTarget)).closest(".vc_param_group-wrapper"),i=r.closest(".vc_param").find(".vc_param-group-admin-labels"),t=0;t<this.adminLabelParams.length;t++){var d;n=this.adminLabelParams[t],d=(r=l.find("[name="+n+"]")).closest('[data-vc-ui-element="panel-shortcode-param"]'),void 0!==this.mappedParams[n]&&(o=this.mappedParams[n].heading),s=r.is("select")?r.find("option:selected").text():!r.is("input:checkbox")||r[0].checked?r.val():"",a={type:d.data("param_type"),param_name:d.data("param_name")},_.isObject(vc.atts[a.type])&&_.isFunction(vc.atts[a.type].render)&&(s=vc.atts[a.type].render.call(this,a,s)),""!==s&&c.push("<label>"+o+"</label>: "+s)}i.html(c.join(", ")).toggleClass("vc_hidden-label",!c.length)},initializeDependency:function(){var e;e={},_.each(this.mappedParams,(function(t,i){var n,a;_.isObject(t)&&_.isObject(t.dependency)&&_.isString(t.dependency.element)&&(n=$("[name="+this.groupParamName+"_"+t.dependency.element+"].wpb_vc_param_value",this.$el),(a=$("[name="+i+"].wpb_vc_param_value",this.$el)).length&&_.each(n,(function(i){var n,o,s;o=(n=$(i)).attr("name"),s=t.dependency,_.isArray(this.dependentElements[o])||(this.dependentElements[o]=[]),this.dependentElements[o].push(a),n.data("dependentSet")||(n.attr("data-dependent-set","true"),n.bind("keyup change",this.hookDependent)),e[o]||(e[o]=n),_.isString(s.callback)&&window[s.callback].call(this)}),this))}),this),_.each(e,(function(e){this.hookDependent({currentTarget:e})}),this)},hookDependent:function(e){var t,i,n,a,o;return i=(t=$(e.currentTarget)).closest(".vc_column"),a=this.dependentElements[t.attr("name")],o=t.is(":checkbox")?_.map(this.$el.find("[name="+t.attr("name")+"].wpb_vc_param_value:checked"),(function(e){return $(e).val()})):t.val(),n=t.is(":checkbox")?!this.$el.find("[name="+t.attr("name")+"].wpb_vc_param_value:checked").length:!o.length,i.hasClass("vc_dependent-hidden")?_.each(a,(function(e){var t=$.Event("change");t.extra_type="vcHookDependedParamGroup",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(t)})):_.each(a,(function(e){var t,i,a,s;i=e.attr("name"),a=_.isObject(this.mappedParams[i])&&_.isObject(this.mappedParams[i].dependency)?this.mappedParams[i].dependency:{},s=e.closest(".vc_column"),_.isBoolean(a.not_empty)&&!0===a.not_empty&&!n||_.isBoolean(a.is_empty)&&!0===a.is_empty&&n||a.value&&_.intersection(_.isArray(a.value)?a.value:[a.value],_.isArray(o)?o:[o]).length||a.value_not_equal_to&&!_.intersection(_.isArray(a.value_not_equal_to)?a.value_not_equal_to:[a.value_not_equal_to],_.isArray(o)?o:[o]).length?s.removeClass("vc_dependent-hidden"):s.addClass("vc_dependent-hidden"),(t=$.Event("change")).extra_type="vcHookDependedParamGroup",e.trigger(t)}),this),this},deleteParam:function(e){e&&e.preventDefault&&e.preventDefault(),!0===confirm(window.i18nLocale.press_ok_to_delete_section)&&(this.options.parent.items--,this.options.parent.afterDelete(),this.$el.remove(),this.unbind(),this.remove())},content:function(){return this.$content},clone:function(t){if(t.preventDefault(),this.options.parent.addAllowed()){var i=this.options.parent.$ul.data("settings"),n=this.$content;this.$content=this.$el;var a=vc.atts.param_group.parseOne.call(this,i);$.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_param_group_clone",param:e(JSON.stringify(i)),shortcode:vc.active_panel.model.get("shortcode"),value:a,vc_inline:!0,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(e){var t,i=e.data||"";(t=$(i)).insertAfter(this.$el),this.$content=n,this.options.parent.initializer.$content=$("> .wpb_element_wrapper",t),this.options.parent.initializer.render(),t.data("vc-param-group-param",new d({el:t,parent:this.options.parent})),this.options.parent.items++,this.options.parent.afterAdd(t,"clone")}))}},toggle:function(e){e.preventDefault();var t=this.$el;t.find("> .wpb_element_wrapper").slideToggle(),t.toggleClass("vc_param_group-collapsed").siblings(":not(.vc_param_group-collapsed)").addClass("vc_param_group-collapsed").find("> .wpb_element_wrapper").slideUp()}});window.i18nLocale,vc.edit_form_callbacks=[],vc.atts={parse:function(e){var t,i,n,a;return n=(a=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]")).closest('[data-vc-ui-element="panel-shortcode-param"]'),t=_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].parse)?a.length?a.val():null:n.data("vcInitParam")?vc.atts[e.type].parse.call(this,e):(i=this.model.get("params"),_.isUndefined(i[e.param_name])?a.length?a.val():null:i[e.param_name]),void 0!==a.data("js-function")&&void 0!==window[a.data("js-function")]&&(0,window[a.data("js-function")])(this.$el,this,e),t},parseFrame:function(e){return vc.atts.parse.call(this,e)},init:function(e,t){_.isUndefined(vc.atts[e.type])||_.isUndefined(vc.atts[e.type].init)||vc.atts[e.type].init.call(this,e,t)}},vc.atts.textarea_html={parse:function(e){var t=this.window(),i=this.content().find(".textarea_html."+e.param_name);try{t.tinyMCE&&_.isArray(t.tinyMCE.editors)&&_.each(t.tinyMCE.editors,(function(e){"wpb_tinymce_content"===e.id&&e.save()}))}catch(e){window.console&&window.console.warn&&window.console.warn("textarea_html atts parse error",e)}return i.val()},render:function(e,t){return _.isUndefined(t)?t:vc_wpautop(t)}},vc.atts.textarea_safe={parse:function(e){var t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val();return t.match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(t)):t},render:function(e,t){return t&&t.match(/^#E\-8_/)?$("<div/>").text(rawurldecode(base64_decode(t.replace(/^#E\-8_/,"")))).html():t}},vc.atts.checkbox={parse:function(e){const t=[];let i="";return $("input[name="+e.param_name+"]",this.content()).each((function(){const e=$('<span class="checkbox"></span>'),i=$(this);this.checked&&t.push(i.attr("value")),i.siblings("span.checkbox").length||e.insertAfter(i),i.parent().siblings(".vc_checkbox-label").length&&i.parent().addClass("show-label")})),0<t.length&&(i=t.join(",")),i},defaults:function(e){return""}},vc.atts.el_id={clone:function(e,t,i){var n;n=e.get("params"),_.isUndefined(i)||_.isUndefined(i.settings)||_.isUndefined(i.settings.auto_generate)||!0!==i.settings.auto_generate?n[i.param_name]="":n[i.param_name]="lqd-"+Date.now()+"-"+vc_guid(),e.set({params:n},{silent:!0})},create:function(e,t,i){if(e.get("cloned"))return vc.atts.el_id.clone(e,t,i);var n;!_.isEmpty(t)||_.isUndefined(i)||_.isUndefined(i.settings)||_.isUndefined(i.settings.auto_generate)||1!=i.settings.auto_generate||((n=e.get("params"))[i.param_name]="lqd-"+Date.now()+"-"+vc_guid(),e.set({params:n},{silent:!0}))}},vc.events.on("shortcodes:add:param:type:el_id",vc.atts.el_id.create),vc.atts.posttypes={parse:function(e){var t=[],i="";return $("input[name="+e.param_name+"]",this.content()).each((function(){var e=$(this);this.checked&&t.push(e.attr("value"))})),0<t.length&&(i=t.join(",")),i}},vc.atts.taxonomies={parse:function(e){var t=[],i="";return $("input[name="+e.param_name+"]",this.content()).each((function(){var e=$(this);this.checked&&t.push(e.attr("value"))})),0<t.length&&(i=t.join(",")),i}},vc.atts.exploded_textarea={parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val().replace(/\n/g,",")}},vc.atts.exploded_textarea_safe={parse:function(e){var t;return(t=(t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val()).replace(/\n/g,",")).match(/"|(http)/)?"#E-8_"+base64_encode(rawurlencode(t)):t},render:function(e,t){return t&&t.match(/^#E\-8_/)?$("<div/>").text(rawurldecode(base64_decode(t.replace(/^#E\-8_/,"")))).html():t}},vc.atts.textarea_raw_html={parse:function(e){var t;return t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").val(),base64_encode(rawurlencode(t))},render:function(e,t){return t?$("<div/>").text(rawurldecode(base64_decode(t.trim()))).html():""}},vc.atts.dropdown={render:function(e,t){return t},init:function(e,t){$(".wpb_vc_param_value.dropdown",t).on("change",(function(){var e,t,i,n;t=(e=$(this)).find(":selected"),i=e.data("option"),n=(n=t.length?t.attr("class").replace(/\s/g,"_"):"").replace("#","hash-"),
void 0!==i&&e.removeClass(i),void 0!==n&&(e.data("option",n),e.addClass(n))}))},defaults:function(e){var t;return _.isArray(e.value)||_.isString(e.value)?_.isArray(e.value)?(t=e.value[0],_.isArray(t)&&t.length?t[0]:t):"":(t=_.values(e.value)[0]).label?t.value:t}},vc.atts.attach_images={parse:function(e){var t,i;return t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]"),i="",t.parent().find("li.added").each((function(){i+='<li><img src="'+$(this).find("img").attr("src")+'" alt=""></li>'})),$("[data-model-id="+this.model.id+"]").data("field-"+e.param_name+"-attach-images",i),t.length?t.val():null},render:function(e,t){var i=this.$el.find(".attachment-thumbnails[data-name="+e.param_name+"]");return"external_link"===this.model.getParam("source")&&(t=this.model.getParam("custom_srcs")),_.isEmpty(t)?(this.$el.removeData("field-"+e.param_name+"-attach-images"),vc.atts.attach_images.updateImages(i,"")):$.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_gallery_html",content:t,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(e){var t=e.data;vc.atts.attach_images.updateImages(i,t)})),t},updateImages:function(e,t){e.html(t),t.length?e.removeClass("image-exists").siblings(".no_image_image").addClass("image-exists"):e.addClass("image-exists").siblings(".no_image_image").removeClass("image-exists")}},vc.atts.href={parse:function(e){var t,i;return i="",(t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]")).length&&"http://"!==t.val()&&(i=t.val()),i}},vc.atts.attach_image={parse:function(e){var t,i;return i="",(t=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]")).parent().find("li.added").length&&(i=t.parent().find("li.added img").attr("src")),$("[data-model-id="+this.model.id+"]").data("field-"+e.param_name+"-attach-image",i),t.length?t.val():null},render:function(e,t){var i=$("[data-model-id="+this.model.id+"]"),n=i.data("field-"+e.param_name+"-attach-image"),a=this.$el.find(".attachment-thumbnail[data-name="+e.param_name+"]");if("image"===e.param_name)if("external_link"===this.model.getParam("source"))vc.atts.attach_image.updateImage(a,this.model.getParam("custom_src"));else _.isEmpty(t)&&"featured_image"!==this.model.getParam("source")?_.isUndefined(n)||(i.removeData("field-"+e.param_name+"-attach-image"),vc.atts.attach_image.updateImage(a,n)):$.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:t,params:this.model.get("params"),post_id:vc_post_id,_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done((function(e){var t=e.length||"featured_image"===this.model.getParam("source");vc.atts.attach_image.updateImage(a,e,t)}));return t},updateImage:function(e,t,i){e.length&&(void 0===i&&(i=!1),i||!_.isEmpty(t)?(e.attr("src",t),_.isEmpty(t)?(e.hide(),e.siblings(".no_image_image").removeClass("image-exists").siblings(".no_image_image").addClass("image-exists")):(e.show(),e.siblings(".no_image_image").addClass("image-exists").siblings(".no_image_image").addClass("image-exists"))):e.attr("src","").hide().siblings(".no_image_image").removeClass("image-exists").siblings(".no_image_image").removeClass("image-exists"))}},vc.atts.google_fonts={parse:function(e){var t,i=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent(),n={};return n.font_family=i.find(".vc_google_fonts_form_field-font_family-select > option:selected").val(),n.font_style=i.find(".vc_google_fonts_form_field-font_style-select > option:selected").val(),t=_.map(n,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)})),$.grep(t,(function(e){return _.isString(e)&&0<e.length})).join("|")},init:function(e,t){var i=t;i.length&&("undefined"!=typeof WebFont?t.data("vc-param-object",new s({el:i})):i.find("> .edit_form_line").html(window.i18nLocale.gfonts_unable_to_load_google_fonts||"Unable to load Google Fonts"))}},vc.atts.font_container={parse:function(e){var t,i,n=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent();return(t={}).tag=n.find(".vc_font_container_form_field-tag-select > option:selected").val(),t.font_size=n.find(".vc_font_container_form_field-font_size-input").val(),t.text_align=n.find(".vc_font_container_form_field-text_align-select > option:selected").val(),t.font_family=n.find(".vc_font_container_form_field-font_family-select > option:selected").val(),t.color=n.find(".vc_font_container_form_field-color-input").val(),t.line_height=n.find(".vc_font_container_form_field-line_height-input").val(),t.font_style_italic=n.find(".vc_font_container_form_field-font_style-checkbox.italic").prop("checked")?"1":"",t.font_style_bold=n.find(".vc_font_container_form_field-font_style-checkbox.bold").prop("checked")?"1":"",i=_.map(t,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)})),$.grep(i,(function(e){return _.isString(e)&&0<e.length})).join("|")},init:function(e,t){vc.atts.colorpicker.init.call(this,e,t)}},vc.atts.param_group={parse:function(e){var t,i,n;return n=(i=this.content()).find('.wpb_el_type_param_group[data-vc-ui-element="panel-shortcode-param"][data-vc-shortcode-param-name="'+e.param_name+'"]').find("> .edit_form_line > .vc_param_group-list"),t=vc.atts.param_group.extractValues.call(this,e,$('>.wpb_vc_row:not(".vc_param_group-add_content-wrapper")',n)),this.$content=i,encodeURIComponent(JSON.stringify(t))},extractValues:function(e,t){var i,n;return i=[],n=this,t.each((function(){var t;t={},n.$content=$(this),_.each(e.params,(function(i){var a,o,s;o=(a=$.extend({},i)).param_name,a.param_name=e.param_name+"_"+o,((s=vc.atts.parse.call(n,a)).length||a.save_always)&&(t[o]=s)})),i.push(t)})),i},parseOne:function(t){var i,n;return i=this.content(),n=vc.atts.param_group.extractValues.call(this,t,i),this.$content=i,e(JSON.stringify(n))},init:function(e,t){t.data("vc-param-object",new l({el:t,settings:{param:e}}))}},vc.atts.colorpicker={init:function(e,t){$(".vc_color-control",t).each((function(){var e,t,i,n=$(this),a=n.val().replace(/\s+/g,""),o=100;a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)&&(o=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1])),n.wpColorPicker({clear:function(i,n){e.val(100),t.val("100%")},change:_.debounce((function(){$(this).trigger("change")}),500)}),i=n.closest(".wp-picker-container"),$('<div class="vc_alpha-container"><label>Alpha: <output class="rangevalue">'+o+'%</output></label><input type="range" min="1" max="100" value="'+o+'" name="alpha" class="vc_alpha-field"></div>').appendTo(i.addClass("vc_color-picker").find(".iris-picker")),e=i.find(".vc_alpha-field"),t=i.find(".vc_alpha-container output"),e.bind("change keyup",(function(){var i,a,o;i=parseFloat(e.val()),a=n.data("a8c-iris"),o=n.data("wp-wpColorPicker"),t.val(e.val()+"%"),a._color._alpha=i/100,n.val(a._color.toString()),o.toggler.css({backgroundColor:n.val()})})).val(o).trigger("change")}))}},vc.atts.autocomplete={init:function(e,t){t.length&&t.each((function(){var e,t,i,n,a;i=(t=$(".wpb_vc_param_value",this)).attr("name"),n=$(".vc_auto_complete_param",this),e=$.extend({$param_input:t,param_name:i,$el:n},t.data("settings")),a=new c(e),e.multiple&&a.enableMultiple(),e.sortable&&a.enableSortable(),t.data("vc-param-object",a)}))}},vc.atts.loop={init:function(e,t){t.data("vc-param-object",new n({el:t}))}},vc.atts.vc_link={init:function(e,t){$(".vc_link-build",t).on("click",(function(e){var t,i,n,a,o,s,c,r,l;function d(e,t){jQuery(t).addClass("vc-link-wrapper")}e&&e.preventDefault&&e.preventDefault(),t=$(this).closest(".vc_link"),i=t.find(".wpb_vc_param_value"),n=t.find(".url-label"),a=t.find(".title-label"),o=i.data("json"),s=$("#wp-link-submit"),c=$('<input type="submit" name="vc_link-submit" id="vc_link-submit" class="button-primary" value="Set Link">'),s.hide(),$("#vc_link-submit").remove(),c.insertBefore(s),r=$('<div class="link-target vc-link-nofollow"><label><span></span> <input type="checkbox" id="vc-link-nofollow"> Add nofollow option to link</label></div>'),$("#link-options .vc-link-nofollow").remove(),r.insertAfter($("#link-options .link-target")),setTimeout((function(){var e=$("#most-recent-results").css("top");$("#most-recent-results").css("top",parseInt(e,10)+r.height())}),200),l=!window.wpLink&&$.fn.wpdialog&&$("#wp-link").length?{$link:!1,open:function(){this.$link=$("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5}),this.$link.addClass("vc-link-wrapper")},close:function(){this.$link&&(this.$link.wpdialog("close"),this.$link.removeClass("vc-link-wrapper"))}}:window.wpLink;var v=function(e,t){jQuery(t).removeClass("vc-link-wrapper"),jQuery(document).off("wplink-open",d),jQuery(document).off("wplink-close",v)};jQuery(document).off("wplink-open",d).on("wplink-open",d),jQuery(document).off("wplink-close",v).on("wplink-close",v),"admin_frontend_editor"===vc_mode?l.open("vc-hidden-editor"):l.open("content"),_.isString(o.url)&&($("#wp-link-url").length?$("#wp-link-url").val(o.url):$("#url-field").val(o.url)),_.isString(o.title)&&($("#wp-link-text").length?$("#wp-link-text").val(o.title):$("#link-title-field").val(o.title)),$("#wp-link-target").length?$("#wp-link-target").prop("checked",!_.isEmpty(o.target)):$("#link-target-checkbox").prop("checked",!_.isEmpty(o.target)),$("#vc-link-nofollow").length&&$("#vc-link-nofollow").prop("checked",!_.isEmpty(o.rel)),c.unbind("click.vcLink").bind("click.vcLink",(function(e){var t,o;e&&e.preventDefault&&e.preventDefault(),e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),(t={}).url=$("#wp-link-url").length?$("#wp-link-url").val():$("#url-field").val(),t.title=$("#wp-link-text").length?$("#wp-link-text").val():$("#link-title-field").val();var r=$("#wp-link-target").length?$("#wp-link-target"):$("#link-target-checkbox");return t.target=r[0].checked?" _blank":"",t.rel=$("#vc-link-nofollow")[0].checked?"nofollow":"",o=_.map(t,(function(e,t){if(_.isString(e)&&0<e.length)return t+":"+encodeURIComponent(e)})).join("|"),i.val(o),i.data("json",t),n.html(t.url+t.target),a.html(t.title),l.close(),s.show(),c.unbind("click.vcLink"),c.remove(),$("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea="",r.attr("checked",!1),$("#most-recent-results").css("top",""),$("#vc-link-nofollow").attr("checked",!1),!1})),$("#wp-link-cancel").unbind("click.vcLink").bind("click.vcLink",(function(e){e&&e.preventDefault&&e.preventDefault(),l.close(),c.unbind("click.vcLink"),c.remove(),$("#wp-link-cancel").unbind("click.vcLink"),window.wpLink.textarea=""}))}))}},vc.atts.sorted_list={init:function(e,t){$(".vc_sorted-list",t).VcSortedList()}},vc.atts.options={init:function(e,t){t.data("vc-param-object",new a({el:t}))}},vc.atts.iconpicker={change:function(e,t){var i=t.find(".vc-iconpicker");i.val(this.value),i.data("vc-no-check",!0),i.find('[value="'+this.value+'"]').attr("selected","selected"),i.data("vcFontIconPicker").loadIcons()},parse:function(e){return this.content().find(".wpb_vc_param_value[name="+e.param_name+"]").parent().find(".vc-iconpicker").val()},init:function(e,t){var i=t.find(".wpb_vc_param_value"),n=$.extend({iconsPerPage:100,iconDownClass:"fip-fa fa fa-arrow-down",iconUpClass:"fip-fa fa fa-arrow-up",iconLeftClass:"fip-fa fa fa-arrow-left",iconRightClass:"fip-fa fa fa-arrow-right",iconSearchClass:"fip-fa fa fa-search",iconCancelClass:"fip-fa fa fa-remove",iconBlockClass:"fip-fa"},i.data("settings"));t.find(".vc-iconpicker").vcFontIconPicker(n).on("change",(function(e){var t=$(this);t.data("vc-no-check")||i.data("vc-no-check",!0).val(this.value).trigger("change"),t.data("vc-no-check",!1)})),i.on("change",(function(n){i.data("vc-no-check")||vc.atts.iconpicker.change.call(this,e,t),i.data("vc-no-check",!1)}))}},vc.atts.animation_style={init:function(e,t){var i=t,n=$(".wpb_vc_param_value[name="+e.param_name+"]",i);function a(e,t){$(e).removeClass().addClass(t+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",(function(){$(this).removeClass().addClass("vc_param-animation-style-preview")}))}$('option[value="'+n.val()+'"]',i).attr("selected",!0),$(".vc_param-animation-style-trigger",i).on("click",(function(e){e.preventDefault();var t=$(".vc_param-animation-style",i).val();"none"!==t&&a(this.parentNode,"vc_param-animation-style-preview "+t)})),$(".vc_param-animation-style",i).on("change",(function(){var e=$(this).val();n.val(e),"none"!==e&&a($(".vc_param-animation-style-preview",i),"vc_param-animation-style-preview "+e)}))}},vc.atts.gutenberg={content:null,gutenbergParamObj:null,$frame:null,closeEditor:function(e){e&&e.preventDefault&&e.preventDefault();var t=this;_.delay((function(){t.content.find(".vc_gutenberg-modal-wrapper").html(""),t.$frame=null,t.gutenbergParamObj=null}),100)},updateEditor:function(e){e&&e.preventDefault&&e.preventDefault(),this.gutenbergParamObj&&this.gutenbergParamObj.updateValueFromIframe(),this.closeEditor()},init:function(e,t){var i=vc.atts.gutenberg;i.content=t;var n=$(".wpb_vc_param_value[name="+e.param_name+"]",i.content);$('[data-vc-action="open"]',i.content).on("click",(function(e){e.preventDefault();var t,a=n.val();t=window.wpbGutenbergEditorUrl?window.wpbGutenbergEditorUrl:"/wp-admin/post-new.php?post_type=wpb_gutenberg_param",i.gutenbergParamObj=new v({onSetValue:function(e){n.val(e)},onError:i.closeEditor,value:a}),vc.createOverlaySpinner(),i.content.find(".vc_gutenberg-modal-wrapper").html('<div class="wpb-gutenberg-modal"><div class="wpb-gutenberg-modal-inner"><iframe style="width: 100%;" data-vc-gutenberg-param-iframe></iframe></div></div>'),i.$frame=i.content.find("iframe[data-vc-gutenberg-param-iframe]"),i.$frame.attr("src",t),i.$frame.on("load",(function(){vc.removeOverlaySpinner(),i.gutenbergParamObj&&(i.gutenbergParamObj.iframe=i.$frame.get(0),i.gutenbergParamObj.iframeLoaded())}))}))}},vc.atts.subheading={init:function(e,t){const i=t.nextUntil(".wpb_el_type_subheading");i.length&&(i.hide(),t.addClass("is-collapse"),t.on("click",(()=>{i.toggle(20),t.toggleClass("is-collapse")})))}};var v=function(e){return this.iframe=null,this.options=e||{},this.value=this.options&&this.options.value?this.options.value:"",this.iframeLoaded=function(){var e,t,i,n,a,o;(i=!!this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data)||(t=(e=!!window.i18nLocale&&window.i18nLocale)&&e.gutenbergDoesntWorkProperly?e.gutenbergDoesntWorkProperly:"Gutenberg plugin doesn't work properly. Please check Gutenberg plugin.",window.alert(t),this.options&&this.options.onError&&this.options.onError()),o={id:parseInt(this.iframe.contentWindow.document.getElementById("post_ID").value),guid:{raw:"/?",rendered:"/?"},title:{raw:""},content:{raw:this.value,rendered:this.value},type:"wpb_gutenberg_param",slug:"",status:"auto-draft",link:"/?",format:"standard",categories:[]},a=i.dispatch("core/editor"),n=i.select("core/edit-post");var s=this.iframe.contentWindow.document.querySelector(".editor-post-title"),c=this.iframe.contentWindow.document.querySelector(".components-notice-list");s&&s.classList.add("hidden"),c&&c.classList.add("hidden"),n.isPublishSidebarOpened=function(){return!0},"function"==typeof a.autosave&&(a.autosave=function(){}),a.setupEditor(o),function(e){var t=$(e).contents(),i=t.find(".edit-post-header-toolbar"),n='<div class="wpb-gutenberg-controls-container"><style>.wpb-gutenberg-controls-container {display: flex;justify-content: center;align-items: center;}.vc_gutenberg-modal-update-button {padding-top: 8px;padding-bottom: 8px;min-height: 10px;padding: 5px 10px;font-size: 12px;line-height: 1.5;border-radius: 3px;color: #fff;background-color: #00aef0;border-color: transparent;cursor: pointer;display: inline-block;text-decoration: none !important;}.vc_gutenberg-modal-update-button:hover {background-color: #0089bd;}.wpb-gutenberg-modal-close-button {display: inline-flex;justify-content: center;align-items: center;margin: 0 0 0 10px;background: transparent;border: 0;box-shadow: none;padding: 5px;cursor: pointer;outline: none;}.wpb-gutenberg-modal-close-button:hover .vc-c-icon-close {opacity: 1;}.vc-c-icon-close {position: relative;display: inline-flex;width: 13px;height: 13px;justify-content: center;align-items: center;transform: rotate(45deg);opacity: .65;transition: opacity .2s ease-in-out;}.vc-c-icon-close::before,.vc-c-icon-close::after {content: "";position: absolute;background: #353535;}.vc-c-icon-close::before {width: 1px;height: 100%;}.vc-c-icon-close::after {width: 100%;height: 1px;}</style><button class="vc_gutenberg-modal-update-button">'+(window.i18nLocale.gutenbergEditorUpdateButton?window.i18nLocale.gutenbergEditorUpdateButton:"Update")+'</button><button class="wpb-gutenberg-modal-close-button"><i class="la la-times"></i></button></div>';$(n).insertAfter(i);var a=vc.atts.gutenberg;t.find(".wpb-gutenberg-modal-close-button").on("click",a.closeEditor.bind(a)),t.find(".vc_gutenberg-modal-update-button").on("click",a.updateEditor.bind(a))}(this.iframe)},this.updateValueFromIframe=function(){var e,t;this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.wp&&this.iframe.contentWindow.wp.data&&(e=this.iframe.contentWindow.wp.data)&&(t=e.select("core/editor").getEditedPostContent(),this.setValue(t))},this.setValue=function(e){this.value=e,this.options.onSetValue&&this.options.onSetValue(e)},this};vc.atts.vc_grid_id={parse:function(){return"vc_gid:"+Date.now()+"-"+this.model.get("id")+"-"+Math.floor(11*Math.random())}},vc.atts.addShortcodeIdParam=function(e){var t,i,n=!1;t=e.get("params"),i=vc.map[e.get("shortcode")],_.isArray(i.params)&&_.each(i.params,(function(i){i&&!_.isUndefined(i.type)&&("tab_id"===i.type&&_.isEmpty(t[i.param_name])?(n=!0,t[i.param_name]=vc_guid()+"-"+Math.floor(11*Math.random())):"vc_grid_id"===i.type&&(n=!0,t[i.param_name]=vc.atts.vc_grid_id.parse.call({model:e})))})),n&&e.save("params",t,{silent:!0})},vc.getMapped=vc.memoizeWrapper((function(e){return vc.map[e]||{}}))}(window.jQuery),function($){"use strict";void 0===window.vc&&(window.vc={}),window.vc.ShortcodesBuilder=function(e){return this.models=e||[],this.is_build_complete=!0,this},window.vc.ShortcodesBuilder.prototype={_ajax:!1,message:!1,isBuildComplete:function(){return this.is_build_complete},create:function(e){return this.is_build_complete=!1,this.models.push(window.vc.shortcodes.create(e)),this},render:function(e){var t;t=_.map(this.models,(function(e){var t=this.toString(e);return{id:e.get("id"),string:t,tag:e.get("shortcode")}}),this),window.vc.setDataChanged(),this.build(t,e)},build:function(e,t){this.ajax({action:"vc_load_shortcode",shortcodes:e,_vcnonce:window.vcAdminNonce},window.vc.frame_window.location.href).done((function(e){_.each($(e),(function(e){this._renderBlockCallback(e)}),this),_.isFunction(t)&&t(e),window.vc.frame.setSortable(),window.vc.activity=!1,this.checkNoContent(),window.vc.frame_window.vc_iframe.loadScripts(),this.last()&&vc.frame.scrollTo(this.first()),this.models=[],this.showResultMessage(),this.is_build_complete=!0}))},lastID:function(){return this.models.length?_.last(this.models).get("id"):""},last:function(){return!!this.models.length&&_.last(this.models)},firstID:function(){return this.models.length?_.first(this.models).get("id"):""},first:function(){return!!this.models.length&&_.first(this.models)},buildFromContent:function(){var e;e=decodeURIComponent(window.vc.frame_window.jQuery("#vc_template-post-content").html()+"").replace(/<style([^>]*)>\/\*\* vc_js-placeholder \*\*\//g,"<script$1>").replace(/<\/style([^>]*)><!-- vc_js-placeholder -->/g,"</script$1>");try{window.vc.$page.html(e).prepend($('<div class="vc_empty-placeholder"></div>'))}catch(e){window.console&&window.console.warn&&window.console.warn("BuildFromContent error",e)}_.each(window.vc.post_shortcodes,(function(e){var t,i,n;t=JSON.parse(decodeURIComponent(e+"")),(i=window.vc.$page.find("[data-model-id="+t.id+"]")).parents("[data-model-id]"),n=_.isObject(t.attrs)?t.attrs:{};var a=window.vc.shortcodes.create({id:t.id,shortcode:t.tag,params:this.unescapeParams(n),parent_id:t.parent_id,from_content:!0},{silent:!0});i.attr("data-model-id",a.get("id")),this._renderBlockCallback(i.get(0))}),this),window.vc.frame.setSortable(),this.checkNoContent(),window.vc.frame.render();try{window.vc.frame_window.vc_iframe.reload()}catch(e){window.console&&window.console.warn&&window.console.warn("BuildFromContent render error",e)}},buildFromTemplate:function(e,t){var i;return i=!1,_.each($(e),(function(e){var t=$(e);t.is("[data-type=files]")?this._renderBlockCallback(e):window.vc.app.placeElement(t)}),this),_.each(t,(function(e){var t,n,a,o,s;t=JSON.parse(decodeURIComponent(e+"")),n=window.vc.$page.find("[data-model-id="+t.id+"]"),a=_.isObject(t.attrs)?t.attrs:{},i||(s=window.vc.shortcodeHasIdParam(t.tag))&&!_.isUndefined(a)&&!_.isUndefined(a[s.param_name])&&0<a[s.param_name].length&&(i=!0),o=window.vc.shortcodes.create({id:t.id,shortcode:t.tag,params:this.unescapeParams(a),parent_id:t.parent_id,from_template:!0}),n.attr("data-model-id",o.get("id")),this._renderBlockCallback(n.get(0))}),this),window.vc.frame.setSortable(),window.vc.activity=!1,this.checkNoContent(),window.vc.frame_window.vc_iframe.loadScripts(),this.last()&&window.vc.frame.scrollTo(this.first()),this.models=[],this.showResultMessage(),window.vc.frame.render(),this.is_build_complete=!0,i},_renderBlockCallback:function(e){var t,i,n=$(e);"files"===n.data("type")?(window.vc.frame_window.vc_iframe.addScripts(n.find("script,link")),window.vc.frame_window.vc_iframe.addStyles(n.find("style"))):(i=window.vc.shortcodes.get(n.data("modelId")),t=n.is("[data-type=element]")?$(n.html()):n,i&&i.get("shortcode")&&this.renderShortcode(t,i)),window.vc.setFrameSize()},renderShortcode:function(e,t){var i,n,a;i=this.getView(t),n=e,window.vc.last_inner=n.html(),$("script",n).each((function(){if($(this).attr("src")){var e=window.vc.frame.addInlineScript($(this));$('<span class="js_placeholder_'+e+'"></span>').insertAfter($(this)),a=!0}else{var t=window.vc.frame.addInlineScriptBody($(this));$('<span class="js_placeholder_inline_'+t+'"></span>').insertAfter($(this)),a=!0}$(this).remove()})),a&&e.html(n.html()),t.get("from_content")||t.get("from_template")||this.placeContainer(e,t),t.view=new i({model:t,el:e}).render(),this.notifyParent(t.get("parent_id")),t.view.rendered()},getView:function(e){var t=e.setting("is_container")||e.setting("as_parent")?InlineShortcodeViewContainer:InlineShortcodeView;return _.isObject(window["InlineShortcodeView_"+e.get("shortcode")])&&(t=window["InlineShortcodeView_"+e.get("shortcode")]),t},update:function(e){var t,i;t=e.get("shortcode"),i=this.toString(e),window.vc.setDataChanged(),this.ajax({action:"vc_load_shortcode",shortcodes:[{id:e.get("id"),string:i,tag:t}],_vcnonce:window.vcAdminNonce},window.vc.frame_window.location.href).done((function(t){var i;i=e.view,_.each($(t),(function(e){this._renderBlockCallback(e)}),this),e.view&&(e.view.$el.insertAfter(i.$el),window.vc.shortcodes.where({parent_id:e.get("id")}).length&&i.content().find("> *").appendTo(e.view.content()),i.remove(),window.vc.frame_window.vc_iframe.loadScripts(),e.view.changed(),window.vc.frame.setSortable(),e.view.updated())}))},ajax:function(e,t){return this._ajax=$.ajax({url:t||window.vc.admin_ajax,type:"POST",dataType:"html",data:_.extend({post_id:vc_post_id,vc_inline:!0,_vcnonce:window.vcAdminNonce},e),context:this}),this._ajax},notifyParent:function(e){var t=window.vc.shortcodes.get(e);t&&t.view&&t.view.changed()},remove:function(){},_getContainer:function(e){var t,i,n;if(!1!==(n=e.get("parent_id"))){if(i=window.vc.shortcodes.get(n),_.isUndefined(i))return window.vc.app;t=i.view}else t=window.vc.app;return t},placeContainer:function(e,t){var i=this._getContainer(t);return i&&i.placeElement(e,window.vc.activity),i},toString:function(e,t){var i,n,a,o,s;return i={},s=e.get("shortcode"),n=_.extend({},e.get("params")),o=window.vc.getMergedParams(s,n),a=_.isString(n.content)?n.content:"",_.each(o,(function(e,t){i[t]=this.escapeParam(e)}),this),wp.shortcode.string({tag:s,attrs:i,content:a,type:_.isString(t)?t:""})},getContent:function(){var e;return e=_.sortBy(window.vc.shortcodes.where({parent_id:!1}),(function(e){return e.get("order")})),window.vc.shortcodes.modelsToString(e)},getTitle:function(){return window.vc.title},checkNoContent:function(){window.vc.frame.noContent(!vc.shortcodes.length)},save:function(e){var t,i;t=this.getContent(),(i={action:"vc_save"}).vc_post_custom_css=window.vc.$custom_css.val(),i.content=this.wpautop(t),e&&(i.post_status=e,$(".vc_button_save_draft").hide(100),$("#vc_button-update").text(window.i18nLocale.update_all)),window.vc.update_title&&(i.post_title=this.getTitle()),this.ajax(i).done((function(){window.vc.unsetDataChanged(),window.vc.showMessage(window.i18nLocale.vc_successfully_updated||"Successfully updated!")}))},parse:function(e,t,i){var n,a,o;return n=_.keys(window.vc.map).join("|"),a=window.wp.shortcode.regexp(n),o=t.trim().match(a),_.isNull(o)||_.each(o,(function(t){var a,o,s,c,r,l,d,v;o=(a=t.match(this.regexp(n)))[5],s=new RegExp("^[\\s]*\\[\\[?("+_.keys(window.vc.map).join("|")+")(?![\\w-])"),c=window.wp.shortcode.attrs(a[3]),r={},d=vc_guid(),_.each(c.named,(function(e,t){r[t]=this.unescapeParam(e)}),this),l={id:d,shortcode:a[2],params:_.extend({},r),parent_id:!!_.isObject(i)&&i.id},v=window.vc.getMapped(l.shortcode),_.isArray(e)?(e.push(l),d=e.length-1):e[d]=l,d==l.root_id&&(e[d].html=t),_.isString(o)&&o.match(s)&&(v.is_container&&_.isBoolean(v.is_container)&&!0===v.is_container||!_.isEmpty(v.as_parent)&&!1!==v.as_parent)?e=this.parse(e,o,e[d]):_.isString(o)&&o.length&&"vc_row"===a[2]?e=this.parse(e,'[vc_column width="1/1"][vc_column_text]'+o+"[/vc_column_text][/vc_column]",e[d]):_.isString(o)&&o.length&&"vc_column"===a[2]?e=this.parse(e,"[vc_column_text]"+o+"[/vc_column_text]",e[d]):_.isString(o)&&(e[d].params.content=o)}),this),e},regexp:_.memoize((function(e){return new RegExp("\\[(\\[?)("+e+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})),wpautop:function(e){return vc_wpautop(e)},escapeParam:function(e){return _.isUndefined(e)||_.isNull(e)||!e.toString?"":e.toString().replace(/"/g,"``").replace(/\[/g,"`{`").replace(/\]/g,"`}`")},unescapeParam:function(e){return e=e.replace(/(\`{\`)/g,"[").replace(/(\`}\`)/g,"]").replace(/(\`{2})/g,'"'),vc_wpnop(e)},unescapeParams:function(e){return _.object(_.map(e,(function(e,t){return[t,this.unescapeParam(e)]}),this))},setResultMessage:function(e){this.message=e},showResultMessage:function(){!1!==this.message&&window.vc.showMessage(this.message),this.message=!1}},window.vc.builder=new window.vc.ShortcodesBuilder}(window.jQuery),function(){"use strict";_.isUndefined(window.vc)&&(window.vc={});var e=Backbone.Model.extend({defaults:function(){return{id:vc_guid(),shortcode:"vc_text_block",order:vc.shortcodes.nextOrder(),params:{},parent_id:!1}},settings:!1,getParam:function(e){return _.isObject(this.get("params"))&&!_.isUndefined(this.get("params")[e])?this.get("params")[e]:""},sync:function(){return!1},setting:function(e){return!1===this.settings&&(this.settings=vc.getMapped(this.get("shortcode"))||{}),this.settings[e]},view:!1}),t=Backbone.Collection.extend({model:e,sync:function(){return!1},nextOrder:function(){return this.length?this.last().get("order")+1:1},initialize:function(){this.bind("remove",this.removeChildren,this),this.bind("remove",vc.builder.checkNoContent),this.bind("remove",this.removeEvents,this)},comparator:function(e){return e.get("order")},removeEvents:function(e){window.vc.events.triggerShortcodeEvents("destroy",e)},removeChildren:function(e){var t=vc.shortcodes.where({parent_id:e.id});_.each(t,(function(e){e.destroy()}),this)},stringify:function(e){var t=_.sortBy(vc.shortcodes.where({parent_id:!1}),(function(e){return e.get("order")}));return this.modelsToString(t,e)},singleStringify:function(e,t){return this.modelsToString([vc.shortcodes.get(e)],t)},createShortcodeString:function(e,t){var i,n,a,o,s,c,r,l;return a=e.get("shortcode"),o=_.extend({},e.get("params")),c={},r=vc.getMergedParams(a,o),_.each(r,(function(e,t){c[t]=vc.builder.escapeParam(e)}),this),i=vc.getMapped(a),l=_.isObject(i)&&(_.isBoolean(i.is_container)&&!0===i.is_container||!_.isEmpty(i.as_parent)),s=this._getShortcodeContent(e,t),n={tag:a,attrs:c,content:s,type:_.isUndefined(vc.getParamSettings(a,"content"))&&!l?"single":""},_.isUndefined(t)?e.trigger("stringify",e,n):e.trigger("stringify:"+t,e,n),wp.shortcode.string(n)},modelsToString:function(e,t){return _.reduce(e,(function(e,i){return e+this.createShortcodeString(i,t)}),"",this)},_getShortcodeContent:function(e,t){var i,n;return(i=_.sortBy(window.vc.shortcodes.where({parent_id:e.get("id")}),(function(e){return e.get("order")}))).length?_.reduce(i,(function(e,i){return e+this.createShortcodeString(i,t)}),"",this):(n=_.extend({},e.get("params")),_.isUndefined(n.content)?"":n.content)},create:function(e,i){return(e=t.__super__.create.call(this,e,i)).get("cloned")&&window.vc.events.triggerShortcodeEvents("clone",e),window.vc.events.triggerShortcodeEvents("add",e),e}});window.vc.shortcodes=new t}(window.jQuery),function($){"use strict";_.isUndefined(window.vc)&&(window.vc={}),vc.showSpinner=function(){$("#vc_logo").addClass("vc_ui-wp-spinner")},vc.hideSpinner=function(){$("#vc_logo").removeClass("vc_ui-wp-spinner")},$(document).ajaxSend((function(e,t,i){i&&i.data&&"string"==typeof i.data&&i.data.match(/vc_inline=true/)&&vc.showSpinner()})).ajaxStop((function(){vc.hideSpinner()})),vc.active_panel=!1,vc.sidebar_active=!1,vc.closeActivePanel=function(e){if(!this.active_panel)return!1;(e&&vc.active_panel.model&&vc.active_panel.model.get("id")===e.get("id")||!e)&&(vc.active_panel.model=null,this.active_panel.hide())},vc.activePanelName=function(){return this.active_panel&&this.active_panel.panelName?this.active_panel.panelName:null},vc.updateSettingsBadge=function(){var e=vc.$custom_css.val();e&&""!==e.trim()?$("#vc_post-css-badge").show():$("#vc_post-css-badge").hide()},vc.ModalView=Backbone.View.extend({message_box_timeout:!1,events:{"hidden.bs.modal":"hide","shown.bs.modal":"shown"},initialize:function(){_.bindAll(this,"setSize","hide")},setSize:function(){var e=$(window).height()-150;this.$content.css("maxHeight",e),this.trigger("setSize")},render:function(){return $(window).bind("resize.ModalView",this.setSize),this.setSize(),vc.closeActivePanel(),this.$el.modal("show"),this},showMessage:function(e,t){this.message_box_timeout&&this.$el.find(".vc_message").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var i=$('<div class="vc_message type-'+t+'"></div>');this.$el.find(".vc_modal-body").prepend(i),i.text(e).fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},hide:function(){$(window).unbind("resize.ModalView")},shown:function(){}}),vc.element_start_index=0,vc.PanelView=vc.View.extend({mediaSizeClassPrefix:"vc_media-",customMediaQuery:!0,panelName:"panel",draggable:!1,$body:!1,$tabs:!1,$content:!1,events:{"click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_panel-tabs-link":"changeTab"},_vcUIEventsHooks:[{resize:"setResize"}],options:{startTab:0},clicked:!1,showMessageDisabled:!0,saveUpdateSelector:".vc_navbar-frontend .vc_navbar-saveupdate button",initialize:function(){this.clicked=!1,this.$el.removeClass("vc_panel-opacity"),this.$body=$("body"),this.$content=this.$el.find(".vc_panel-body"),_.bindAll(this,"setSize","fixElContainment","changeTab","setTabsSize","cloneNavButtons"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),_.defer((()=>{this.cloneNavButtons(),$(document).on("lqd-sidebar-active",(()=>{vc.sidebar_active||this.customMediaQuery&&this.setMediaSizeClass()}))}))},toggleOpacity:function(){this.clicked=!this.clicked},addOpacity:function(){
this.clicked||this.$el.addClass("vc_panel-opacity")},removeOpacity:function(){this.clicked||this.$el.removeClass("vc_panel-opacity")},message_box_timeout:!1,init:function(){},render:function(){return this.trigger("render"),this.trigger("afterRender"),this},show:function(){if(!this.$el.hasClass("vc_active")){vc.closeActivePanel(),this.init(),(vc.active_panel=this).clicked=!1,this.$el.removeClass("vc_panel-opacity");var e=this.$el.find(".vc_panel-tabs");e.length&&(this.$tabs=e,this.setTabs()),this.$el.addClass("vc_active"),this.draggable?this.initDraggable():$(window).trigger("resize"),this.fixElContainment(),this.trigger("show")}},hide:function(e){e&&e.preventDefault&&e.preventDefault(),this.model&&(this.model=null),this.$el.removeClass("vc_active"),vc.active_panel=!1,this.trigger("hide"),vc.sidebar_active&&"panel"!==vc.activePanelName()&&vc.add_element_block_view.render(!1)},content:function(){return this.$el.find(".panel-body")},setResize:function(){this.customMediaQuery&&this.setMediaSizeClass()},setMediaSizeClass:function(){var e,t;t={xs:!0,sm:!1,md:!1,lg:!1},740<=(e=this.$el.width())&&(t.sm=!0),810<=e&&(t.md=!0),945<=e&&(t.lg=!0),_.each(t,(function(e,t){e?this.$el.addClass(this.mediaSizeClassPrefix+t):this.$el.removeClass(this.mediaSizeClassPrefix+t)}),this)},fixElContainment:function(){this.$body||(this.$body=$("body"));var e=[20-this.$el.width(),0,this.$body.width()-20,this.$body.height()-30],t=this.$el.position(),i={};t.left<e[0]&&(i.left=e[0]),t.top<0&&(i.top=0),t.left>e[2]&&(i.left=e[2]),t.top>e[3]&&(i.top=e[3]),this.$el.css(i),this.trigger("fixElContainment"),this.setSize()},initDraggable:function(){this.$el.draggable({iframeFix:!0,handle:".vc_panel-heading",start:this.fixElContainment,stop:this.fixElContainment}),this.draggable=!0},setSize:function(){this.trigger("setSize")},setTabs:function(){this.$tabs.length&&(this.$tabs.find(".vc_panel-tabs-control").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),this.$tabs.find(".vc_panel-tab").removeClass("vc_active").eq(this.options.startTab).addClass("vc_active"),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabs&&this.$tabs.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabs.find(".vc_panel-tabs-menu").outerHeight())},changeTab:function(e){if(e&&e.preventDefault&&e.preventDefault(),e.target&&this.$tabs){var t=$(e.target);this.$tabs.find(".vc_active").removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find(t.data("target")).addClass("vc_active"),window.setTimeout(this.setTabsSize,100)}},showMessage:function(e,t){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find(".vc_panel-message").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i=$('<div class="vc_panel-message type-'+t+'"></div>').appendTo(this.$el.find(".vc_ui-panel-content-container"));i.text(e).fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},isVisible:function(){return this.$el.is(":visible")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},cloneNavButtons:function(){$(this.saveUpdateSelector).length&&$(this.saveUpdateSelector).clone(!0).appendTo(this.$el.find(".vc_ui-panel-footer"))}}),vc.PostSettingsPanelView=vc.PanelView.extend({events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity"},saved_css_data:"",saved_title:"",$title:!1,editor:!1,post_settings_editor:!1,initialize:function(){vc.$custom_css=$("#vc_post-custom-css"),this.saved_css_data=vc.$custom_css.val(),this.saved_title=vc.title,this.initEditor(),this.$body=$("body"),_.bindAll(this,"setSize","fixElContainment"),this.on("show",this.setSize,this),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),_.defer((()=>{this.cloneNavButtons()}))},initEditor:function(){this.editor=new Vc_postSettingsEditor},render:function(){return this.trigger("render"),this.$title=this.$el.find("#vc_page-title-field"),this.$title.val(vc.title),this.setEditor(),this.trigger("afterRender"),this},setEditor:function(){this.editor.setEditor(vc.$custom_css.val())},setSize:function(){this.editor.setSize(),this.trigger("setSize")},save:function(){if(this.$title){var e=this.$title.val();e!==vc.title&&vc.frame.setTitle(e)}this.setAlertOnDataChange(),vc.$custom_css.val(this.editor.getValue()),vc.frame_window&&vc.frame_window.vc_iframe.loadCustomCss(vc.$custom_css.val()),vc.updateSettingsBadge(),this.showMessage(window.i18nLocale.css_updated,"success"),this.trigger("save")},setAlertOnDataChange:function(){(this.saved_css_data!==this.editor.getValue()||this.$title&&this.saved_title!==this.$title.val())&&vc.setDataChanged()}}),vc.PostSettingsPanelViewBackendEditor=vc.PostSettingsPanelView.extend({render:function(){return this.trigger("render"),this.setEditor(),this.trigger("afterRender"),this},setAlertOnDataChange:function(){vc.saved_custom_css!==this.editor.getValue()&&window.tinymce&&(window.switchEditors.go("content","tmce"),window.setTimeout((function(){window.tinymce.get("content").isNotDirty=!1}),1e3))},save:function(){vc.PostSettingsPanelViewBackendEditor.__super__.save.call(this),this.hide()}}),vc.TemplatesEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .wpb_remove_template":"removeTemplate","click [data-template_id]":"loadTemplate","click [data-template_name]":"loadDefaultTemplate","click #vc_template-save":"saveTemplate"},render:function(){this.trigger("render"),this.$name=$("#vc_template-name"),this.$list=$("#vc_template-list");var e=$("#vc_tabs-templates");return e.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),e.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),e.find(".vc_edit-form-link").on("click",(function(t){t.preventDefault();var i=$(this);e.find(".vc_active").removeClass("vc_active"),i.parent().addClass("vc_active"),$(i.attr("href")).addClass("vc_active")})),this.trigger("afterRender"),this},removeTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget),i=t.closest('[data-vc-ui-element="template-title"]').text();confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",i))&&(t.closest('[data-vc-ui-element="template"]').remove(),this.$list.html(window.i18nLocale.loading),$.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_delete_template",template_id:t.attr("rel"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(e){this.$list.html(e)})))},loadTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget);$.ajax({type:"POST",url:vc.frame_window.location.href,data:{action:"vc_frontend_template",template_id:t.data("template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(e){var t,i;_.each($(e),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadTemplate json error",e)}"vc_template-html"===e.id&&(t=e.innerHTML)})),t&&i&&vc.builder.buildFromTemplate(t,i),this.showMessage(window.i18nLocale.template_added,"success"),"template_window"===vc.activePanelName()&&vc.closeActivePanel()}))},ajaxData:function(e){return{action:"vc_frontend_default_template",template_name:e.data("template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadDefaultTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget);$.ajax({type:"POST",url:vc.frame_window.location.href,data:this.ajaxData(t),context:this}).done((function(e){var t,i;_.each($(e),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("loadDefaultTemplate json error",e)}"vc_template-html"===e.id&&(t=e.innerHTML)})),t&&i&&vc.builder.buildFromTemplate(t,i),this.showMessage(window.i18nLocale.template_added,"success")}))},saveTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t,i,n=this.$name.val();if(_.isString(n)&&n.length){if(!(i=this.getPostContent()).trim().length)return this.showMessage(window.i18nLocale.template_is_empty,"error"),!1;t={action:"wpb_save_template",template:i,template_name:n,frontend:!0,vc_inline:!0,_vcnonce:window.vcAdminNonce},this.$name.val(""),this.showMessage(window.i18nLocale.template_save,"success"),this.reloadTemplateList(t)}else this.showMessage(window.i18nLocale.please_enter_templates_name,"error")},reloadTemplateList:function(e){this.$list.html(window.i18nLocale.loading).load(window.ajaxurl,e)},getPostContent:function(){return vc.builder.getContent()}}),vc.TemplatesEditorPanelViewBackendEditor=vc.TemplatesEditorPanelView.extend({ajaxData:function(e){return{action:"vc_backend_template",template_id:e.attr("data-template_id"),vc_inline:!0,_vcnonce:window.vcAdminNonce}},loadTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget);$.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(t),context:this}).done((function(e){_.each(vc.filters.templates,(function(t){e=t(e)})),vc.storage.append(e),vc.shortcodes.fetch({reset:!0}),vc.closeActivePanel()}))},loadDefaultTemplate:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget);$.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_backend_default_template",template_name:t.attr("data-template_name"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(e){_.each(vc.filters.templates,(function(t){e=t(e)})),vc.storage.append(e),vc.shortcodes.fetch({reset:!0})}))},getPostContent:function(){return vc.storage.getContent()}}),vc.TemplatesPanelViewBackend=vc.PanelView.extend({$name:!1,$list:!1,template_load_action:"vc_backend_load_template",templateLoadPreviewAction:"vc_load_template_preview",save_template_action:"vc_save_template",delete_template_action:"vc_delete_template",appendedTemplateType:"my_templates",appendedTemplateCategory:"my_templates",appendedCategory:"my_templates",appendedClass:"my_templates",loadUrl:window.ajaxurl,events:$.extend(vc.PanelView.prototype.events,{"click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate","click .vc_template-delete-icon":"removeTemplate"}),initialize:function(){_.bindAll(this,"checkInput","saveTemplate"),vc.TemplatesPanelViewBackend.__super__.initialize.call(this)},render:function(){return this.$el.css("left",($(window).width()-this.$el.width())/2),this.$name=this.$el.find('[data-js-element="vc-templates-input"]'),this.$name.off("keypress").on("keypress",this.checkInput),this.$list=this.$el.find(".vc_templates-list-my_templates"),vc.TemplatesPanelViewBackend.__super__.render.call(this),this},saveTemplate:function(e){var t,i,n,a;return e&&e.preventDefault&&e.preventDefault(),t=this.$name.val(),a=this,_.isString(t)&&t.length?(n=this.getPostContent()).trim().length?(i={action:this.save_template_action,template:n,template_name:t,vc_inline:!0,_vcnonce:window.vcAdminNonce},void this.setButtonMessage(void 0,void 0,!0).reloadTemplateList(i,(function(){a.$name.val("").change()}),(function(){a.showMessage(window.i18nLocale.template_save_error,"error"),a.clearButtonMessage()}))):(this.showMessage(window.i18nLocale.template_is_empty,"error"),!1):(this.showMessage(window.i18nLocale.please_enter_templates_name,"error"),!1)},checkInput:function(e){if(13===e.which)return this.saveTemplate(),!1},removeTemplate:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var t=$(e.target).closest("[data-template_id]"),i=t.find('[data-vc-ui-element="template-title"]').text();if(confirm(window.i18nLocale.confirm_deleting_template.replace("{template_name}",i))){var n=t.data("template_id"),a=t.data("template_type"),o=t.data("template_action");t.remove(),$.ajax({type:"POST",url:window.ajaxurl,data:{action:o||this.delete_template_action,template_id:n,template_type:a,vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done((function(){this.showMessage(window.i18nLocale.template_removed,"success"),vc.events.trigger("templates:delete",{id:n,type:a})}))}},reloadTemplateList:function(e,t,i){var n=this;$.ajax({type:"POST",url:window.ajaxurl,data:e,context:this}).done((function(e){n.filter=!1,n.$list||(n.$list=n.$el.find(".vc_templates-list-my_templates")),n.$list.prepend($(e)),"function"==typeof t&&t(e)})).error("function"==typeof i?i:function(){})},getPostContent:function(){return vc.shortcodes.stringify("template")},loadTemplate:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var t=$(e.target).closest("[data-template_id][data-template_type]");$.ajax({type:"POST",url:this.loadUrl,data:{action:this.template_load_action,template_unique_id:t.data("template_id"),template_type:t.data("template_type"),vc_inline:!0,_vcnonce:window.vcAdminNonce},context:this}).done(this.renderTemplate)},renderTemplate:function(e){var t;_.each(vc.filters.templates,(function(t){e=t(e)})),t=vc.storage.parseContent({},e),_.each(t,(function(e){vc.shortcodes.create(e)})),vc.closeActivePanel()},buildTemplatePreview:function(e){e&&e.preventDefault&&e.preventDefault();try{var t,i=$(e.currentTarget),n=i.closest("[data-template_id]");if(n.hasClass("vc_active")||n.hasClass("vc_loading"))i.vcAccordion("collapseTemplate");else{var a=n.find("[data-js-content]"),o=0<a.children().length;if(this.$content=a,this.$content.find("iframe").length)return i.vcAccordion("collapseTemplate"),!0;var s=this;i.vcAccordion("collapseTemplate",(function(){var e=n.data("template_id"),a=n.data("template_type");if(e&&!o){var c="?";-1<window.ajaxurl.indexOf("?")&&(c="&"),t=window.ajaxurl+c+$.param({action:s.templateLoadPreviewAction,template_unique_id:e,template_type:a,vc_inline:!0,post_id:vc_post_id,_vcnonce:window.vcAdminNonce}),i.find("i").addClass("vc_ui-wp-spinner"),s.$content.html('<iframe style="width: 100%;" data-vc-template-preview-frame="'+e+'"></iframe>');var r=s.$content.find("[data-vc-template-preview-frame]");r.attr("src",t),n.addClass("vc_loading"),r.on("load",(function(){n.removeClass("vc_loading"),i.find("i").removeClass("vc_ui-wp-spinner")}))}}))}}catch(e){window.console&&window.console.warn&&window.console.warn("buildTemplatePreview error",e),this.showMessage("Failed to build preview","error")}},setTemplatePreviewSize:function(e){var t=this.$content.find("iframe");0<t.length&&(t=t[0],void 0===e&&(t.height=t.contentWindow.document.body.offsetHeight,e=t.contentWindow.document.body.scrollHeight),t.height=e+"px")}}),vc.TemplatesPanelViewFrontend=vc.TemplatesPanelViewBackend.extend({template_load_action:"vc_frontend_load_template",loadUrl:!1,initialize:function(){this.loadUrl=vc.$frame.attr("src"),vc.TemplatesPanelViewFrontend.__super__.initialize.call(this)},render:function(){return vc.TemplatesPanelViewFrontend.__super__.render.call(this)},renderTemplate:function(e){var t,i;_.each($(e),(function(e){if("vc_template-data"===e.id)try{i=JSON.parse(e.innerHTML)}catch(e){window.console&&window.console.warn&&window.console.warn("renderTemplate error",e)}"vc_template-html"===e.id&&(t=e.innerHTML)})),t&&i&&vc.builder.buildFromTemplate(t,i)?this.showMessage(window.i18nLocale.template_added_with_id,"error"):this.showMessage(window.i18nLocale.template_added,"success"),vc.sidebar_active||vc.closeActivePanel()}}),vc.RowLayoutEditorPanelView=vc.PanelView.extend({events:{"click [data-dismiss=panel]":"hide","click [data-transparent=panel]":"toggleOpacity","mouseover [data-transparent=panel]":"addOpacity","mouseout [data-transparent=panel]":"removeOpacity","click .vc_layout-btn":"setLayout","click #vc_row-layout-update":"updateFromInput"},_builder:!1,initialize:function(){window.vc.RowLayoutEditorPanelView.__super__.initialize.call(this)},render:function(e){return this.$input=$("#vc_row-layout"),e&&(this.model=e),this.addCurrentLayout(),this.resetMinimize(),vc.column_trig_changes=!0,this},builder:function(){return this._builder||(this._builder=new vc.ShortcodesBuilder),this._builder},addCurrentLayout:function(){vc.shortcodes.sort();var e=_.map(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return e.getParam("width")||"1/1"}),"",this).join(" + ");this.$input.val(e)},isBuildComplete:function(){return this.builder().isBuildComplete()},setLayout:function(e){if(e&&e.preventDefault&&e.preventDefault(),!this.isBuildComplete())return!1;var t=$(e.currentTarget).attr("data-cells"),i=this.model.view.convertRowColumns(t,this.builder());this.$input.val(i.join(" + "))},updateFromInput:function(e){if(e&&e.preventDefault&&e.preventDefault(),!this.isBuildComplete())return!1;var t,i=this.$input.val();!1!==(t=this.validateCellsList(i))?this.model.view.convertRowColumns(t,this.builder()):window.alert(window.i18nLocale.wrong_cells_layout)},validateCellsList:function(e){var t,i,n,a,o;return t=[],i=e.replace(/\s/g,"").split("+"),!(1e3<=_.reduce(_.map(i,(function(e){if(e.match(/^[vc\_]{0,1}span\d{1,2}$/)){var i=vc_convert_column_span_size(e);return!1===i?1e3:(n=i.split(/\//),t.push(n[0]+""+n[1]),12*parseInt(n[0],10)/parseInt(n[1],10))}return e.match(/^[1-9]|1[0-2]\/[1-9]|1[0-2]$/)?(n=e.split(/\//),a=parseInt(n[0],10),5!==(o=parseInt(n[1],10))&&0!=12%o||o<a?1e3:(t.push(a+""+o),5===o?a:12*a/o)):1e3})),(function(e,t){return t+e}),0))&&t.join("_")}}),vc.RowLayoutEditorPanelViewBackend=vc.RowLayoutEditorPanelView.extend({builder:function(){return this.builder||(this.builder=vc.storage),this.builder},isBuildComplete:function(){return!0},setLayout:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget).attr("data-cells"),i=this.model.view.convertRowColumns(t);this.$input.val(i.join(" + "))}}),$(window).on("orientationchange",(function(){vc.active_panel&&vc.active_panel.$el.css({top:"",left:"auto",height:"auto",width:"auto"})})),$(window).bind("resize.fixElContainment",(function(){vc.active_panel&&vc.active_panel.fixElContainment&&vc.active_panel.fixElContainment()})),$("body").on("keyup change input","[data-vc-disable-empty]",(function(){var e=$(this),t=$(e.data("vcDisableEmpty"))[0];""!=e.val()?t.removeAttribute("disabled"):t.setAttribute("disabled",!0)}))}(window.jQuery),function(){"use strict";window.vc.HelperAjax={ajax:!1,checkAjax:function(){this.ajax&&this.ajax.abort()},resetAjax:function(){this.ajax=!1}}}(),function(){"use strict";window.vc.HelperPrompts={uiEvents:{render:"removeAllPrompts"},removeAllPrompts:function(){this.$el.find(".vc_ui-panel-content-container").removeClass("vc_ui-content-hidden"),this.$el.find(".vc_ui-prompt").remove()}}}(),function($){"use strict";window.vc.HelperPanelViewHeaderFooter={buttonMessageTimeout:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity"},uiEvents:{save:"setButtonMessage",render:"clearButtonMessage"},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity"),this.$el.removeClass("vc_minimized")},toggleOpacity:function(e){e.preventDefault();var t,i,n=this,a=this.$el,o=a.find(a.data("vcPanel")),s=o.closest(o.data("vcPanelContainer")),c=$(e.currentTarget);void 0===a.data("vcHasHeight")&&a.data("vcHasHeight",(t=a.attr("style"),i=!1,t&&t.split(";").forEach((function(e){var t=e.split(":");"height"===$.trim(t[0])&&(i=!0)})),i)),a.hasClass("vc_minimized")?(void 0===a.data("vcMinimizeHeight")&&a.data("vcMinimizeHeight",$(window).height()-.2*$(window).height()),a.animate({height:a.data("vcMinimizeHeight")},{duration:400,start:function(){c.prop("disabled",!0),a.addClass("vc_animating"),n.tabsMenu&&n.tabsMenu()&&n.tabsMenu().vcTabsLine("moveTabs")},complete:function(){a.removeClass("vc_minimized"),a.removeClass("vc_animating"),a.data("vcHasHeight")||a.css({height:""}),n.trigger("afterUnminimize"),c.prop("disabled",!1)}})):(a.data("vcMinimizeHeight",a.height()),a.animate({height:o.outerHeight()+s.outerHeight()-s.height()},{duration:400,start:function(){c.prop("disabled",!0),a.addClass("vc_animating")},complete:function(){a.addClass("vc_minimized"),a.removeClass("vc_animating"),a.css({height:""}),n.trigger("afterMinimize"),c.prop("disabled",!1)}}))},setButtonMessage:function(e,t,i){var n,a;return void 0===i&&(i=!1),this.clearButtonMessage=_.bind(this.clearButtonMessage,this),!i&&!vc.frame_window||this.buttonMessageTimeout||(void 0===e&&(e=window.i18nLocale.ui_saved),void 0===t&&(t="success"),n=(a=this.$el.find('[data-vc-ui-element="button-save"]')).html(),a.addClass("vc_ui-button-"+t+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",n).data("vcCurrentTextType",t).html(e),_.delay(this.clearButtonMessage,5e3),this.buttonMessageTimeout=!0),this},clearButtonMessage:function(){var e,t,i;this.buttonMessageTimeout&&(window.clearTimeout(this.buttonMessageTimeout),t=(i=this.$el.find('[data-vc-ui-element="button-save"]')).data("vcCurrentTextHtml")||"Save",e=i.data("vcCurrentTextType"),i.html(t).removeClass("vc_ui-button-"+e+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.buttonMessageTimeout=!1)}}}(window.jQuery),function($){"use strict";window.vc.HelperTemplatesPanelViewSearch={searchSelector:"[data-vc-templates-name-filter]",events:{"keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate"},uiEvents:{show:"focusToSearch"},focusToSearch:function(){vc.is_mobile||$(this.searchSelector,this.$el).focus()},searchTemplate:function(e){var t=$(e.currentTarget);t.val().length?this.searchByName(t.val()):this.clearSearch()},clearSearch:function(){this.$el.find("[data-vc-templates-name-filter]").val(""),this.$el.find("[data-template_name]").css("display","block"),this.$el.removeAttr("data-vc-template-search"),this.$el.find(".vc-search-result-empty").removeClass("vc-search-result-empty");var e=new jQuery.Event("click");e.isClearSearch=!0,this.$el.find('.vc_panel-tabs-control:first [data-vc-ui-element="panel-tab-control"]').trigger(e)},searchByName:function(e){this.$el.find(".vc_panel-tabs-control.vc_active").removeClass("vc_active"),this.$el.attr("data-vc-template-search","true"),this.$el.find("[data-template_name]").css("display","none"),this.$el.find('[data-template_name*="'+vc_slugify(e)+'"]').css("display","block"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(){var e=$(this);e.removeClass("vc-search-result-empty"),e.find("[data-template_name]:visible").length||e.addClass("vc-search-result-empty")}))}}}(window.jQuery),function($){"use strict";window.vc.HelperPanelViewResizable={sizeInitialized:!1,uiEvents:{show:"setSavedSize initResize",tabChange:"setDefaultHeightSettings",afterMinimize:"setupOnMinimize",afterUnminimize:"initResize",fixElContainment:"saveUIPanelSizes"},setDefaultHeightSettings:function(){this.$el.css({maxHeight:"75vh",height:"auto"}),this.sizeInitialized||this.$el.css({width:450,top:100,left:"calc(50% - (450px / 2))"})},initResize:function(){var e=this;this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minHeight:240,minWidth:380,resize:function(){e.trigger("resize")},handles:"n, e, s, w, ne, se, sw, nw",start:function(t,i){e.trigger("beforeResizeStart"),e.$el.css("maxHeight","none"),e.$el.css("height",i.size.height),$("iframe").css("pointerEvents","none"),e.trigger("afterResizeStart")},stop:function(){e.trigger("beforeResizeStop"),$("iframe").css("pointerEvents",""),e.saveUIPanelSizes(),e.trigger("afterResizeStop")}}),this.content().addClass("vc_properties-list-init"),this.trigger("resize")},setSavedSize:function(){if(this.setDefaultHeightSettings(),vc.is_mobile)return!1;var e={width:getUserSetting(this.panelName+"_vcUIPanelWidth"),left:getUserSetting(this.panelName+"_vcUIPanelLeft").replace("minus","-"),top:getUserSetting(this.panelName+"_vcUIPanelTop").replace("minus","-")};_.isEmpty(e.width)||this.$el.width(e.width),_.isEmpty(e.left)||this.$el.css("left",e.left),_.isEmpty(e.top)||this.$el.css("top",e.top),this.sizeInitialized=!0},saveUIPanelSizes:function(){if(!1===this.sizeInitialized)return!1;var e={width:this.$el.width(),left:parseInt(this.$el.css("left"),10),top:parseInt(this.$el.css("top"),10)};setUserSetting(this.panelName+"_vcUIPanelWidth",e.width),setUserSetting(this.panelName+"_vcUIPanelLeft",e.left.toString().replace("-","minus")+"px"),setUserSetting(this.panelName+"_vcUIPanelTop",e.top.toString().replace("-","minus")+"px")},setupOnMinimize:function(){this.$el.data("uiResizable")&&this.$el.resizable("destroy"),this.$el.resizable({minWidth:380,handles:"w, e",start:function(e){$("iframe").css("pointerEvents","none")},stop:function(){$("iframe").css("pointerEvents","")}})}}}(window.jQuery),function(){"use strict";window.vc.HelperPanelViewDraggable={draggable:!0,draggableOptions:{iframeFix:!0,handle:'[data-vc-ui-element="panel-heading"]'},uiEvents:{show:"initDraggable"},initDraggable:function(){this.$el.draggable(_.extend({},this.draggableOptions,{start:this.fixElContainment,stop:this.fixElContainment}))}}}(),function($){"use strict";window.vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){window.vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this)},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs")},showMessage:function(e,t){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i,n=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(t){case"error":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"danger",icon:"times",text:e}));break;case"warning":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"warning",icon:"exclamation-triangle",text:e}));break;case"success":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"success",icon:"check",text:e}))}i.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),i.fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},changeTab:function(e){e&&e.preventDefault&&e.preventDefault(),e&&!e.isClearSearch&&this.clearSearch();var t=$(e.currentTarget);t.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(e,t){parseInt(t,10)<100&&(t=100),$('data-vc-template-preview-frame="'+e+'"').height(t)}}),window.vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview",'click [data-vc-ui-delete="template-title"]':"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},initialize:function(){window.vc.TemplateWindowUIPanelFrontendEditor.__super__.initialize.call(this);var e=$(".vc_edit-form-tab[data-tab=liquid_templates], .vc_edit-form-tab[data-tab=liquid_page_templates]",this.el),t=$(".sortable_templates ul > li",e),i=$(".liquid-templates-container",e),n=$(".vc_ui-template",i);t.each((function(){"all"==$(this).attr("data-sort")?$(this).find(".count").html(n.length):$(this).find(".count").html(n.filter(((e,t)=>t.classList.contains($(this).attr("data-sort")))).length)}))},show:function(){this.clearSearch(),window.vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this);var e=this,t=$(".vc_edit-form-tab[data-tab=liquid_templates], .vc_edit-form-tab[data-tab=liquid_page_templates]",this.el),i=$(".sortable_templates ul > li",t),n=$(".liquid-templates-container",t),a=$(".vc_ui-template",n);i.filter(((e,t)=>"all"===$(t).attr("data-sort"))).addClass("active").trigger("click"),i.on("click",(function(){var t=$(this),o=t.attr("data-sort");e.clearSearch(),i.removeClass("active"),t.addClass("active"),a.removeClass("hidden"),"all"!==o&&a.filter(((e,t)=>!t.classList.contains(o))).addClass("hidden"),n.attr("data-filtered-items",o)})),a.removeClass("is-loading").find(".vc-composer-icon").removeClass("vc-c-icon-sync").addClass("vc-c-icon-add"),$(this.el).on("click",".vc_ui-template [data-template-handler]",(function(){var e=$(this);e.closest(".vc_ui-template").addClass("is-loading"),e.hasClass("vc_ui-control-button")?e.find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync"):e.next(".vc_ui-list-bar-item-actions").find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync")}))},showMessage:function(e,t){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i,n=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(t){case"error":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"danger",icon:"times",text:e}));break;case"warning":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"warning",icon:"exclamation-triangle",text:e}));break;case"success":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"success",icon:"check",text:e}))}i.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),i.fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)},changeTab:function(e){e&&e.preventDefault&&e.preventDefault(),e&&!e.isClearSearch&&this.clearSearch();var t=$(e.currentTarget);t.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}}),window.vc.PagesTemplateWindowUIPanelFrontendEditor=window.vc.TemplateWindowUIPanelFrontendEditor.extend({initialize:function(){
window.vc.PagesTemplateWindowUIPanelFrontendEditor.__super__.initialize.call(this)}}),$.fn.vcAccordion.Constructor.prototype.collapseTemplate=function(e){var t,i,n;if(t=this.$element,n=0,(i=this.getContainer().find("[data-vc-preview-handler]").each((function(){var e,t;void 0===(e=(t=$(this)).data("vc.accordion"))&&(t.vcAccordion(),e=t.data("vc.accordion")),e&&e.setIndex&&e.setIndex(n++)})).filter((function(){var e;return(e=$(this).data("vc.accordion")).getTarget().hasClass(e.activeClass)})).filter((function(){return t[0]!==this}))).length&&$.fn.vcAccordion.call(i,"hide"),this.isActive())$.fn.vcAccordion.call(t,"hide");else{$.fn.vcAccordion.call(t,"show");var a=t.closest(".vc_ui-list-bar-item"),o=t.closest("[data-template_id]"),s=o.closest("[data-vc-ui-element=panel-content]").parent();setTimeout((function(){if(Math.round(o.offset().top-s.offset().top)<0){var t=Math.round(o.offset().top-s.offset().top+s.scrollTop()-a.height());s.animate({scrollTop:t},400)}"function"==typeof e&&e(o,s)}),400)}}}(window.jQuery),function($){"use strict";window.vc.element_start_index=0,window.vc.AddElementUIPanelBackendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({el:"#vc_ui-panel-add-element",searchSelector:"#vc_elements_name_filter",prepend:!1,builder:"",toggleTriggerAdded:!1,events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements","search #vc_elements_name_filter":"filterElements","click [data-vc-manage-elements]":"openPresetWindow"},initialize:function(){window.vc.AddElementUIPanelBackendEditor.__super__.initialize.call(this),window.vc.events.on("shortcodes:add",this.addCustomCssStyleTag.bind(this)),window.vc.events.on("vc:savePreset",this.updateAddElementPopUp.bind(this)),window.vc.events.on("vc:deletePreset",this.removePresetFromAddElementPopUp.bind(this))},render:function(e,t){return _.bindAll(this,"cloneTabControls"),_.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),this.$el.is(":hidden")&&window.vc.closeActivePanel(),(window.vc.active_panel=this).prepend=!!_.isBoolean(t)&&t,this.place_after_id=!!_.isString(t)&&t,this.model=!!_.isObject(e)&&e,this.$content=this.$el.find('[data-vc-ui-element="panel-add-element-list"]'),this.$buttons=$('[data-vc-ui-element="add-element-button"]',this.$content),this.buildFiltering(),this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click(),this.show(),!this.toggleTriggerAdded&&this.cloneTabControls(),this.toggleTriggerAdded=!0,this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs"),_.defer((()=>{if(vc.is_mobile||$(this.searchSelector).focus(),this.$content&&this.$content.find(".wpb-content-layouts").length){const e=this.$content.find(".wpb-content-layouts").children("button").first();e.hasClass("vc_active")||e.click()}})),vc.AddElementUIPanelBackendEditor.__super__.render.call(this),this},cloneTabControls:function(){this.$el.find('[data-vc-ui-element="panel-tab-control"]').each(((e,t)=>{const i=$(t),n=i.attr("data-filter");if("*"===n)return;this.$buttons.filter(((e,t)=>$(t).is(n))).appendTo(this.$content.find(".wpb-content-layouts"));const a=this.$buttons.filter(((e,t)=>$(t).is(n))).first(),o=i.clone(!1).insertBefore(a).removeAttr("class data-vc-ui-element");o.off(),o.on("click",this.toggleElements.bind(this)),$(document).on("lqd-sidebar-active",(()=>{vc.sidebar_active?this.$buttons.removeClass("vc_visible"):this.$el.find('[data-vc-ui-element="panel-tab-control"]').eq(0).click()}))}))},buildFiltering:function(){var e,t,i,n,a;e='[data-vc-ui-element="add-element-button"]',i=this._getNotIn(this.model?this.model.get("shortcode"):""),$(this.searchSelector).val(""),this.$content.addClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter","*"),this.$content.find(".wpb-content-layouts").children("button.vc_active").removeClass("vc_active"),n=!(!(t=this.model?this.model.get("shortcode"):"vc_column")||_.isUndefined(vc.getMapped(t).as_parent))&&vc.getMapped(t).as_parent,_.isObject(n)?(a=[],_.isString(n.only)&&a.push(_.reduce(n.only.replace(/\s/,"").split(","),(function(e,t){return e+(_.isEmpty(e)?"":",")+'[data-element="'+t.trim()+'"]'}),"")),_.isString(n.except)&&a.push(_.reduce(n.except.replace(/\s/,"").split(","),(function(e,t){return e+':not([data-element="'+t.trim()+'"])'}),"")),e+=a.join(",")):i&&(e=i),!1===t||_.isUndefined(vc.getMapped(t).allowed_container_element)||(!1===vc.getMapped(t).allowed_container_element?e+=":not([data-is-container=true])":_.isString(vc.getMapped(t).allowed_container_element)&&(e+=":not([data-is-container=true]), [data-element="+vc.getMapped(t).allowed_container_element+"]")),this.$buttons.removeClass("vc_visible").addClass("vc_inappropriate"),$(e,this.$content).removeClass("vc_inappropriate").addClass("vc_visible"),this.hideEmptyFilters()},hideEmptyFilters:function(){var e=this;this.$el.find('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-add-element-tab"]:first').addClass("vc_active"),this.$el.find("[data-filter]").each((function(){$($(this).data("filter")+".vc_visible:not(.vc_inappropriate)",e.$content).length?$(this).parent().show():$(this).parent().hide()}))},_getNotIn:_.memoize((function(e){return'[data-vc-ui-element="add-element-button"]:not('+_.reduce(vc.map,(function(t,i){var n;return n=_.isEmpty(t)?"":",",_.isObject(i.as_child)?(_.isString(i.as_child.only)&&(_.contains(i.as_child.only.replace(/\s/,"").split(","),e)||(t+=n+"[data-element="+i.base+"]")),_.isString(i.as_child.except)&&_.contains(i.as_child.except.replace(/\s/,"").split(","),e)&&(t+=n+"[data-element="+i.base+"]")):!1===i.as_child&&(t+=n+"[data-element="+i.base+"]"),t}),"")+")"})),filterElements:function(e){var t,i,n,a,o;e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()):e=window.event,n=$(e.currentTarget),a='[data-vc-ui-element="add-element-button"]',o=$(this.searchSelector).val(),this.$content.removeClass("vc_filter-all"),$('[data-vc-ui-element="panel-add-element-tab"].vc_active').removeClass("vc_active"),n.is("[data-filter]")?(n.parent().addClass("vc_active"),a+=t=n.data("filter"),"*"===t?this.$content.addClass("vc_filter-all"):this.$content.removeClass("vc_filter-all"),this.$content.attr("data-vc-ui-filter",t.replace(".js-category-","")),$(this.searchSelector).val("")):o.length?(a+=":containsi('"+o+"'):not('.vc_element-deprecated')",this.$content.attr("data-vc-ui-filter","name:"+o)):o.length||($('[data-vc-ui-element="panel-tab-control"][data-filter="*"]').parent().addClass("vc_active"),this.$content.attr("data-vc-ui-filter","*").addClass("vc_filter-all")),$(".vc_visible",this.$content).removeClass("vc_visible"),!o.length&&vc.sidebar_active?$(a,this.$content).removeClass("vc_visible"):$(a,this.$content).addClass("vc_visible"),o.length&&13===(e.keyCode||e.which)&&1===(i=$(".vc_visible:not(.vc_inappropriate)",this.$content)).length&&i.find("[data-vc-clickable]").click()},toggleElements:function(e){e&&e.preventDefault&&e.preventDefault();const t=$(e.currentTarget);t.toggleClass("vc_active").nextUntil("button").toggleClass("vc_visible",t.hasClass("vc_active")),$(this.searchSelector).val("")},createElement:function(e){var t,i,n,a,o,s,c,r,l,d,v,h,p,u;if(e&&e.preventDefault&&e.preventDefault(),d=(v=$(e.currentTarget)).data("tag"),s={},r={width:"1/1"},(u=v.closest("[data-preset]"))&&(h=u.data("preset"),p=u.data("element")),!1===this.model)if(window.vc.storage.lock(),"vc_section"===d){var m={shortcode:d};h&&"vc_section"===p&&(m.preset=h),i=vc.shortcodes.create(m)}else{var f={shortcode:"vc_row",params:s};h&&p===d&&(f.preset=h);var w={shortcode:"vc_column",params:r,parent_id:(a=vc.shortcodes.create(f)).id,root_id:a.id};h&&"vc_column"===p&&(w.preset=h),n=vc.shortcodes.create(w),i=a,"vc_row"!==d&&(t={shortcode:d,parent_id:n.id,root_id:a.id},h&&p===d&&(t.preset=h),i=vc.shortcodes.create(t))}else i="vc_row"===d?(n="vc_section"===this.model.get("shortcode")?(window.vc.storage.lock(),a=vc.shortcodes.create({shortcode:"vc_row",params:s,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column",params:r,parent_id:a.id,root_id:a.id})):(c={},l={width:"1/1"},window.vc.storage.lock(),a=vc.shortcodes.create({shortcode:"vc_row_inner",params:c,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder()}),vc.shortcodes.create({shortcode:"vc_column_inner",params:l,parent_id:a.id,root_id:a.id})),a):(t={shortcode:d,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.getNextOrder(),root_id:this.model.get("root_id")},h&&p===d&&(t.preset=h),vc.shortcodes.create(t));this.model=i,o=!(_.isBoolean(vc.getMapped(d).show_settings_on_create)&&!1===vc.getMapped(d).show_settings_on_create),this.model.get("shortcode"),this.hide(),o&&this.showEditForm()},getFirstPositionIndex:function(){return--window.vc.element_start_index,vc.element_start_index},show:function(){this.$el.addClass("vc_active"),this.trigger("show")},hide:function(){this.$el.removeClass("vc_active"),vc.active_panel=!1,this.trigger("hide")},showEditForm:function(){window.vc.edit_element_block_view.render(this.model)},addCustomCssStyleTag:function(e){var t;e&&e.getParam&&(t=e.getParam("css"))&&vc.frame_window&&window.vc.frame_window.vc_iframe.setCustomShortcodeCss(t)},updateAddElementPopUp:function(e,t,i,n){var a=this.$el.find('[data-element="'+t+'"]:first').clone(!0);vc_all_presets[e]=n,a.find("[data-vc-shortcode-name]").text(i),a.find(".vc_element-description").text(""),a.attr("data-preset",e),a.addClass("js-category-_my_elements_"),a.insertAfter(this.$el.find('[data-element="'+t+'"]:last')),this.$el.find('[data-filter="js-category-_my_elements_"]').show();var o=this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:first').clone(!0);o.find('[data-vc-ui-element="template-title"]').attr("title",i).text(i),o.find('[data-vc-ui-delete="preset-title"]').attr("data-preset",e).attr("data-preset-parent",t),o.find("[data-vc-ui-add-preset]").attr("data-preset",e).attr("id",t).attr("data-tag",t),o.show(),o.insertAfter(this.$body.find('[data-vc-ui-element="panel-preset"] [data-vc-presets-list-content] .vc_ui-template:last'))},removePresetFromAddElementPopUp:function(e){this.$el.find('[data-preset="'+e+'"]').remove()},openPresetWindow:function(e){e&&e.preventDefault&&e.preventDefault(),window.vc.preset_panel_view.render().show()}}),window.vc.AddElementUIPanelFrontendEditor=vc.AddElementUIPanelBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).extend({events:{'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="panel-tab-control"]':"filterElements","click .vc_shortcode-link":"createElement","keyup #vc_elements_name_filter":"filterElements"},createElement:function(e){var t,i,n,a,o,s,c,r,l,d,v,h,p;if(e&&e.preventDefault&&e.preventDefault(),d=(l=$(e.currentTarget)).data("tag"),s={},o={width:"1/1"},(p=l.closest("[data-preset]"))&&(v=p.data("preset"),h=p.data("element")),this.prepend&&(window.vc.activity="prepend"),0==this.model)if("vc_section"===d){var u={shortcode:d};v&&"vc_section"===h&&(u.preset=v),this.builder.create(u),this.model=this.builder.last()}else{var m={shortcode:"vc_row",params:s};v&&"vc_row"===h&&(m.preset=v),this.builder.create(m);var f={shortcode:"vc_column",parent_id:this.builder.lastID(),params:o};v&&"vc_column"===h&&(f.preset=v),this.builder.create(f),"vc_row"!==d&&(t={shortcode:d,parent_id:this.builder.lastID()},v&&h===d&&(t.preset=v),this.builder.create(t)),this.model=this.builder.last()}else"vc_row"===d?"vc_section"===this.model.get("shortcode")?this.builder.create({shortcode:"vc_row",params:s,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column",params:o,parent_id:this.builder.lastID()}):(c={},r={width:"1/1"},this.builder.create({shortcode:"vc_row_inner",params:c,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()}).create({shortcode:"vc_column_inner",params:r,parent_id:this.builder.lastID()})):(t={shortcode:d,parent_id:this.model.id,order:this.prepend?this.getFirstPositionIndex():vc.shortcodes.nextOrder()},v&&h===d&&(t.preset=v),this.builder.create(t)),this.model=this.builder.last();for(a=this.builder.models.length-1;0<=a;a--)this.builder.models[a].get("shortcode");_.isString(vc.getMapped(d).default_content)&&vc.getMapped(d).default_content.length&&(n=this.builder.parse({},window.vc.getMapped(d).default_content,this.builder.last().toJSON()),_.each(n,(function(e){e.default_content=!0,this.builder.create(e)}),this)),this.model=this.builder.last(),i=!(_.isBoolean(vc.getMapped(d).show_settings_on_create)&&!1===vc.getMapped(d).show_settings_on_create),!vc.sidebar_active&&this.hide(),i&&this.showEditForm(),this.builder.render()}})}(window.jQuery),function($){"use strict";window.vc.ExtendPresets={settingsMenuSelector:'[data-vc-ui-element="settings-dropdown-list"]',settingsButtonSelector:'[data-vc-ui-element="settings-dropdown-button"]',settingsDropdownSelector:'[data-vc-ui-element="settings-dropdown"]',settingsPresetId:null,uiEvents:{init:"addEvents",render:"hideDropdown",afterRender:"afterRenderActions"},afterRenderActions:function(){this.untaintSettingsPresetData(),this.showDropdown()},hideDropdown:function(){this.$el.find('[data-vc-ui-element="settings-dropdown"]').hide()},showDropdown:function(){var e=this.model.get("shortcode");window.vc_settings_show&&"vc_column"!==e&&this.$el.find('[data-vc-ui-element="settings-dropdown"]').show()},showDropdownMenu:function(){var e=this.model.get("shortcode"),t=$(this);t.data("vcSettingsMenuLoaded")&&e===t.data("vcShortcodeName")||this.reloadSettingsMenuContent()},addEvents:function(){var e=this.$el.find(".vc_edit-form-tab.vc_active"),t=this.model.get("shortcode"),i=this;$(document).off("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector).on("beforeMinimize.vc.paramWindow",this.minimizeButtonSelector,(function(){e.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")})),$(document).off("close.vc.paramWindow",this.closeButtonSelector).on("beforeClose.vc.paramWindow",this.closeButtonSelector,(function(){e.find(".vc_ui-prompt-presets .vc_ui-prompt-close").trigger("click")})),$(document).off("show.vc.accordion",this.settingsButtonSelector).on("show.vc.accordion",this.settingsButtonSelector,(function(){var e=$(this);e.data("vcSettingsMenuLoaded")&&t===e.data("vcShortcodeName")||i.reloadSettingsMenuContent()}))},saveSettingsAjaxData:function(e,t,i,n){return{action:"vc_action_save_settings_preset",shortcode_name:e,is_default:i?1:0,vc_inline:!0,title:t,data:n,_vcnonce:window.vcAdminNonce}},saveSettings:function(e,t){var i=this.model.get("shortcode"),n=JSON.stringify(this.getParamsForSettingsPreset());if(void 0!==e&&e.length)return void 0===t&&(t=!1),this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveSettingsAjaxData(i,e,t,n),context:this}).done((function(e){e.success&&(this.setSettingsMenuContent(e.html),this.settingsPresetId=e.id,this.untaintSettingsPresetData())})).always(this.resetAjax),this.ajax},fetchSaveSettingsDialogAjaxData:function(){return{action:"vc_action_render_settings_preset_title_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveSettingsDialog:function(e){var t=this.$el.find(".vc_ui-panel-content-container");t.find(".vc_ui-prompt-presets").length?void 0!==e&&e(!1):(this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveSettingsDialogAjaxData()}).done((function(i){i.success&&(t.prepend(i.html),void 0!==e&&e(!0))})).fail((function(){void 0!==e&&e(!1)})).always(this.resetAjax))},showSaveSettingsDialog:function(e){var t=this;this.isSettingsPresetDefault=!!e,this.fetchSaveSettingsDialog((function(e){var i=t.$el.find(".vc_ui-panel-content-container"),n=i.find(".vc_ui-prompt-presets"),a=n.find(".textfield");i.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible");var o=n.find("[data-vc-view-settings-preset]");if("undefined"!==window.vc_vendor_settings_presets[t.model.get("shortcode")]?o.removeAttr("disabled"):o.attr("disabled","disabled"),n.addClass("vc_visible"),a.focus(),i.addClass("vc_ui-content-hidden"),e){var s=n.find("#vc_ui-save-preset-btn"),c=0;n.on("submit",(function(){var e=a.val();return e.length&&t.saveSettings(e,t.isSettingsPresetDefault).done((function(o){var r=this.getParamsForSettingsPreset();a.val(""),t.setCustomButtonMessage(s,void 0,void 0,!0),vc.events.trigger("vc:savePreset",o.id,t.model.get("shortcode"),e,r),c=_.delay((function(){n.removeClass("vc_visible"),i.removeClass("vc_ui-content-hidden")}),5e3)})).fail((function(){t.setCustomButtonMessage(s,window.i18nLocale.ui_danger,"danger",!0)})),!1})),n.on("click",".vc_ui-prompt-close",(function(){return t.checkAjax(),n.removeClass("vc_visible"),i.removeClass("vc_ui-content-hidden"),t.clearCustomButtonMessage.call(this,s),c&&(window.clearTimeout(c),c=0),!1}))}}))},loadSettingsAjaxData:function(e){return{action:"vc_action_get_settings_preset",vc_inline:!0,id:e,_vcnonce:window.vcAdminNonce}},loadSettings:function(e){return this.panelInit=!1,this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.loadSettingsAjaxData(e),context:this}).done((function(t){t.success&&(this.settingsPresetId=e,this.applySettingsPreset(t.data))})).always(this.resetAjax),this.ajax},saveAsDefaultSettingsAjaxData:function(e,t){return{action:"vc_action_set_as_default_settings_preset",shortcode_name:e,id:t,vc_inline:!0,_vcnonce:window.vcAdminNonce}},saveAsDefaultSettings:function(e,t){var i=this.model.get("shortcode"),n=e||this.settingsPresetId;n?(this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.saveAsDefaultSettingsAjaxData(i,n),context:this}).done((function(e){e.success&&(this.setSettingsMenuContent(e.html),this.untaintSettingsPresetData(),t&&t())})).always(this.resetAjax)):this.showSaveSettingsDialog(!0)},restoreDefaultSettingsAjaxData:function(e){return{action:"vc_action_restore_default_settings_preset",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},restoreDefaultSettings:function(){var e=this.model.get("shortcode");this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.restoreDefaultSettingsAjaxData(e),context:this}).done((function(e){e.success&&this.setSettingsMenuContent(e.html)})).always(this.resetAjax)},setSettingsMenuContent:function(e){var t=this.$el.find(this.settingsButtonSelector),i=this.$el.find(this.settingsMenuSelector),n=this.model.get("shortcode"),a=this;t.data("vcShortcodeName",n),i.html(e),window.vc_presets_data&&0<window.vc_presets_data.presetsCount?i.find("[data-vc-view-settings-preset]").removeAttr("disabled"):i.find("[data-vc-view-settings-preset]").attr("disabled","disabled"),i.find("[data-vc-view-settings-preset]").on("click",(function(){a.showViewSettingsList(),a.closeSettings()})),i.find("[data-vc-save-settings-preset]").on("click",(function(){a.showSaveSettingsDialog(),a.closeSettings()})),i.find("[data-vc-save-template]").on("click",(function(){a.showSaveTemplateDialog(),a.closeSettings()})),i.find("[data-vc-save-default-settings-preset]").on("click",(function(){a.saveAsDefaultSettings(),a.closeSettings()})),i.find("[data-vc-restore-default-settings-preset]").on("click",(function(){a.restoreDefaultSettings(),a.closeSettings()}))},reloadSettingsMenuContentAjaxData:function(e){return{action:"vc_action_render_settings_preset_popup",shortcode_name:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}},showViewSettingsList:function(){var e=this.$el.find(".vc_ui-panel-content-container");if(e.find(".vc_ui-prompt-view-presets:not(.vc_visible)").remove(),!e.find(".vc_ui-prompt-view-presets").length){e.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible");var t=this,i=jQuery('<form class="vc_ui-prompt vc_ui-prompt-view-presets"><div class="vc_ui-prompt-controls"><button type="button" class="vc_general vc_ui-control-button vc_ui-prompt-close"><i class="la la-times"></i></button></div><div class="vc_ui-prompt-title"><label for="prompt_title" class="wpb_element_label">Elements</label></div><div class="vc_ui-prompt-content"><div class="vc_ui-prompt-column"><div class="vc_ui-template-list vc_ui-list-bar" data-vc-action="collapseAll" style="margin-top: 20px;" data-vc-presets-list-content></div></div></div>');this.buildsettingsListContent(i),i.appendTo(e),i.addClass("vc_visible"),e.addClass("vc_ui-content-hidden");var n=function(){return i.remove(),e.removeClass("vc_ui-content-hidden"),!1};i.off("click.vc1").on("click.vc1","[data-vc-load-settings-preset]",(function(e){t.loadSettings($(e.currentTarget).data("vcLoadSettingsPreset")),n()})),i.off("click.vc4").on("click.vc4","[data-vc-set-default-settings-preset]",(function(){t.saveAsDefaultSettings($(this).data("vcSetDefaultSettingsPreset"),(function(){t.buildsettingsListContent(i)}))})),i.off("click.vc3").on("click.vc3",".vc_ui-prompt-close",(function(){n(),t.checkAjax()}))}},buildsettingsListContent:function(e){var t=vc.template('<div class="vc_ui-template"><div class="vc_ui-list-bar-item"><button class="vc_ui-list-bar-item-trigger" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><%- title %></button><div class="vc_ui-list-bar-item-actions"><button class="vc_general vc_ui-control-button" title="Apply Element" type="button" data-vc-load-settings-preset="<%- id %>"><i class="la la-plus"></i></button><button class="vc_general vc_ui-control-button" title="Delete Element" type="button" data-vc-delete-settings-preset="<%- id %>"><i class="la la-times"></i></button></div></div></div>'),i=e.find("[data-vc-presets-list-content]");i.empty(),_.each(window.vc_presets_data.presets[0],(function(e,n){var a=e;0<window.vc_presets_data.defaultId&&parseInt(n,10)===window.vc_presets_data.defaultId&&(a=e+" (default)"),i.append(t({title:a,id:n}))})),_.each(window.vc_presets_data.presets[1],(function(e,n){var a=e;0<window.vc_presets_data.defaultId&&parseInt(n,10)===window.vc_presets_data.defaultId&&(a=e+" (default)"),i.append(t({title:a,id:n}))}))},reloadSettingsMenuContent:function(){var e=this.model.get("shortcode"),t=this.$el.find(this.settingsButtonSelector),i=!1;return this.setSettingsMenuContent(""),this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.reloadSettingsMenuContentAjaxData(e),context:this}).done((function(e){e.success&&(i=!0,this.setSettingsMenuContent(e.html),t.data("vcSettingsMenuLoaded",!0))})).always((function(){i||this.closeSettings(),this.resetAjax()})),this.ajax},closeSettings:function(e){void 0===e&&(e=!1);var t=this.$el.find(this.settingsMenuSelector),i=this.$el.find(this.settingsButtonSelector);e&&(i.data("vcSettingsMenuLoaded",!1),t.html("")),i.vcAccordion("hide")},isSettingsPresetDataTainted:function(){var e=JSON.stringify(this.getParamsForSettingsPreset());return e=e.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash")!==vc_globalHashCode(e)},untaintSettingsPresetData:function(){var e=JSON.stringify(this.getParamsForSettingsPreset());e=e.replace(/vc_custom_\d+/,""),this.$el.data("vcSettingsPresetHash",vc_globalHashCode(e))},applySettingsPresetAjaxData:function(e){var t;return t=this.model.get("parent_id"),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:t?vc.shortcodes.get(t).get("shortcode"):null,post_id:vc_post_id,params:e,_vcnonce:window.vcAdminNonce}},applySettingsPreset:function(e){return this.currentModelParams=e,vc.events.trigger("presets:apply",this.model,e),this._killEditor(),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=$.ajax({type:"POST",url:window.ajaxurl,data:this.applySettingsPresetAjaxData(e),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},getParamsForSettingsPreset:function(){var e=this.model.get("shortcode"),t=this.getParams();return"vc_column"!==e&&"vc_column_inner"!==e||(delete t.width,delete t.offset),t}},vc.events.on("presets.apply",(function(e,t){return"vc_tta_section"===e.get("shortcode")&&void 0!==t.tab_id&&(t.tab_id=vc_guid()+"-cl"),t}))}(window.jQuery),function($){"use strict";window.vc.ExtendTemplates={fetchSaveTemplateDialogAjaxData:function(){return{action:"vc_action_render_settings_templates_prompt",vc_inline:!0,_vcnonce:window.vcAdminNonce}},fetchSaveTemplateDialog:function(e){var t=this.$el.find(".vc_ui-panel-content-container");if(!t.find(".vc_ui-prompt-templates").length)return this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.fetchSaveTemplateDialogAjaxData()}).done((function(i){i.success&&(t.prepend(i.html),void 0!==e&&e(!0))})).always(this.resetAjax),this.ajax;void 0!==e&&e(!1)},showSaveTemplateDialog:function(){var e=this;this.fetchSaveTemplateDialog((function(t){var i=e.$el.find(".vc_ui-panel-content-container"),n=i.find(".vc_ui-prompt-templates"),a=n.find(".textfield");if(i.find(".vc_ui-prompt.vc_visible").removeClass("vc_visible"),n.addClass("vc_visible"),a.focus(),i.addClass("vc_ui-content-hidden"),t){var o=0,s=n.find("#vc_ui-save-templates-btn");n.on("submit",(function(){var t=a.val();if(e.$el.find(e.settingsButtonSelector),!t.length)return!1;var c={action:vc.templates_panel_view.save_template_action,template:vc.shortcodes.singleStringify(e.model.get("id"),"template"),template_name:t,vc_inline:!0,_vcnonce:window.vcAdminNonce};return vc.templates_panel_view.reloadTemplateList(c,(function(){a.val(""),e.setCustomButtonMessage(s,void 0,void 0,!0),o=_.delay((function(){n.removeClass("vc_visible"),i.removeClass("vc_ui-content-hidden")}),5e3)}),(function(){e.setCustomButtonMessage(s,window.i18nLocale.ui_danger,"danger")})),!1})),n.on("click",".vc_ui-prompt-close",(function(){return e.checkAjax(),n.removeClass("vc_visible"),i.removeClass("vc_ui-content-hidden"),e.clearCustomButtonMessage.call(this,s),o&&(window.clearTimeout(o),o=0),!1}))}}))}}}(window.jQuery),function($){"use strict";window.vc.EditElementPanelView=vc.PanelView.vcExtendUI(vc.HelperAjax).vcExtendUI(vc.ExtendPresets).vcExtendUI(vc.ExtendTemplates).vcExtendUI(vc.HelperPrompts).extend({panelName:"edit_element",el:"#vc_properties-panel",contentSelector:".vc_ui-panel-content.vc_properties-list",minimizeButtonSelector:'[data-vc-ui-element="button-minimize"]',closeButtonSelector:'[data-vc-ui-element="button-close"]',titleSelector:".vc_panel-title",tabsInit:!1,doCheckTabs:!0,$tabsMenu:!1,dependent_elements:{},mapped_params:{},draggable:!1,panelInit:!1,$spinner:!1,active_tab_index:0,buttonMessageTimeout:!1,notRequestTemplate:!1,requiredParamsInitialized:!1,currentModelParams:!1,customButtonMessageTimeout:!1,events:{"click [data-save=true]":"save","click [data-dismiss=panel]":"hide","mouseover [data-transparent=panel]":"addOpacity","click [data-transparent=panel]":"toggleOpacity","mouseout [data-transparent=panel]":"removeOpacity"},initialize:function(){_.bindAll(this,"setSize","setTabsSize","fixElContainment","hookDependent","resetAjax","removeAllPrompts"),this.on("setSize",this.setResize,this),this.on("render",this.resetMinimize,this),this.on("render",this.setTitle,this),this.on("render",this.prepareContentBlock,this),_.defer((()=>{this.cloneNavButtons()}))},setCustomButtonMessage:function(e,t,i,n){var a;return void 0===e&&(e=this.$el.find('[data-vc-ui-element="button-save"]')),void 0===n&&(n=!1),this.clearCustomButtonMessage=_.bind(this.clearCustomButtonMessage,this),!n&&!vc.frame_window||this.customButtonMessageTimeout||(void 0===t&&(t=window.i18nLocale.ui_saved),void 0===i&&(i="success"),a=e.html(),e.addClass("vc_ui-button-"+i+" vc_ui-button-undisabled").removeClass("vc_ui-button-action").data("vcCurrentTextHtml",a).data("vcCurrentTextType",i).html(t),_.delay(this.clearCustomButtonMessage.bind(this,e),5e3),this.customButtonMessageTimeout=!0),this},clearCustomButtonMessage:function(e){var t,i;this.customButtonMessageTimeout&&(window.clearTimeout(this.customButtonMessageTimeout),i=e.data("vcCurrentTextHtml")||"Save",t=e.data("vcCurrentTextType"),e.html(i).removeClass("vc_ui-button-"+t+" vc_ui-button-undisabled").addClass("vc_ui-button-action"),this.customButtonMessageTimeout=!1)},render:function(e,t){var i;return this.$el.is(":hidden")&&vc.closeActivePanel(),t&&(this.notRequestTemplate=!0),this.model=e,this.currentModelParams=this.model.get("params"),(vc.active_panel=this).resetMinimize(),this.clicked=!1,this.$el.css("height","auto"),this.$el.css("maxHeight","75vh"),i=this.model.setting("params")||[],this.$el.attr("data-vc-shortcode",this.model.get("shortcode")),this.tabsInit=!1,this.panelInit=!1,this.active_tab_index=0,this.requiredParamsInitialized=!1,this.mapped_params={},this.dependent_elements={},_.each(i,(function(e){this.mapped_params[e.param_name]=e}),this),this.trigger("render"),this.show(),this.checkAjax(),this.ajax=$.ajax({type:"POST",url:window.ajaxurl,data:this.ajaxData(),context:this}).done(this.buildParamsContent).always(this.resetAjax),this},prepareContentBlock:function(){this.$content=this.notRequestTemplate?this.$el:this.$el.find(this.contentSelector).removeClass("vc_with-tabs"),this.$content.empty(),this.$spinner=$('<span class="vc_ui-wp-spinner vc_ui-wp-spinner-lg vc_ui-wp-spinner-dark"></span>'),this.$content.prepend(this.$spinner)},buildParamsContent:function(e){var t,i,n;(i=(t=$(e)).find('[data-vc-ui-element="panel-tabs-controls"]')).find(".vc_edit-form-tab-control:first-child").addClass("vc_active"),n=this.$el.find('[data-vc-ui-element="panel-header-content"]'),i.prependTo(n),this.$content.html(t),this.$content.removeAttr("data-vc-param-initialized"),this.active_tab_index=0,this.tabsInit=!1,this.panelInit=!1,this.dependent_elements={},this.requiredParamsInitialized=!1,this.$content.find("[data-vc-param-initialized]").removeAttr("data-vc-param-initialized"),this.init(),this.$content.parent().scrollTop(1).scrollTop(0),this.$content.removeClass("vc_properties-list-init"),this.$el.trigger("vcPanel.shown"),this.trigger("afterRender")},resetMinimize:function(){this.$el.removeClass("vc_panel-opacity")},ajaxData:function(){var e,t,i,n;return e=(t=this.model.get("parent_id"))?this.model.collection.get(t).get("shortcode"):null,i=this.model.get("params"),n=vc.getMergedParams(this.model.get("shortcode"),_.extend({},vc.getDefaults(this.model.get("shortcode")),i)),_.isUndefined(i.content)||(n.content=i.content),{action:"vc_edit_form",tag:this.model.get("shortcode"),parent_tag:e,post_id:vc_post_id,params:n,_vcnonce:window.vcAdminNonce}},init:function(){vc.EditElementPanelView.__super__.init.call(this),this.initParams(),this.initDependency(),$(".wpb_edit_form_elements .textarea_html").each((function(){window.init_textarea_html($(this))})),this.trigger("init"),this.panelInit=!0},initParams:function(){var e=this,t=this.content().find('#vc_edit-form-tabs [data-vc-ui-element="panel-edit-element-tab"]:eq('+this.active_tab_index+")");t.length||(t=this.content()),t.attr("data-vc-param-initialized")||($('[data-vc-ui-element="panel-shortcode-param"]',t).each((function(){var t,i;(t=$(this)).data("vcInitParam")||(i=t.data("param_settings"),vc.atts.init.call(e,i,t),t.data("vcInitParam",!0))})),t.attr("data-vc-param-initialized",!0)),this.requiredParamsInitialized||_.isUndefined(vc.required_params_to_init)||($('[data-vc-ui-element="panel-shortcode-param"]',this.content()).each((function(){var t,i;!(t=$(this)).data("vcInitParam")&&-1<_.indexOf(vc.required_params_to_init,t.data("param_type"))&&(i=t.data("param_settings"),vc.atts.init.call(e,i,t),t.data("vcInitParam",!0))})),this.requiredParamsInitialized=!0)},initDependency:function(){var e={};_.each(this.mapped_params,(function(t){if(_.isObject(t)&&_.isObject(t.dependency)){var i,n,a=t.dependency;_.isString(t.dependency.element)&&(i=$("[name="+t.dependency.element+"].wpb_vc_param_value",this.$content),
n=$("[name= "+t.param_name+"].wpb_vc_param_value",this.$content),_.each(i,(function(t){var i,a;a=(i=$(t)).attr("name"),_.isArray(this.dependent_elements[i.attr("name")])||(this.dependent_elements[i.attr("name")]=[]),this.dependent_elements[i.attr("name")].push(n),i.data("dependentSet")||(i.attr("data-dependent-set","true"),i.off("keyup change",this.hookDependent).on("keyup change",this.hookDependent)),e[a]||(e[a]=i)}),this)),_.isString(a.callback)&&window[a.callback].call(this)}}),this),this.doCheckTabs=!1,_.each(e,(function(e){this.hookDependent({currentTarget:e})}),this),this.doCheckTabs=!0,this.checkTabs(),e=null},hookDependent:function(e){var t,i,n,a,o,s;return i=(t=$(e.currentTarget)).closest(".vc_column"),a=this.dependent_elements[t.attr("name")],o=t.is(":checkbox")?_.map(this.$content.find("[name="+$(e.currentTarget).attr("name")+"].wpb_vc_param_value:checked"),(function(e){return $(e).val()})):t.val(),s=this.doCheckTabs,this.doCheckTabs=!1,n=t.is(":checkbox")?!this.$content.find("[name="+t.attr("name")+"].wpb_vc_param_value:checked").length:!o.length,i.hasClass("vc_dependent-hidden")?_.each(a,(function(e){var t=jQuery.Event("change");t.extra_type="vcHookDepended",e.closest(".vc_column").addClass("vc_dependent-hidden"),e.trigger(t)})):_.each(a,(function(e){var t=e.attr("name"),i=_.isObject(this.mapped_params[t])&&_.isObject(this.mapped_params[t].dependency)?this.mapped_params[t].dependency:{},a=e.closest(".vc_column");_.isBoolean(i.not_empty)&&!0===i.not_empty&&!n||_.isBoolean(i.is_empty)&&!0===i.is_empty&&n||i.value&&_.intersection(_.isArray(i.value)?i.value:[i.value],_.isArray(o)?o:[o]).length||i.value_not_equal_to&&!_.intersection(_.isArray(i.value_not_equal_to)?i.value_not_equal_to:[i.value_not_equal_to],_.isArray(o)?o:[o]).length?a.removeClass("vc_dependent-hidden"):a.addClass("vc_dependent-hidden");var s=jQuery.Event("change");s.extra_type="vcHookDepended",e.trigger(s)}),this),s&&(this.checkTabs(),this.doCheckTabs=!0),this},checkTabs:function(){var e=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$content.hasClass("vc_with-tabs")&&(this.$tabsMenu=this.$content.find(".vc_edit-form-tabs-menu"))),this.$tabsMenu&&(this.$content.find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(t){var i=e.$tabsMenu.find('> [data-tab-index="'+t+'"]');$(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden").removeClass("vc_tab-color-animated").addClass("vc_tab-color-animated"),window.setTimeout((function(){i.removeClass("vc_tab-color-animated")}),200)):i.addClass("vc_dependent-hidden")})),window.setTimeout(this.setTabsSize,100))},setTabsSize:function(){this.$tabsMenu.parents(".vc_with-tabs.vc_panel-body").css("margin-top",this.$tabsMenu.outerHeight())},setActive:function(){this.$el.prev().addClass("active")},window:function(){return window},getParams:function(){var e;return e=this.mapped_params,this.params=_.extend({},this.model.get("params")),_.each(e,(function(e){var t;t=vc.atts.parseFrame.call(this,e),this.params[e.param_name]=t}),this),_.each(vc.edit_form_callbacks,(function(e){e.call(this)}),this),this.params},content:function(){return this.$content},save:function(){if(this.panelInit){var e=this.model.get("shortcode"),t=this.getParams(),i=_.extend({},vc.getDefaults(e),vc.getMergedParams(e,t));_.isUndefined(t.content)||(i.content=t.content),this.model.save({params:i}),this.showMessage(window.sprintf(window.i18nLocale.inline_element_saved,vc.getMapped(e).name),"success"),vc.frame_window||this.hide(),this.trigger("save")}},show:function(){this.$el.hasClass("vc_active")||(this.$el.addClass("vc_active"),this.draggable||this.initDraggable(),this.fixElContainment(),this.trigger("show"))},hide:function(e){e&&e.preventDefault&&e.preventDefault(),this.checkAjax(),this.ajax=!1,this.model&&(this.model=null),this.currentModelParams=!1,this._killEditor(),this.$el.removeClass("vc_active"),this.$el.find(".vc_properties-list").removeClass("vc_with-tabs").css("margin-top","auto"),this.$content.empty(),vc.active_panel=!1,this.trigger("hide"),vc.sidebar_active&&vc.add_element_block_view.render(!1)},setTitle:function(){return this.$el.find(this.titleSelector).text(vc.getMapped(this.model.get("shortcode")).name+" "+window.i18nLocale.settings),this},_killEditor:function(){_.isUndefined(window.tinyMCE)||$("textarea.textarea_html",this.$el).each((function(){var e=$(this).attr("id");"4"===tinymce.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,e):window.tinyMCE.execCommand("mceRemoveControl",!0,e)})),jQuery("body").off("click.wpcolorpicker")}}),window.vc.EditElementUIPanel=vc.EditElementPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).extend({el:"#vc_ui-panel-edit-element",events:{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"},titleSelector:'[data-vc-ui-element="panel-title"]',initialize:function(){vc.EditElementUIPanel.__super__.initialize.call(this),this.on("afterResizeStart",(function(){this.$el.css("maxHeight","none")})),$(document).on("lqd-sidebar-active",(()=>{vc.sidebar_active||this.$el.css({width:650,top:100,left:"calc(50% - (650px / 2))"}),this.customMediaQuery&&this.setMediaSizeClass()}))},show:function(){vc.EditElementUIPanel.__super__.show.call(this),$('[data-vc-ui-element="panel-tabs-controls"]',this.$el).remove(),this.$el.css("maxHeight","75vh")},tabsMenu:function(){if(!1===this.tabsInit){this.tabsInit=!0;var e=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]');e.length&&(this.$tabsMenu=e)}return this.$tabsMenu},buildTabs:function(){this.content().find('[data-vc-ui-element="panel-tabs-controls"]').prependTo('[data-vc-ui-element="panel-header-content"]')},changeTab:function(e){e&&e.preventDefault&&e.preventDefault();var t=$(e.currentTarget);t.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),t.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.active_tab_index=this.$el.find(t.data("vcUiElementTarget")).addClass("vc_active").index(),this.initParams(),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"),this.$content.parent().scrollTop(1).scrollTop(0),this.trigger("tabChange"))},checkTabs:function(){var e=this;!1===this.tabsInit&&(this.tabsInit=!0,this.$tabsMenu=this.$el.find('[data-vc-ui-element="panel-tabs-controls"]')),this.tabsMenu()&&(this.content().find('[data-vc-ui-element="panel-edit-element-tab"]').each((function(t){var i=e.$tabsMenu.find('> [data-tab-index="'+t+'"]');$(this).find('[data-vc-ui-element="panel-shortcode-param"]:not(".vc_dependent-hidden")').length?i.hasClass("vc_dependent-hidden")&&(i.removeClass("vc_dependent-hidden"),window.setTimeout((function(){i.removeClass("vc_tab-color-animated")}),200)):i.addClass("vc_dependent-hidden")})),this.$tabsMenu.vcTabsLine("refresh"),this.$tabsMenu.vcTabsLine("moveTabs"))}})}(window.jQuery),function($){"use strict";window.vc.TemplateLibraryView=vc.PanelView.vcExtendUI(vc.HelperAjax).extend({myTemplates:[],$mainPopup:!1,$loadingPage:!1,$gridContainer:!1,$myTemplateContainer:!1,$popupItems:!1,$previewImage:!1,$previewTitle:!1,$previewUpdate:!1,$previewDownload:!1,$previewUpdateBtn:!1,$previewDownloadBtn:!1,$templatePreview:!1,$templatePage:!1,$downloadPage:!1,$updatePage:!1,$content:!1,$filter:!1,compiledGridTemplate:!1,compiledTemplate:!1,loaded:!1,data:!1,events:{"click [data-dismiss=panel]":"hide","click .vc_ui-panel-close-button":"closePopupButton","click .vc_ui-access-library-btn":"accessLibrary","click #vc_template-library-template-grid .vc_ui-panel-template-preview-button":"previewButton","click .vc_ui-panel-back-button":"backToTemplates","click .vc_ui-panel-template-download-button, #vc_template-library-download-btn":"downloadButton","click .vc_ui-panel-template-update-button, #vc_template-library-update-btn":"updateButton","keyup #vc_template_lib_name_filter":"filterTemplates","search #vc_template_lib_name_filter":"filterTemplates"},initialize:function(){_.bindAll(this,"loadLibrary","addTemplateStatus","loadMyTemplates","deleteTemplate"),this.$mainPopup=this.$el.find(".vc_ui-panel-popup"),this.$loadingPage=this.$el.find(".vc_ui-panel-loading"),this.$gridContainer=this.$el.find("#vc_template-library-template-grid"),this.$myTemplateContainer=this.$el.find("#vc_template-library-shared_templates"),this.$popupItems=this.$el.find(".vc_ui-panel-popup-item"),this.$previewImage=this.$el.find(".vc_ui-panel-preview-image"),this.$previewTitle=this.$el.find(".vc_ui-panel-template-preview .vc_ui-panel-title"),this.$previewUpdate=this.$el.find("#vc_template-library-update"),this.$previewDownload=this.$el.find("#vc_template-library-download"),this.$previewUpdateBtn=this.$previewUpdate.find("#vc_template-library-update-btn"),this.$previewDownloadBtn=this.$previewUpdate.find("#vc_template-library-download-btn"),this.$templatePreview=this.$el.find(".vc_ui-panel-template-preview"),this.$templatePage=this.$el.find(".vc_ui-panel-template-content"),this.$downloadPage=this.$el.find(".vc_ui-panel-download"),this.$updatePage=this.$el.find(".vc_ui-panel-update"),this.$filter=this.$el.find("#vc_template_lib_name_filter"),this.$content=this.$el.find(".vc_ui-templates-content");var e=$("#vc_template-grid-item").html();this.compiledGridTemplate=vc.template(e);var t=$("#vc_template-item").html();this.compiledTemplate=vc.template(t),window.vc.events.on("templates:delete",this.deleteTemplate)},getLibrary:function(){if(this.loaded)this.showLibrary();else{this.checkAjax();var e=this.getStorage("templates"),t=this;e&&"object"==typeof e&&!_.isEmpty(e)?(this.loaded=!0,this.loadLibrary(e),this.showLibrary()):this.ajax=$.getJSON("https://vc-cc-templates.wpbakery.com/templates.json").done((function(e){t.setStorage("templates",e),t.loaded=!0,t.loadLibrary(e),t.showLibrary()})).always(this.resetAjax)}},removeStorage:function(e){try{localStorage.removeItem("vc4-"+e),localStorage.removeItem("vc4-"+e+"_expiresIn")}catch(e){return!1}return!0},getStorage:function(e){var t=Date.now(),i=localStorage.getItem("vc4-"+e+"_expiresIn");if(null==i&&(i=0),i<t)return this.removeStorage(e),null;try{return JSON.parse(localStorage.getItem("vc4-"+e))}catch(e){return null}},setStorage:function(e,t,i){i=null==i?86400:Math.abs(i);var n=Date.now()+1e3*i;try{localStorage.setItem("vc4-"+e,JSON.stringify(t)),localStorage.setItem("vc4-"+e+"_expiresIn",n)}catch(e){return window.console&&window.console.warn&&window.console.warn("template setStorage error",e),!1}return!0},loadLibrary:function(e){if(e){var t="",i=this;this.loaded=!0,this.data=e,this.$filter.val(""),e.forEach((function(e){e=i.addTemplateStatus(e),t+=i.compiledGridTemplate({id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,previewUrl:e.previewUrl,status:e.status,downloaded:_.find(i.myTemplates,{id:e.id}),version:e.version})})),this.$gridContainer.html(t)}},showLibrary:function(){this.$loadingPage.addClass("vc_ui-hidden"),this.$mainPopup.removeClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},addTemplateStatus:function(e){var t="",i=_.find(this.myTemplates,{id:e.id});if(i){var n=window.i18nLocale.ui_template_downloaded;e.version>i.version&&(n=window.i18nLocale.ui_template_fupdate),t='<span class="vc_ui-panel-template-item-info"><span>'+n+"</span></span>"}return e.status=t,e},loadMyTemplates:function(){var e="",t=this;this.myTemplates.forEach((function(i){e+=t.compiledTemplate({post_id:i.post_id,title:i.title})})),this.$myTemplateContainer.html(e)},closePopupButton:function(e){e&&e.preventDefault&&e.preventDefault(),this.$mainPopup.toggleClass("vc_ui-hidden"),this.$popupItems.addClass("vc_ui-hidden"),this.$content.removeClass("vc_ui-hidden")},accessLibrary:function(){this.$loadingPage.removeClass("vc_ui-hidden"),this.$content.addClass("vc_ui-hidden"),this.getLibrary()},previewButton:function(e){var t=$(e.currentTarget),i=t.data("preview-url"),n=t.data("title"),a=t.data("template-id"),o=t.data("template-version");this.$previewImage.attr("src",i),this.$previewTitle.text(n);var s=_.find(this.myTemplates,{id:a});this.$previewUpdate.toggleClass("vc_ui-hidden",!(s&&s.version<o)),this.$previewDownload.toggleClass("vc_ui-hidden",!!s),this.$previewUpdateBtn.data("template-id",a),this.$previewDownloadBtn.data("template-id",a),this.$popupItems.addClass("vc_ui-hidden"),this.$templatePreview.removeClass("vc_ui-hidden"),this.$templatePreview.attr("data-template-id",a)},backToTemplates:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},deleteTemplate:function(e){if("shared_templates"===e.type){var t=_.findIndex(this.myTemplates,{post_id:e.id});-1!==t&&(this.myTemplates.splice(t,1),this.loaded&&this.loadLibrary(this.data))}},downloadButton:function(e){e&&e.preventDefault&&e.preventDefault();var t=jQuery(e.currentTarget).closest("[data-template-id]").data("templateId");t&&(this.showDownloadOverlay(),this.downloadTemplate(t))},updateButton:function(e){e&&e.preventDefault&&e.preventDefault(),jQuery(e.currentTarget).closest("[data-template-id]").data("templateId")&&this.showUpdateOverlay()},showDownloadOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$downloadPage.removeClass("vc_ui-hidden")},hideDownloadOverlay:function(e){e&&alert(e),this.$downloadPage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},showUpdateOverlay:function(){this.$popupItems.addClass("vc_ui-hidden"),this.$updatePage.removeClass("vc_ui-hidden")},hideUpdateOverlay:function(e){this.$updatePage.addClass("vc_ui-hidden"),this.$templatePage.removeClass("vc_ui-hidden")},downloadTemplate:function(e){this.checkAjax();var t=!0;this.ajax=$.ajax({type:"POST",url:window.ajaxurl,data:{action:"vc_shared_templates_download",id:e,_vcnonce:window.vcAdminNonce},dataType:"json",context:this}).done((function(i){if(i&&i.success){var n=_.find(this.data,{id:e});n&&(t=!1,n.post_id=i.data.post_id,this.myTemplates.unshift(n),this.loadMyTemplates(),this.loadLibrary(this.data),this.showLibrary())}})).always((function(e,i){var n="";"success"===i&&!t||(n=window.i18nLocale.ui_templates_failed_to_download),this.hideDownloadOverlay(n),this.resetAjax()}))},filterTemplates:function(){var e=".vc_ui-panel-template-item .vc_ui-panel-template-item-name:containsi('"+this.$filter.val()+"')";$(".vc_ui-panel-template-item.vc_ui-visible",this.$gridContainer).removeClass("vc_ui-visible"),$(e,this.$gridContainer).closest(".vc_ui-panel-template-item").addClass("vc_ui-visible")}}),$((function(){window.vcTemplatesLibraryData&&(window.vc.templatesLibrary=new vc.TemplateLibraryView({el:'[data-vc-ui-element="panel-edit-element-tab"][data-tab="shared_templates"]'}),window.vc.templatesLibrary.myTemplates=window.vcTemplatesLibraryData.templates||[],window.vc.templatesLibrary.loadMyTemplates())}))}(window.jQuery),function($){"use strict";vc.PostSettingsUIPanelFrontendEditor=vc.PostSettingsPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({panelName:"post_settings",uiEvents:{setSize:"setEditorSize",show:"setEditorSize"},setSize:function(){this.trigger("setSize")},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},setEditorSize:function(){this.editor.setSizeResizable()}}),vc.PostSettingsUIPanelBackendEditor=vc.PostSettingsPanelViewBackendEditor.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewResizable).vcExtendUI(vc.HelperPanelViewDraggable).vcExtendUI({uiEvents:{setSize:"setEditorSize",show:"setEditorSize",render:"removeChangeTitleField"},setSize:function(){this.trigger("setSize")},setEditorSize:function(){this.editor.setSizeResizable()},setDefaultHeightSettings:function(){this.$el.css("height","75vh")},removeChangeTitleField:function(){$("#vc_settings-title-container").remove()}})}(window.jQuery),function(){"use strict";var e={'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity",'click [data-vc-ui-element="button-layout"]':"setLayout",'click [data-vc-ui-element="button-update-layout"]':"updateFromInput"};vc.RowLayoutUIPanelFrontendEditor=vc.RowLayoutEditorPanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e}),vc.RowLayoutUIPanelBackendEditor=vc.RowLayoutEditorPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperPanelViewDraggable).extend({panelName:"rowLayouts",events:e})}(window.jQuery),function($){"use strict";window.vc.PresetSettingsUIPanelFrontendEditor=vc.PanelView.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperAjax).vcExtendUI({panelName:"preset_settings",showMessageDisabled:!1,events:{'click [data-vc-ui-delete="preset-title"]':"removePreset",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","click [data-vc-ui-add-preset]":"createPreset"},initialize:function(e){this.frontEnd=e&&e.frontEnd},createPreset:function(e){var t,i,n,a,o,s,c,r,l;_.isUndefined(vc.ShortcodesBuilder)||(this.builder=new vc.ShortcodesBuilder),a=(n=$(e.currentTarget)).data("preset"),o=n.data("tag"),r={width:"1/1"},l={shortcode:"vc_row",params:{}},this.frontEnd?(this.builder.create(l),i={shortcode:"vc_column",params:r,parent_id:this.builder.lastID()},this.builder.create(i),t={shortcode:o,parent_id:this.builder.lastID()},a&&(t.preset=a),window.vc.closeActivePanel(),this.builder.create(t),this.model=this.builder.last(),this.builder.render()):(i={shortcode:"vc_column",params:r,parent_id:(s=vc.shortcodes.create(l)).id,root_id:s.id},t={shortcode:o,parent_id:vc.shortcodes.create(i).id,root_id:s.id},a&&(t.preset=a),c=vc.shortcodes.create(t),window.vc.closeActivePanel(),this.model=c),_.isBoolean(vc.getMapped(o).show_settings_on_create)&&!1===vc.getMapped(o).show_settings_on_create||this.showEditForm()},showEditForm:function(){window.vc.edit_element_block_view.render(this.model)},render:function(){return this.$el.css("left",($(window).width()-this.$el.width())/2),this},removePreset:function(e){e&&e.preventDefault&&e.preventDefault();var t=jQuery(e.currentTarget).closest('[data-vc-ui-delete="preset-title"]'),i=t.data("preset"),n=t.data("preset-parent");this.deleteSettings(i,n,e)},deleteSettings:function(e,t){var i=this;return!!confirm(window.i18nLocale.delete_preset_confirmation)&&(this.checkAjax(),this.ajax=$.ajax({type:"POST",dataType:"json",url:window.ajaxurl,data:this.deleteSettingsAjaxData(t,e),context:this}).done((function(t){t&&t.success&&(this.showMessage(window.i18nLocale.preset_removed,"success"),i.$el.find('[data-preset="'+e+'"]').closest(".vc_ui-template").remove(),window.vc.events.trigger("vc:deletePreset",e))})).always(this.resetAjax),this.ajax)},deleteSettingsAjaxData:function(e,t){return{action:"vc_action_delete_settings_preset",shortcode_name:e,vc_inline:!0,id:t,_vcnonce:window.vcAdminNonce}},showMessage:function(e,t){if(this.showMessageDisabled)return!1;this.message_box_timeout&&(this.$el.find("[data-vc-panel-message]").remove(),window.clearTimeout(this.message_box_timeout)),this.message_box_timeout=!1;var i,n=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(t){case"error":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"danger",icon:"times",text:e}));break;case"warning":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"warning",icon:"exclamation-triangle",text:e}));break;case"success":i=$('<div class="vc_col-xs-12 wpb_element_wrapper" data-vc-panel-message>').html(n({color:"success",icon:"check",text:e}))}i.prependTo(this.$el.find(".vc_properties-list")),i.fadeIn(),this.message_box_timeout=window.setTimeout((function(){i.remove()}),6e3)}})}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),_.extend(vc,{no_title_placeholder:window.i18nLocale.no_title_parenthesis,responsive_disabled:!1,activity:!1,clone_index:1,loaded:!1,path:"",admin_ajax:window.ajaxurl,filters:{templates:[]},title:"",$title:!1,update_title:!1,$hold_active:!1,data_changed:!1,setDataChanged:function(){if(vc.undoRedoApi){var e=this;_.defer((function(){e.addUndo(vc.builder.getContent())}))}window.jQuery(window).bind("beforeunload.vcSave",(function(e){return window.i18nLocale.confirm_to_leave})),this.data_changed=!0},addUndo:_.debounce((function(e){vc.undoRedoApi.add(e)}),100),unsetDataChanged:function(){window.jQuery(window).unbind("beforeunload.vcSave"),this.data_changed=!1},addTemplateFilter:function(e){_.isFunction(e)&&this.filters.templates.push(e)},unsetHoldActive:function(){this.$hold_active&&(this.$hold_active.removeClass("vc_hold-active"),this.$hold_active=!1)}}),function($){"use strict";vc.map={},vc.setFrameSize=function(e){var t=$("#vc_navbar"),i=$(window).height()-t.height();vc.$frame.width(e),vc.$frame_wrapper.css({top:t.height()}),vc.$frame.height(i)},vc.getDefaults=vc.memoizeWrapper((function(e){var t,i;return t={},i=_.isArray(vc.getMapped(e).params)?vc.getMapped(e).params:[],_.each(i,(function(e){_.isObject(e)&&(_.isUndefined(e.std)?vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isUndefined(e.value)||(!_.isObject(e.value)||_.isArray(e.value)||_.isString(e.value)?_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value:t[e.param_name]=_.values(e.value)[0]):t[e.param_name]=e.std)})),t})),vc.getDefaultsAndDependencyMap=vc.memoizeWrapper((function(e){var t,i,n;return i={},t={},n=_.isArray(vc.getMapped(e).params)?vc.getMapped(e).params:[],_.each(n,(function(e){_.isObject(e)&&"content"!==e.param_name&&(_.isUndefined(e.std)?_.isUndefined(e.value)||(vc.atts[e.type]&&vc.atts[e.type].defaults?t[e.param_name]=vc.atts[e.type].defaults(e):_.isObject(e.value)?t[e.param_name]=_.values(e.value)[0]:_.isArray(e.value)?t[e.param_name]=e.value[0]:t[e.param_name]=e.value):t[e.param_name]=e.std,_.isUndefined(e.dependency)||_.isUndefined(e.dependency.element)||(i[e.param_name]=e.dependency))})),{defaults:t,dependencyMap:i}})),vc.getMergedParams=function(e,t){var i,n,a;return i=vc.getDefaultsAndDependencyMap(e),n={},t=_.extend({},i.defaults,t),a=_.extend({},i.dependencyMap),_.each(t,(function(o,s){if("content"!==s){var c;if(!_.isUndefined(a[s])){if(!_.isUndefined(a[a[s].element])&&_.isBoolean(a[a[s].element].failed)&&!0===a[a[s].element].failed)return void(a[s].failed=!0);var r,l,d,v;d=a[s].element;var h=!1;if("string"==typeof(v=t[d])&&(h=t[d].split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),l=_.isEmpty(v),r=_.omit(a[s],"element"),_.isBoolean(r.not_empty)&&!0===r.not_empty&&l||_.isBoolean(r.is_empty)&&!0===r.is_empty&&!l||r.value&&!_.intersection(_.isArray(r.value)?r.value:[r.value],_.isArray(v)?v:[v]).length&&h&&r.value&&!_.intersection(_.isArray(r.value)?r.value:[r.value],_.isArray(h)?h:[h]).length||r.value_not_equal_to&&_.intersection(_.isArray(r.value_not_equal_to)?r.value_not_equal_to:[r.value_not_equal_to],_.isArray(v)?v:[v]).length&&h&&r.value_not_equal_to&&_.intersection(_.isArray(r.value_not_equal_to)?r.value_not_equal_to:[r.value_not_equal_to],_.isArray(h)?h:[h]).length)return void(a[s].failed=!0)}c=vc.getParamSettings(e,s),(_.isUndefined(c)||!_.isUndefined(i.defaults[s])&&i.defaults[s]!==o||_.isUndefined(i.defaults[s])&&""!==o||!_.isUndefined(c.save_always)&&!0===c.save_always)&&(n[s]=o)}})),n},vc.getParamSettings=vc.memoizeWrapper((function(e,t){var i;return i=_.isArray(vc.getMapped(e).params)?vc.getMapped(e).params:[],_.find(i,(function(e){return _.isObject(e)&&e.param_name===t}),this)}),(function(){return arguments[0]+","+arguments[1]})),vc.getParamSettingsByType=vc.memoizeWrapper((function(e,t){var i;return i=_.isArray(vc.getMapped(e).params)?vc.getMapped(e).params:[],_.find(i,(function(e){return _.isObject(e)&&e.type===t}),this)}),(function(){return arguments[0]+","+arguments[1]})),vc.shortcodeHasIdParam=vc.memoizeWrapper((function(e){return vc.getParamSettingsByType(e,"el_id")})),vc.buildRelevance=function(){vc.shortcode_relevance={},_.each(vc.map,(function(e){_.isObject(e.as_parent)&&_.isString(e.as_parent.only)&&(vc.shortcode_relevance["parent_only_"+e.base]=e.as_parent.only.replace(/\s/,"").split(",")),_.isObject(e.as_parent)&&_.isString(e.as_parent.except)&&(vc.shortcode_relevance["parent_except_"+e.base]=e.as_parent.except.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.only)&&(vc.shortcode_relevance["child_only_"+e.base]=e.as_child.only.replace(/\s/,"").split(",")),_.isObject(e.as_child)&&_.isString(e.as_child.except)&&(vc.shortcode_relevance["child_except_"+e.base]=e.as_child.except.replace(/\s/,"").split(","))})),vc.checkRelevance=function(e,t){return!(_.isArray(vc.shortcode_relevance["parent_only_"+e])&&!_.contains(vc.shortcode_relevance["parent_only_"+e],t)||_.isArray(vc.shortcode_relevance["parent_except_"+e])&&_.contains(vc.shortcode_relevance["parent_except_"+e],t)||_.isArray(vc.shortcode_relevance["child_only_"+t])&&!_.contains(vc.shortcode_relevance["child_only_"+t],e)||_.isArray(vc.shortcode_relevance["child_except_"+t])&&_.contains(vc.shortcode_relevance["child_except"+t],e))}},vc.CloneModel=function(e,t,i,n){var a,o,s,c,r;return vc.clone_index/=10,a=_.isBoolean(n)&&!0===n?t.get("order"):parseFloat(t.get("order"))+vc.clone_index,o=_.extend({},t.get("params")),c={shortcode:s=t.get("shortcode"),parent_id:i,order:a,cloned:!0,cloned_from:t.toJSON(),params:o},vc["cloneMethod_"+s]&&(c=vc["cloneMethod_"+s](c,t)),_.isBoolean(n)&&!0===n||(c.place_after_id=t.get("id")),e.create(c),r=e.last(),_.each(vc.shortcodes.where({parent_id:t.get("id")}),(function(t){vc.CloneModel(e,t,r.get("id"),!0)}),this),r},vc.getColumnSize=function(e){var t,i=12%e;return 0<i&&(t=e,_.isNumber(t)&&1==t%2)&&e%3?e+"/12":(0===i&&(i=e),e/i+"/"+12/i)},vc.showMessage=function(e){vc.message_timeout&&($(".vc_message").remove(),window.clearTimeout(vc.message_timeout));var t=$('<div class="vc_message success" style="z-index: 999;">'+e+"</div>").prependTo($("body"));t.fadeIn(500),vc.message_timeout=window.setTimeout((function(){t.slideUp(500,(function(){$(this).remove()})),vc.message_timeout=!1}),5500)},window.InlineShortcodeView=vc.shortcode_view=Backbone.View.extend({hold_hover_on:!1,events:{"click > .vc_controls .vc_control-btn-delete":"destroy","click > .vc_controls .vc_control-btn-edit":"edit","click > .vc_controls .vc_control-btn-clone":"clone",mousemove:"checkControlsPosition"},controls_set:!1,$content:!1,move_timeout:!1,out_timeout:!1,hold_active:!0,builder:!1,default_controls_template:!1,initialize:function(){this.listenTo(this.model,"destroy",this.removeView),this.listenTo(this.model,"change:params",this.update),this.listenTo(this.model,"change:parent_id",this.changeParentId)},render:function(){this.$el.attr("data-model-id",this.model.get("id"));var e=this.model.get("shortcode");return this.$el.attr("data-tag",e),this.$el.addClass("vc_"+e),this.addControls(),_.isObject(vc.getMapped(e))&&(_.isBoolean(vc.getMapped(e).is_container)&&!0===vc.getMapped(e).is_container||!_.isEmpty(vc.getMapped(e).as_parent))&&this.$el.addClass("vc_container-block"),this.changed(),this},checkControlsPosition:function(){if(this.$controls_buttons){var e,t,i=this.$el.height();vc.$frame.height()<i&&(e=$(vc.frame_window).scrollTop(),this.$controls_buttons.offset().top,40<(t=e-this.$el.offset().top+vc.$frame.height()/2)&&t<i?this.$controls_buttons.css("top",t):i<t?this.$controls_buttons.css("top",i-40):this.$controls_buttons.css("top",40))}},beforeUpdate:function(){},updated:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.view.parent_view=this,e.view.parentChanged()}),this),_.defer(_.bind((function(){vc.events.trigger("shortcodeView:updated",this.model),vc.events.trigger("shortcodeView:updated:"+this.model.get("shortcode"),this.model),vc.events.trigger("shortcodeView:updated:"+this.model.get("id"),this.model)}),this))},parentChanged:function(){this.checkControlsPosition()},rendered:function(){_.defer(_.bind((function(){vc.events.trigger("shortcodeView:ready",this.model),vc.events.trigger("shortcodeView:ready:"+this.model.get("shortcode"),this.model),vc.events.trigger("shortcodeView:ready:"+this.model.get("id"),this.model)}),this))},hasUserAccess:function(){return!0},addControls:function(){var e,t,i,n,a,o,s,c;e=this.model.get("shortcode"),t=$("#vc_controls-template-"+e),i=vc_user_access().shortcodeAll(e),n=vc_user_access().shortcodeEdit(e),a=vc_user_access().partAccess("dragndrop"),o=t.length?t.html():this._getDefaultTemplate(),s=vc.shortcodes.get(this.model.get("parent_id")),c={name:vc.getMapped(e).name,icon:vc.getMapped(e).icon,tag:e,parent_name:s?vc.getMapped(s.get("shortcode")).name:"",parent_icon:s?vc.getMapped(s.get("shortcode")).icon:"",parent_tag:s?s.get("shortcode"):"",can_edit:n,can_all:i,moveAccess:a,state:vc_user_access().getState("shortcodes"),allowAdd:null};var r=vc.template(_.unescape(o),_.extend({},vc.templateOptions.custom,{evaluate:/\{#([\s\S]+?)#}/g}));this.$controls=$(r(c).trim()).addClass("vc_controls"),this.$controls.appendTo(this.$el),this.$controls_buttons=this.$controls.find("> :first")},content:function(){return!1===this.$content&&(this.$content=this.$el.find("> :first")),this.$content},changeParentId:function(){var e,t=this.model.get("parent_id");vc.builder.notifyParent(this.model.get("parent_id")),!1===t?this.placeElement(this.$el):(e=vc.shortcodes.get(t))&&e.view&&e.view.placeElement(this.$el),this.parentChanged()},_getDefaultTemplate:function(){if(_.isUndefined(this.default_controls_template)||!this.default_controls_template){this.default_controls_template=$("<div><div>").html($("#vc_controls-template-default").html());var e=this.$el.data("shortcode-controls");_.isUndefined(e)||$(".vc_control-btn[data-control]",this.default_controls_template).each((function(){-1==$.inArray($(this).data("control"),e)&&$(this).remove()}))}return this.default_controls_template.html()},changed:function(){this.$el.removeClass("vc_empty-shortcode-element"),this.$el.height()<5&&this.$el.addClass("vc_empty-shortcode-element")},edit:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),"edit_element"===vc.activePanelName()&&vc.active_panel.model&&vc.active_panel.model.get("id")===this.model.get("id")||(vc.closeActivePanel(),vc.edit_element_block_view.render(this.model))},destroy:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),vc.showMessage(window.sprintf(window.i18nLocale.inline_element_deleted,this.model.setting("name"))),this.model.destroy()},removeView:function(e){this.remove(),vc.setDataChanged(),vc.builder.notifyParent(this.model.get("parent_id")),vc.sidebar_active&&vc.active_panel.model&&vc.active_panel.model.get("id")===e.get("id")&&vc.add_element_block_view.render(!1),vc.closeActivePanel(e),vc.setFrameSize()},update:function(e){this.beforeUpdate(),vc.builder.update(e||this.model)},clone:function(e){var t,i=new vc.ShortcodesBuilder;if(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.builder&&!this.builder.is_build_complete)return!1;this.builder=i,t=vc.CloneModel(i,this.model,this.model.get("parent_id")),i.setResultMessage(window.sprintf(window.i18nLocale.inline_element_cloned,t.setting("name"),t.get("id"))),i.render()},getParam:function(e){
return _.isObject(this.model.get("params"))&&!_.isUndefined(this.model.get("params")[e])?this.model.get("params")[e]:null},placeElement:function(e,t){var i=vc.shortcodes.get(e.data("modelId"));i&&i.get("place_after_id")?(e.insertAfter(vc.$page.find("[data-model-id="+i.get("place_after_id")+"]")),i.unset("place_after_id")):_.isString(t)&&"prepend"===t?e.prependTo(this.content()):e.appendTo(this.content()),this.changed()}}),vc.FrameView=Backbone.View.extend({events:{'click [data-vc-element="add-element-action"]':"addElement","click #vc_no-content-add-text-block":"addTextBlock","click #vc_templates-more-layouts":"openTemplatesWindow","click #vc_templates-more-layouts-ne":"openTemplatesWindow","click #vc_templates-more-pages":"openTemplatesWindow","click #vc_pages-editor-button":"openPagesTemplatesWindow","click .vc_template[data-template_id] > .wpb_wrapper":"loadDefaultTemplate"},openTemplatesWindow:function(e){vc.templates_panel_view.once("show",(function(){$('[data-vc-ui-element-target="[data-tab=default_templates]"]').click()})),vc.app.openTemplatesWindow.call(this,e)},openPagesTemplatesWindow:function(e){vc.app.openPagesTemplatesWindow.call(this,e)},updateKeyPress:function(e){if(13===e.which)return e&&e.preventDefault&&e.preventDefault(),vc.$title.attr("contenteditable",!1),$(".entry-content").trigger("click"),!1},loadDefaultTemplate:function(e){e&&e.preventDefault&&e.preventDefault(),vc.templates_panel_view.loadTemplate(e),$("#vc_no-content-helper").remove()},setTitle:function(e){vc.$title.length&&vc.$title.text(e||vc.no_title_placeholder),vc.title=e,vc.update_title=!0},initialize:function(){vc.frame_window=vc.$frame.get(0).contentWindow},setActiveHover:function(e){this.$hover_element&&this.$hover_element.removeClass("vc_hover"),this.$hover_element=$(e.currentTarget).addClass("vc_hover"),e.stopPropagation()},unsetActiveHover:function(e){this.$hover_element&&this.$hover_element.removeClass("vc_hover")},setSortable:function(){vc.frame_window.vc_iframe.setSortable(vc.app)},render:function(){return!1!==vc_user_access().getState("post_settings")&&(vc.$title=$(vc.$frame.get(0).contentWindow.document).find('h1:contains("'+(vc.title||vc.no_title_placeholder).replace(/"/g,'\\"')+'")'),vc.$title.on("click",(function(e){e.preventDefault(),vc.post_settings_view.render().show()}))),this},noContent:function(e){vc.frame_window.vc_iframe.showNoContent(e)},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),vc.add_element_block_view.render(!1)},addTextBlock:function(e){var t,i,n,a;e&&e.preventDefault&&e.preventDefault(),i={},n={width:"1/1"},a=vc.getDefaults("vc_column_text"),(t=new vc.ShortcodesBuilder).create({shortcode:"vc_row",params:i}).create({shortcode:"vc_column",parent_id:t.lastID(),params:n}).create({shortcode:"vc_column_text",parent_id:t.lastID(),params:a}).render(),vc.edit_element_block_view.render(t.last())},scrollTo:function(e){vc.frame_window.vc_iframe.scrollTo(e.get("id"))},addInlineScript:function(e){return vc.frame_window.vc_iframe.addInlineScript(e)},addInlineScriptBody:function(e){return vc.frame_window.vc_iframe.addInlineScriptBody(e)}}),vc.View=Backbone.View.extend({el:$("body"),mode:"view",current_size:"100%",events:{"click #vc_add-new-row":"createRow","click #vc_add-new-element":"addElement","click #vc_post-settings-button":"editSettings","click #vc_templates-editor-button":"openTemplatesWindow","click #vc_pages-editor-button":"openPagesTemplatesWindow","click #vc_guides-toggle-button":"toggleMode","click #vc_button-cancel":"cancel","click #vc_button-edit-admin":"cancel","click #vc_button-update":"save","click #vc_button-save-draft, #vc_button-save-as-pending":"save","click .vc_screen-width":"resizeFrame","click .vc_edit-cloned":"editCloned","click [data-vc-manage-elements]":"openPresetWindow","click .lqd-switch-lightdark":"switchLightDark","click .lqd-switch-sidebar, [data-vc-ui-element=button-switch_sidebar]":"switchSidebar"},initialize:function(){_.bindAll(this,"saveRowOrder","saveElementOrder","saveColumnOrder","resizeWindow","switchSidebar","checkSidebar","checkDarkMode"),vc.shortcodes.on("change:params",this.changeParamsEvents,this),vc.events.on("shortcodes:add shortcodes:vc_section",vcAddShortcodeDefaultParams,this),vc.events.on("shortcodes:add",vc.atts.addShortcodeIdParam,this),_.defer((()=>{this.checkDarkMode(),this.checkSidebar()}))},changeParamsEvents:function(e){vc.events.triggerShortcodeEvents("update",e)},render:function(){return vc.updateSettingsBadge(),vc.$page=$(vc.$frame.get(0).contentWindow.document).find("#vc_inline-anchor").parent(),vc.$frame_body=$(vc.$frame.get(0).contentWindow.document).find("body").addClass("vc_editor"),this.setMode("compose"),this.$size_control=$("#vc_screen-size-control"),$(".vc_element-container",vc.frame_window.document).droppable({accept:".vc_element_button"}),$(window).resize(this.resizeWindow),_.defer((function(){vc.events.trigger("app.render")})),this},cancel:function(e){e&&e.preventDefault&&e.preventDefault(),window.location.href=$(e.currentTarget).data("url")},save:function(e){e&&e.preventDefault&&e.preventDefault(),vc.builder.save($(e.currentTarget).data("changeStatus"))},resizeFrame:function(e){var t=$(e.currentTarget);if(e&&e.preventDefault&&e.preventDefault(),t.hasClass("active"))return!1;this.$size_control.find(".active").removeClass("active"),$("#vc_screen-size-current").attr("class","vc_current-layout-icon "+t.attr("class")),this.current_size=t.data("size"),t.addClass("active"),vc.setFrameSize(this.current_size)},editCloned:function(e){var t,i;e&&e.preventDefault&&e.preventDefault(),t=$(e.currentTarget).data("modelId"),i=vc.shortcodes.get(t),vc.edit_element_block_view.render(i)},resizeWindow:function(){vc.setFrameSize(this.current_size)},switchMode:function(e){var t=$(e.currentTarget);e&&e.preventDefault&&e.preventDefault(),this.setMode(t.data("mode")),t.siblings(".vc_active").removeClass("vc_active"),t.addClass("vc_active")},toggleMode:function(e){var t=$(e.currentTarget);e&&e.preventDefault&&e.preventDefault(),"compose"===this.mode?(t.addClass("vc_off"),this.setMode("view")):(t.removeClass("vc_off"),this.setMode("compose"))},setMode:function(e){var t=$("body").removeClass(this.mode+"-mode");vc.$frame_body.removeClass(this.mode+"-mode"),this.mode=e,t.addClass(this.mode+"-mode"),vc.$frame_body.addClass(this.mode+"-mode")},placeElement:function(e,t){var i=vc.shortcodes.get(e.data("modelId"));i&&i.get("place_after_id")?(e.insertAfter(vc.$page.find("[data-model-id="+i.get("place_after_id")+"]")),i.unset("place_after_id")):_.isString(t)&&"prepend"===t?e.prependTo(vc.$page):e.insertBefore(vc.$page.find("#vc_no-content-helper"))},addShortcodes:function(e){_.each(e,(function(e){this.addShortcode(e),this.addShortcodes(vc.shortcodes.where({parent_id:e.get("id")}))}),this)},createShortcodeHtml:function(e){var t=$("#vc_template-"+e.get("shortcode")),i=t.length?t.html():'<div class="vc_block"></div>',n=vc.template(i,vc.templateOptions.custom);return $(n(e.toJSON()).trim())},addAll:function(e){this.addShortcodes(e.where({parent_id:!1}))},createRow:function(e){e&&e.preventDefault&&e.preventDefault();var t,i,n=new vc.ShortcodesBuilder;t={},i={width:"1/1"},n.create({shortcode:"vc_row",params:t}).create({shortcode:"vc_column",parent_id:n.lastID(),params:i}).render()},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),vc.add_element_block_view.render(!1)},editSettings:function(e){e&&e.preventDefault&&e.preventDefault(),vc.post_settings_view.render().show()},openTemplatesEditor:function(e){e&&e.preventDefault&&e.preventDefault(),vc.templates_editor_view.render().show()},openTemplatesWindow:function(e){e&&e.preventDefault&&e.preventDefault(),vc.templates_panel_view.render().show()},openPagesTemplatesWindow:function(e){e&&e.preventDefault&&e.preventDefault(),vc.pages_templates_panel_view.render().show()},setFrameSize:function(){vc.setFrameSize()},saveRowOrder:function(e,t){_.defer((function(e){var i,n,a,o,s;i=$(t.item.parent()),o=i.find("> [data-tag=vc_row],> [data-tag=vc_section]"),s=new vc.ShortcodesBuilder,o.each((function(e,t){var c;if((c=$(this)).is(".droppable")){n={},a={width:"1/1"},c.remove();var r={shortcode:"vc_row",params:n,order:e};0===e?vc.activity="prepend":e+1!==o.length&&(r.place_after_id=vc.$page.find("> [data-tag=vc_row]:eq("+(e-1)+")").data("modelId")),s.create(r).create({shortcode:"vc_column",parent_id:s.lastID(),params:a}).render()}else{var l=vc.shortcodes.get(c.data("modelId")),d=l.get("parent_id"),v=i.closest(".vc_element").data("modelId")||!1;l.save({order:e,parent_id:v},{silent:!0}),d!==v&&(vc.builder.notifyParent(v),vc.builder.notifyParent(d))}})),vc.setDataChanged()}),this)},saveElementOrder:function(e,t){_.defer((function(e,t,i){var n,a;_.isNull(i.sender)&&(n=i.item.parent(),a=n.find("> [data-model-id]"),n.find("> [data-model-id]").each((function(e,t){var i,o,s,c,r;r=!1,(i=$(this)).is(".droppable")?(c=vc.shortcodes.get(n.parents(".vc_element[data-tag]:first").data("modelId")),i.remove(),0===e?r=!0:e+1!==a.length&&(r=n.find("> [data-tag]:eq("+(e-1)+")").data("modelId")),c&&vc.add_element_block_view.render(c,r)):(s=(o=vc.shortcodes.get(i.data("modelId"))).get("parent_id"),c=n.parents(".vc_element[data-tag]:first").data("modelId"),o.save({order:e,parent_id:c},{silent:!0}),s!==c&&(vc.builder.notifyParent(c),vc.builder.notifyParent(s)))}))),vc.setDataChanged()}),this,e,t)},saveColumnOrder:function(e,t){_.defer((function(e,t,i){i.item.parent().find("> [data-model-id]").each((function(){var e,t;t=(e=$(this)).index(),vc.shortcodes.get(e.data("modelId")).save({order:t})}))}),this,e,t),vc.setDataChanged()},openPresetWindow:function(e){e&&e.preventDefault&&e.preventDefault(),vc.preset_panel_view.render().show()},checkDarkMode:function(){"yes"===localStorage.getItem("lqd-dark-mode")&&document.documentElement.classList.add("lqd-dark-mode")},checkSidebar:function(){"yes"===localStorage.getItem("lqd-sidebar-active")&&(document.documentElement.classList.add("lqd-sidebar-active"),vc.add_element_block_view.render(!1),vc.sidebar_active=!0,$(document).trigger("lqd-sidebar-active"))},switchSidebar:function(e){e&&e.preventDefault&&e.preventDefault(),document.documentElement.classList.toggle("lqd-sidebar-active"),localStorage.setItem("lqd-sidebar-active","yes"===localStorage.getItem("lqd-sidebar-active")?"no":"yes"),vc.sidebar_active=!vc.sidebar_active,vc.sidebar_active&&!vc.active_panel?vc.add_element_block_view.render(!1):vc.sidebar_active||"edit_element"===vc.activePanelName()||vc.closeActivePanel(),$(document).trigger("lqd-sidebar-active")},switchLightDark:function(e){e&&e.preventDefault&&e.preventDefault(),document.documentElement.classList.toggle("lqd-dark-mode"),localStorage.setItem("lqd-dark-mode","yes"===localStorage.getItem("lqd-dark-mode")?"no":"yes")}})}(window.jQuery),function(){"use strict";_.isUndefined(window.vc)&&(window.vc={}),vc.addTemplateFilter((function(e){var t=VCS4()+"-"+VCS4();return e.replace(/tab\_id\=\"([^\"]+)\"/g,'tab_id="$1'+t+'"')}))}(window.jQuery),function($){"use strict";window.vc.events.on("shortcodeView:updated",(function(e){var t;!0===(vc.map[e.get("shortcode")]||!1).is_container&&(t=e.get("id"),window.vc.frame_window.vc_iframe.updateChildGrids(t))})),window.InlineShortcodeViewContainer=window.InlineShortcodeView.extend({controls_selector:"#vc_controls-template-container",events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls","click > .vc_empty-element":"appendElement",mouseenter:"resetActive",mouseleave:"holdActive"},hold_active:!1,parent_view:!1,initialize:function(e){_.bindAll(this,"holdActive"),window.InlineShortcodeViewContainer.__super__.initialize.call(this,e),this.model.get("parent_id")&&(this.parent_view=vc.shortcodes.get(this.model.get("parent_id")).view)},resetActive:function(e){this.hold_active&&window.clearTimeout(this.hold_active)},holdActive:function(e){this.resetActive(),this.$el.addClass("vc_hold-active");var t=this;this.hold_active=window.setTimeout((function(){t.hold_active&&window.clearTimeout(t.hold_active),t.hold_active=!1,t.$el.removeClass("vc_hold-active")}),700)},content:function(){return!1===this.$content&&(this.$content=this.$el.find(".vc_container-anchor:first").parent(),this.$el.find(".vc_container-anchor:first").remove()),this.$content},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),this.content().addClass("vc_element-container"),this.$el.addClass("vc_container-block"),this},changed:function(){this.allowAddControlOnEmpty()&&(0===this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find("> :first").addClass("vc_empty-element"):this.$el.removeClass("vc_empty").find("> .vc_empty-element").removeClass("vc_empty-element"))},prependElement:function(e){e&&e.preventDefault&&e.preventDefault(),this.prepend=!0,window.vc.add_element_block_view.render(this.model,!0)},appendElement:function(e){e&&e.preventDefault&&e.preventDefault(),window.vc.add_element_block_view.render(this.model)},addControls:function(){var e,t,i,n,a,o,s,c,r,l,d,v,h;e=this.model.get("shortcode"),c=$(this.controls_selector).html(),(r=vc.shortcodes.get(this.model.get("parent_id")))&&(d=vc.getMapped(r.get("shortcode")).name,v=vc.getMapped(r.get("shortcode")).icon,t=r.get("shortcode")),i=vc_user_access().shortcodeAll(e),a=vc_user_access().shortcodeEdit(e),o=vc_user_access().shortcodeAll(t),s=vc_user_access().shortcodeEdit(t),n=vc_user_access().partAccess("dragndrop"),h=vc.getMapped(e).icon,l={name:vc.getMapped(e).name,icon:h,tag:e,parent_name:d,parent_icon:v||h,parent_tag:t,can_edit:a,can_all:i,moveAccess:n,parent_can_edit:s,parent_can_all:o,state:vc_user_access().getState("shortcodes"),allowAdd:this.allowAddControl(),switcherPrefix:o&&i?"":"-disable-switcher"};var p=vc.template(_.unescape(c),_.extend({},vc.templateOptions.custom,{evaluate:/\{#([\s\S]+?)#}/g}));this.$controls=$(p(l).trim()).addClass("vc_controls"),this.$controls.appendTo(this.$el)},allowAddControl:function(){return"edit"!==vc_user_access().getState("shortcodes")},multi_edit:function(e){var t,i,n=[];e&&e.preventDefault&&e.preventDefault(),this.model.get("parent_id")&&(t=vc.shortcodes.get(this.model.get("parent_id"))),t?(n.push(t),i=vc.shortcodes.where({parent_id:t.get("id")}),window.vc.multi_edit_element_block_view.render(n.concat(i),this.model.get("id"))):window.vc.edit_element_block_view.render(this.model)},allowAddControlOnEmpty:function(){return"edit"!==vc_user_access().getState("shortcodes")},switchControls:function(e){var t,i;e&&e.preventDefault&&e.preventDefault(),vc.unsetHoldActive(),(t=$(e.currentTarget).parent()).toggleClass("vc_active"),(i=t.siblings(".vc_active")).removeClass("vc_active"),i.hasClass("vc_element")||window.setTimeout(this.holdActive,500)}})}(window.jQuery),function($){"use strict";window.InlineShortcodeViewContainerWithParent=window.InlineShortcodeViewContainer.extend({controls_selector:"#vc_controls-template-container-with-parent",events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_controls .vc_parent .vc_control-btn-delete":"destroyParent","click > .vc_controls .vc_parent .vc_control-btn-edit":"editParent","click > .vc_controls .vc_parent .vc_control-btn-clone":"cloneParent","click > .vc_controls .vc_parent .vc_control-btn-prepend":"addSibling","click > .vc_controls .vc_parent .vc_control-btn-layout":"changeLayout","click > .vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},destroyParent:function(e){e&&e.preventDefault&&e.preventDefault(),this.parent_view.destroy(e)},cloneParent:function(e){e&&e.preventDefault&&e.preventDefault(),this.parent_view.clone(e)},editParent:function(e){e&&e.preventDefault&&e.preventDefault(),this.parent_view.edit(e)},addSibling:function(e){e&&e.preventDefault&&e.preventDefault(),this.parent_view.addElement(e)},changeLayout:function(e){e&&e.preventDefault&&e.preventDefault(),this.parent_view.changeLayout(e)}})}(window.jQuery),function($){"use strict";window.InlineShortcodeView_vc_section=window.InlineShortcodeViewContainer.extend({controls_selector:"#vc_controls-template-container",initialize:function(){_.bindAll(this,"checkSectionWidth"),window.InlineShortcodeView_vc_section.__super__.initialize.call(this),vc.frame_window.jQuery(vc.frame_window.document).off("vc-full-width-row-single",this.checkSectionWidth),vc.frame_window.jQuery(vc.frame_window.document).on("vc-full-width-row-single",this.checkSectionWidth)},checkSectionWidth:function(e,t){t.el.hasClass("vc_section")&&t.el.attr("data-vc-stretch-content")&&t.el.siblings(".vc_controls").find(".vc_controls-out-tl").css({left:t.offset-17})},render:function(){var e=this.content();return e&&e.hasClass("vc_row-has-fill")&&(e.removeClass("vc_row-has-fill"),this.$el.addClass("vc_row-has-fill")),window.InlineShortcodeView_vc_section.__super__.render.call(this)}})}(window.jQuery),function($){"use strict";window.InlineShortcodeView_vc_row=window.InlineShortcodeView.extend({column_tag:"vc_column",events:{mouseenter:"removeHoldActive"},layout:1,addControls:function(){return this.$controls=$('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},render:function(){var e=this.content();return e&&e.hasClass("vc_row-has-fill")&&(e.removeClass("vc_row-has-fill"),this.$el.addClass("vc_row-has-fill")),window.InlineShortcodeView_vc_row.__super__.render.call(this),vc.frame_window.jQuery("body").hasClass("pp-enabled")&&_.defer((()=>{this.reInitLiquidStack()})),this},removeHoldActive:function(){vc.unsetHoldActive()},addColumn:function(){vc.builder.create({shortcode:this.column_tag,parent_id:this.model.get("id")}).render()},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),this.addColumn()},changeLayout:function(e){e&&e.preventDefault&&e.preventDefault(),this.layoutEditor().render(this.model).show()},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelFrontendEditor({el:$("#vc_ui-panel-row-layout")})),vc.row_layout_editor},convertToWidthsArray:function(e){return _.map(e.split(/_/),(function(e){var t=e.split("");return t.splice(Math.floor(e.length/2),0,"/"),t.join("")}))},changed:function(){window.InlineShortcodeView_vc_row.__super__.changed.call(this),this.addLayoutClass()},updated:function(){window.InlineShortcodeView_vc_row.__super__.updated.call(this),vc.frame_window.jQuery("body").hasClass("pp-enabled")&&_.defer((()=>{this.reInitLiquidStack(!0)}))},content:function(){return!1===this.$content&&(this.$content=this.$el.find(".vc_container-anchor:first").parent()),this.$el.find(".vc_container-anchor:first").remove(),this.$content},addLayoutClass:function(){this.$el.removeClass("vc_layout_"+this.layout),this.layout=_.reject(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return e.get("deleted")})).length,this.$el.addClass("vc_layout_"+this.layout)},convertRowColumns:function(e,t){return!!e&&(a=[],o=this.convertToWidthsArray(e),vc.layout_change_shortcodes=[],vc.layout_old_columns=vc.shortcodes.where({parent_id:this.model.get("id")}),_.each(vc.layout_old_columns,(function(e){e.set("deleted",!0),a.push({shortcodes:vc.shortcodes.where({parent_id:e.get("id")}),params:e.get("params")})})),_.each(o,(function(e){var o=a.shift();_.isObject(o)?(n=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:_.extend({},o.params,{width:e})}).last(),_.each(o.shortcodes,(function(e){e.save({parent_id:n.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e)}),this)):(i={width:e},n=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:i}).last())}),this),_.each(a,(function(e){_.each(e.shortcodes,(function(e){e.save({parent_id:n.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}),this)}),this),t.render((function(){_.each(vc.layout_change_shortcodes,(function(e){e.trigger("change:parent_id"),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})),_.each(vc.layout_old_columns,(function(e){e.destroy()})),vc.layout_old_columns=[],vc.layout_change_shortcodes=[]})),o);var i,n,a,o},allowAddControl:function(){return"edit"!==vc_user_access().getState("shortcodes")},allowAddControlOnEmpty:function(){return"edit"!==vc_user_access().getState("shortcodes")},reInitLiquidStack:function(e){const $=vc.frame_window.jQuery,t=$("#lqd-site-content"),i=$("#lqd-contents-wrap",t),n=t.data("plugin_liquidStack");if(n){n.updateSections(i.children(".vc_vc_row"));const e=this.model.get("parent_id"),t=vc.shortcodes.where({parent_id:e}),a=_.findIndex(t,(e=>this.model===e));n.setActiveSection(a),n.activateNavDots(a)}}})}(window.jQuery),function($){"use strict";window.InlineShortcodeView_vc_column=window.InlineShortcodeViewContainerWithParent.extend({controls_selector:"#vc_controls-template-vc_column",resizeDomainName:"columnSize",_x:0,css_width:12,prepend:!1,$resizeBar:!1,initialize:function(e){window.InlineShortcodeView_vc_column.__super__.initialize.call(this,e),_.bindAll(this,"startChangeSize","stopChangeSize","resize")},render:function(){window.InlineShortcodeView_vc_column.__super__.render.call(this),this.prepend=!1,this.$resizeBar=$('<div class="vc_resize-bar"></div>').appendTo(this.$el).mousedown(this.startChangeSize);const e=this.model.get("params"),t=this.model.getParam("align"),i=this.model.getParam("responsive_align"),n=[];t&&""!==t&&(i?i.split(" ").forEach(((e,i)=>{let a=e;a.includes("text-xs-")&&(a=t),n.push(a)})):n.push(t),e.responsive_align=n.join(" "),this.model.save({params:e},{silent:!0}));const a=this.model.getParam("column_top_ontablet"),o=this.model.getParam("column_top_onmobile");return a&&"yes"===a&&this.$el?this.$el.addClass("lqd-column-top-ontablet").children().removeClass("lqd-column-top-ontablet"):this.$el.removeClass("lqd-column-top-ontablet"),o&&"yes"===o&&this.$el?this.$el.addClass("lqd-column-top-onmobile").children().removeClass("lqd-column-top-onmobile"):this.$el.removeClass("lqd-column-top-onmobile"),this.setColumnClasses(),this.customCssClassReplace(),this},destroy:function(e){var t=this.model.get("parent_id");window.InlineShortcodeView_vc_column.__super__.destroy.call(this,e),vc.shortcodes.where({parent_id:t}).length||vc.shortcodes.get(t).destroy()},customCssClassReplace:function(){var e,t,i;t=/.*(vc_custom_\d+).*/,(i=!(!(e=this.$el.find(".wpb_column").attr("class"))||!e.match)&&e.match(t))&&i[1]&&(this.$el.addClass(i[1]),this.$el.find(".wpb_column").attr("class",e.replace(i[1],"").trim()))},setColumnClasses:function(){var e,t,i;e=this.getParam("offset")||"",t=this.getParam("width")||"1/1",i=this.$el.find("> .wpb_column"),this.css_class_width=this.convertSize(t),this.css_class_width!==t&&(this.css_class_width=this.css_class_width.replace(/[^\d]/g,"")),i.removeClass("vc_col-sm-"+this.css_class_width),e.match(/vc_col\-sm\-\d+/)||this.$el.addClass("vc_col-sm-"+this.css_class_width),vc.responsive_disabled&&(e=e.replace(/vc_col\-(lg|md|xs)[^\s]*/g,"")),_.isEmpty(e)||(i.removeClass(e),this.$el.addClass(e));const n=this.getParam("responsive_align");n&&(i.removeClass("text-left text-center text-right"),i.addClass(n.split(" ")[0]))},startChangeSize:function(e){var t=this.getParam(t)||12;this._grid_step=this.parent_view.$el.width()/t,vc.frame_window.jQuery(this.$resizeBar).addClass("is-dragging"),vc.frame_window.jQuery("body").addClass("vc_column-dragging").disableSelection(),this._x=parseInt(e.pageX,10),vc.$page.bind("mousemove."+this.resizeDomainName,this.resize),$(vc.frame_window.document).on("mouseup",this.stopChangeSize)},stopChangeSize:function(){this._x=0,vc.frame_window.jQuery("body").removeClass("vc_column-dragging").enableSelection(),vc.frame_window.jQuery(this.$resizeBar).removeClass("is-dragging"),vc.$page.unbind("mousemove."+this.resizeDomainName)},resize:function(e){var t,i,n=this.model.get("params");i=e.pageX-this._x,Math.abs(i)<this._grid_step||(this._x=parseInt(e.pageX,10),t=""+this.css_class_width,0<i?this.css_class_width+=1:0>i&&(this.css_class_width-=1),12<this.css_class_width&&(this.css_class_width=12),1>this.css_class_width&&(this.css_class_width=1),n.width=vc.getColumnSize(this.css_class_width),this.model.save({params:n},{silent:!0}),this.$el.removeClass("vc_col-sm-"+t).addClass("vc_col-sm-"+this.css_class_width))},convertSize:function(e){var t,i,n,a,o;return t="vc_col-sm-",i=e?e.split("/"):[1,1],n=_.range(1,13),a=!_.isUndefined(i[0])&&0<=_.indexOf(n,parseInt(i[0],10))&&parseInt(i[0],10),o=!_.isUndefined(i[1])&&0<=_.indexOf(n,parseInt(i[1],10))&&parseInt(i[1],10),"5"===i[1]?e:!1!==a&&!1!==o?t+12*a/o:t+"12"},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_column")}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_row_inner=window.InlineShortcodeView_vc_row.extend({column_tag:"vc_column_inner"})}(),function(){"use strict";window.InlineShortcodeView_vc_column_inner=window.InlineShortcodeView_vc_column.extend({controls_selector:"#vc_controls-template-vc_column-inner"})}(),function(){"use strict";window.InlineShortcodeView_vc_column_text=window.InlineShortcodeView.extend({initialize:function(e){window.InlineShortcodeView_vc_column_text.__super__.initialize.call(this,e),_.bindAll(this,"setupEditor","updateContent")},setupEditor:function(e){e.on("keyup",this.updateContent)},updateContent:function(){var e=this.model.get("params");e.content=tinyMCE.activeEditor.getContent(),this.model.save({params:e},{silent:!0})}})}(),function(){"use strict";window.InlineShortcodeView_vc_pie=window.InlineShortcodeView.extend({render:function(){return _.bindAll(this,"parentChanged"),window.InlineShortcodeView_vc_pie.__super__.render.call(this),this.unbindResize(),vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_pieChart()})),this},unbindResize:function(){vc.frame_window.jQuery(vc.frame_window).unbind("resize.vcPieChartEditable")},parentChanged:function(){this.$el.find(".vc_pie_chart").removeClass("vc_ready"),vc.frame_window.vc_pieChart()},rowsColumnsConverted:function(){window.setTimeout(this.parentChanged,200),this.parentChanged()}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_round_chart=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_round_chart.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_round_charts(e)})),this},parentChanged:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_round_chart.__super__.parentChanged.call(this),_.defer((function(){vc.frame_window.vc_round_charts(e)})),this},remove:function(){var e=this.$el.find(".vc_round-chart").data("vcChartId");window.InlineShortcodeView_vc_round_chart.__super__.remove.call(this),e&&void 0!==vc.frame_window.Chart.instances[e]&&delete vc.frame_window.Chart.instances[e]}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_line_chart=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_line_chart.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_line_charts(e)})),this},parentChanged:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_line_chart.__super__.parentChanged.call(this),_.defer((function(){vc.frame_window.vc_line_charts(e)})),this},remove:function(){var e=this.$el.find(".vc_line-chart").data("vcChartId");window.InlineShortcodeView_vc_line_chart.__super__.remove.call(this),e&&void 0!==vc.frame_window.Chart.instances[e]&&delete vc.frame_window.Chart.instances[e]}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_single_image=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_single_image.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){void 0!==this.vc_image_zoom&&this.vc_image_zoom(e)})),this},parentChanged:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_single_image.__super__.parentChanged.call(this),void 0!==vc.frame_window.vc_image_zoom&&_.defer((function(){vc.frame_window.vc_image_zoom(e)})),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_images_carousel=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_images_carousel.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_imageCarousel(e)})),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_gallery=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_gallery.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_gallery(e)})),this},parentChanged:function(){window.InlineShortcodeView_vc_gallery.__super__.parentChanged.call(this),vc.frame_window.vc_iframe.vc_gallery(this.model.get("id"))}})}(),function(){"use strict";window.InlineShortcodeView_vc_posts_slider=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_posts_slider.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_postsSlider(e)})),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_toggle=window.InlineShortcodeView.extend({render:function(){var e=this.model.get("id");return window.InlineShortcodeView_vc_toggle.__super__.render.call(this),vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_toggle(e)})),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_flickr=window.InlineShortcodeView.extend({render:function(){window.InlineShortcodeView_vc_flickr.__super__.render.call(this);var e=this.$el.find(".vc_flickr-inline-placeholder");return vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.vc_Flickr(e)})),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_raw_js=window.InlineShortcodeView.extend({render:function(){window.InlineShortcodeView_vc_raw_js.__super__.render.call(this);var e=this.$el.find(".vc_js_inline_holder").val();return this.$el.find(".wpb_wrapper").html(e),this}})}(),function(){"use strict";window.InlineShortcodeView_vc_basic_grid=vc.shortcode_view.extend({render:function(e){return window.InlineShortcodeView_vc_basic_grid.__super__.render.call(this,e),this.initGridJs(!0),this},parentChanged:function(){window.InlineShortcodeView_vc_basic_grid.__super__.parentChanged.call(this),this.initGridJs()},initGridJs:function(e){var t=this.model;if(!0===t.get("grid_activity"))return!1;t.set("grid_activity",!0),!0===e?vc.frame_window.vc_iframe.addActivity((function(){this.vc_iframe.gridInit(t.get("id")),t.set("grid_activity",!1)})):(vc.frame_window.vc_iframe.gridInit(t.get("id")),t.set("grid_activity",!1))}})}(),function(){"use strict";window.InlineShortcodeView_vc_masonry_grid=window.InlineShortcodeView_vc_basic_grid.extend()}(),function(){"use strict";window.InlineShortcodeView_vc_media_grid=window.InlineShortcodeView_vc_basic_grid.extend()}(),function(){"use strict";window.InlineShortcodeView_vc_masonry_media_grid=window.InlineShortcodeView_vc_basic_grid.extend()}(),function($){"use strict"
;window.InlineShortcodeView_vc_tta_accordion=window.InlineShortcodeViewContainer.extend({events:{},childTag:"vc_tta_section",activeClass:"vc_active",defaultSectionTitle:window.i18nLocale.section,initialize:function(){_.bindAll(this,"buildSortable","updateSorting"),window.InlineShortcodeView_vc_tta_accordion.__super__.initialize.call(this)},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),this.content(),this.buildPagination(),this},addControls:function(){return this.$controls=$('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),this.addSection("parent.prepend"===$(e.currentTarget).data("vcControl"))},appendElement:function(e){return this.addElement(e)},prependElement:function(e){return this.addElement(e)},addSection:function(e){var t,i;for(t={shortcode:this.childTag,parent_id:this.model.get("id"),isActiveSection:!0,params:{title:this.defaultSectionTitle}},e&&(vc.activity="prepend",t.order=this.getSiblingsFirstPositionIndex()),vc.builder.create(t),i=vc.builder.models.length-1;0<=i;i--)vc.builder.models[i].get("shortcode");vc.builder.render()},getSiblingsFirstPositionIndex:function(){var e,t;return e=0,(t=vc.shortcodes.sort().findWhere({parent_id:this.model.get("id")}))&&(e=t.get("order")-1),e},changed:function(){vc.frame_window.vc_iframe.buildTTA(),window.InlineShortcodeView_vc_tta_accordion.__super__.changed.call(this),_.defer(this.buildSortable),this.buildPagination()},updated:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.updated.call(this),_.defer(this.buildSortable),this.buildPagination()},buildSortable:function(){vc_user_access().shortcodeEdit(this.model.get("shortcode"))&&this.$el&&this.$el.find(".vc_tta-panels").sortable({forcePlaceholderSize:!0,placeholder:"vc_placeholder-row",start:this.startSorting,over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},items:"> .vc_element",handle:".vc_tta-panel-heading, .vc_child-element-move",update:this.updateSorting})},startSorting:function(e,t){t.placeholder.width(t.item.width())},updateSorting:function(e,t){var i=this;this.getPanelsList().find("> .vc_element").each((function(){var e,t;e=(t=$(this)).data("modelId"),vc.shortcodes.get(e).save({order:i.getIndex(t)},{silent:!0})})),this.buildPagination()},getIndex:function(e){return e.index()},getPanelsList:function(){return this.$el.find(".vc_tta-panels")},parentChanged:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.parentChanged.call(this),void 0!==vc.frame_window.vc_round_charts&&vc.frame_window.vc_round_charts(this.model.get("id")),void 0!==vc.frame_window.vc_line_charts&&vc.frame_window.vc_line_charts(this.model.get("id"))},buildPagination:function(){},removePagination:function(){this.$el.find(".vc_tta-panels-container").find(" > .vc_pagination").remove()},getPaginationList:function(){var e,t,i,n,a,o;return o=this.model.get("params"),!_.isUndefined(o.pagination_style)&&o.pagination_style.length?(e=this.$el.find("[data-vc-accordion]"),(t=[]).push("vc_general"),t.push("vc_pagination"),i=o.pagination_style.split("-"),t.push("vc_pagination-style-"+i[0]),t.push("vc_pagination-shape-"+i[1]),!_.isUndefined(o.pagination_color)&&o.pagination_color.length&&t.push("vc_pagination-color-"+o.pagination_color),(a=[]).push('<ul class="'+t.join(" ")+'">'),n=this,e.each((function(){var e,t,i,o;e=["vc_pagination-item"],(t=$(this)).closest(".vc_tta-panel").hasClass(n.activeClass)&&e.push(n.activeClass),0!==(i=t.attr("href")).indexOf("#")&&(i=""),t.attr("data-vc-target")&&(i=t.attr("data-vc-target")),o='<a href="javascript:;" data-vc-target="'+i+'" class="vc_pagination-trigger" data-vc-tabs data-vc-container=".vc_tta"></a>',a.push('<li class="'+e.join(" ")+'" data-vc-tab>'+o+"</li>")})),a.push("</ul>"),$(a.join(""))):null}})}(window.jQuery),function($){"use strict";window.InlineShortcodeView_vc_tta_tabs=window.InlineShortcodeView_vc_tta_accordion.extend({render:function(){return window.InlineShortcodeView_vc_tta_tabs.__super__.render.call(this),_.bindAll(this,"buildSortableNavigation","updateSortingNavigation"),this.createTabs(),_.defer(this.buildSortableNavigation),this},createTabs:function(){var e=_.sortBy(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return e.get("order")}));_.each(e,(function(e){this.sectionUpdated(e,!0)}),this)},defaultSectionTitle:window.i18nLocale.tab,addIcon:function(e,t){var i,n;return"true"===e.getParam("add_icon")&&(i=e.getParam("i_icon_"+e.getParam("i_type")),_.isUndefined(i)||(n='<i class="vc_tta-icon '+i+'"></i>'),"right"===e.getParam("i_position")?t+=n:t=n+t),t},sectionUpdated:function(e,t){var i,n,a,o,s,c,r,l;r=!1,a=e.get("id"),i=(n=this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list")).find('[data-vc-target="[data-model-id='+a+']"]'),s=e.getParam("title"),i.length?(o='<span class="vc_tta-title-text">'+s+"</span>",o=this.addIcon(e,o),i.html(o)):(o='<span class="vc_tta-title-text">'+s+"</span>",o=this.addIcon(e,o),l=$('<li class="vc_tta-tab" data-vc-target-model-id="'+a+'" data-vc-tab><a href="javascript:;" data-vc-use-cache="false" data-vc-tabs data-vc-target="[data-model-id='+a+']" data-vc-container=".vc_tta">'+o+"</a></li>"),!0!==t&&-1<(c=_.pluck(_.sortBy(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return e.get("order")})),"id").indexOf(e.get("id"))-1)&&n.find("[data-vc-tab]:eq("+c+")").length&&(l.insertAfter(n.find("[data-vc-tab]:eq("+c+")")),r=!0),r||l.appendTo(n),e.get("isActiveSection")&&l.addClass(this.activeClass)),this.buildPagination()},getNextTab:function(e){var t,i,n;return t=(n=this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list").children()).length-1,(i=e.index())!==t?n.eq(i+1):n.eq(i-1)},removeSection:function(e){var t,i;(t=this.$el.find('.vc_tta-tabs-container .vc_tta-tabs-list [data-vc-target="[data-model-id='+e+']"]').parent()).hasClass(this.activeClass)&&(i=this.getNextTab(t),vc.frame_window.jQuery(i).find("[data-vc-target]").trigger("click")),t.remove(),this.buildPagination()},buildSortableNavigation:function(){vc_user_access().shortcodeEdit(this.model.get("shortcode"))&&this.$el.find(".vc_tta-tabs-container .vc_tta-tabs-list").sortable({items:".vc_tta-tab",forcePlaceholderSize:!0,placeholder:"vc_tta-tab vc_placeholder-tta-tab",helper:this.renderSortingHelper,start:function(e,t){t.placeholder.width(t.item.width())},over:function(e,t){t.placeholder.css({maxWidth:t.placeholder.parent().width()}),t.placeholder.removeClass("vc_hidden-placeholder")},update:this.updateSortingNavigation})},updateSorting:function(e,t){window.InlineShortcodeView_vc_tta_tabs.__super__.updateSorting.call(this,e,t),this.updateTabsPositions(this.getPanelsList())},updateSortingNavigation:function(){var e,t;(e=(t=this).$el.find(".vc_tta-tabs-list")).find("> .vc_tta-tab").each((function(){var e,i;e=(i=$(this).removeAttr("style")).data("vcTargetModelId"),vc.shortcodes.get(e).save({order:t.getIndex(i)},{silent:!0})})),this.updatePanelsPositions(e)},updateTabsPositions:function(e){var t,i,n;(t=this.$el.find(".vc_tta-tabs-list")).length&&(i=[],n=e.sortable("toArray",{attribute:"data-model-id"}),_.each(n,(function(e){i.push(t.find('[data-vc-target-model-id="'+e+'"]'))}),this),t.prepend(i)),this.buildPagination()},updatePanelsPositions:function(e){var t,i,n;n=this.getPanelsList(),t=[],i=e.sortable("toArray",{attribute:"data-vc-target-model-id"}),_.each(i,(function(e){t.push(n.find('[data-model-id="'+e+'"]'))}),this),n.prepend(t),this.buildPagination()},renderSortingHelper:function(e,t){var i,n,a;return n=(i=t).width()+1,a=t.height(),i.width(n),i.height(a),i},buildPagination:function(){var e;this.removePagination(),e=this.model.get("params"),!_.isUndefined(e.pagination_style)&&e.pagination_style.length&&("top"===e.tab_position?this.$el.find(".vc_tta-panels-container").append(this.getPaginationList()):this.getPaginationList().insertBefore(this.$el.find(".vc_tta-container .vc_tta-panels")))}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_tta_tour=window.InlineShortcodeView_vc_tta_tabs.extend({defaultSectionTitle:window.i18nLocale.section,buildPagination:function(){this.removePagination();var e=this.model.get("params");!_.isUndefined(e.pagination_style)&&e.pagination_style.length&&this.$el.find(".vc_tta-panels-container").append(this.getPaginationList())}})}(),function(){"use strict";window.InlineShortcodeView_vc_tta_pageable=window.InlineShortcodeView_vc_tta_tour.extend({})}(),function($){"use strict";window.vc.ttaSectionActivateOnClone=!1,window.InlineShortcodeView_vc_tta_section=window.InlineShortcodeViewContainerWithParent.extend({events:{'click > .vc_controls [data-vc-control="destroy"]':"destroy",'click > .vc_controls [data-vc-control="edit"]':"edit",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="prepend"]':"prependElement",'click > .vc_controls [data-vc-control="append"]':"appendElement",'click > .vc_controls [data-vc-control="parent.destroy"]':"destroyParent",'click > .vc_controls [data-vc-control="parent.edit"]':"editParent",'click > .vc_controls [data-vc-control="parent.clone"]':"cloneParent",'click > .vc_controls [data-vc-control="parent.append"]':"addSibling","click .vc_tta-panel-body > [data-js-panel-body].vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},controls_selector:"#vc_controls-template-vc_tta_section",previousClasses:!1,activeClass:"vc_active",render:function(){var e=this.model;return window.InlineShortcodeView_vc_tta_section.__super__.render.call(this),_.bindAll(this,"bindAccordionEvents"),this.refreshContent(),this.moveClasses(),_.defer(this.bindAccordionEvents),this.isAsActiveSection()&&window.vc.frame_window.vc_iframe.addActivity((function(){window.vc.frame_window.jQuery('[data-vc-accordion][data-vc-target="[data-model-id='+e.get("id")+']"]').trigger("click")})),this},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_tta_section")},clone:function(e){vc.ttaSectionActivateOnClone=!0,window.InlineShortcodeView_vc_tta_section.__super__.clone.call(this,e)},addSibling:function(e){window.InlineShortcodeView_vc_tta_section.__super__.addSibling.call(this,e)},parentChanged:function(){return window.InlineShortcodeView_vc_tta_section.__super__.parentChanged.call(this),this.refreshContent(!0),this},changed:function(){this.allowAddControlOnEmpty()&&0===this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body]").addClass("vc_empty-element"):this.$el.removeClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body].vc_empty-element").removeClass("vc_empty-element")},moveClasses:function(){var e;this.previousClasses&&(this.$el.get(0).className=this.$el.get(0).className.replace(this.previousClasses,"")),e=this.$el.find(".vc_tta-panel").get(0).className,this.$el.attr("data-vc-content",this.$el.find(".vc_tta-panel").data("vcContent")),this.previousClasses=e,this.$el.find(".vc_tta-panel").get(0).className="",this.$el.get(0).className=this.$el.get(0).className+" "+this.previousClasses,this.$el.find(".vc_tta-panel-title [data-vc-target]").attr("data-vc-target","[data-model-id="+this.model.get("id")+"]")},refreshContent:function(e){var t,i,n,a,o;n=vc.shortcodes.get(this.model.get("parent_id")),_.isObject(n)&&(o=vc.getDefaultsAndDependencyMap(n.get("shortcode")),a=_.extend({},o.defaults,n.get("params")),t=this.$el.find(".vc_tta-controls-icon"),a&&!_.isUndefined(a.c_icon)&&0<a.c_icon.length?(t.length?t.attr("data-vc-tta-controls-icon",a.c_icon):this.$el.find("[data-vc-tta-controls-icon-wrapper]").append($('<i class="vc_tta-controls-icon" data-vc-tta-controls-icon="'+a.c_icon+'"></i>')),!_.isUndefined(a.c_position)&&0<a.c_position.length&&(i=this.$el.find("[data-vc-tta-controls-icon-position]")).length&&i.attr("data-vc-tta-controls-icon-position",a.c_position)):(t.remove(),this.$el.find("[data-vc-tta-controls-icon-position]").attr("data-vc-tta-controls-icon-position","")),!0!==e&&n.view&&n.view.sectionUpdated&&n.view.sectionUpdated(this.model))},setAsActiveSection:function(e){this.model.set("isActiveSection",!!e)},isAsActiveSection:function(){return!!this.model.get("isActiveSection")},bindAccordionEvents:function(){var e=this;window.vc.frame_window.jQuery('[data-vc-target="[data-model-id='+this.model.get("id")+']"]').on("show.vc.accordion hide.vc.accordion",(function(t){e.setAsActiveSection("show"===t.type)}))},destroy:function(e){var t,i;i=this.model.get("parent_id"),window.InlineShortcodeView_vc_tta_section.__super__.destroy.call(this,e),t=vc.shortcodes.get(i),vc.shortcodes.where({parent_id:i}).length?t.view&&t.view.removeSection&&t.view.removeSection(this.model.get("id")):t.destroy()}})}(window.jQuery),function(){"use strict";function e(e){window.vc.events.on("shortcodes:vc_tta_section:add:parent:"+e.get("id"),(function(e){var t,i;return i=window.vc.shortcodes.get(e.get("parent_id")),void 0===(t=parseInt(i.getParam("active_section"),10))&&(t=1),_.pluck(_.sortBy(window.vc.shortcodes.where({parent_id:i.get("id")}),(function(e){return e.get("order")})),"id").indexOf(e.get("id"))===t-1&&e.set("isActiveSection",!0),e})),window.vc.events.on("shortcodes:vc_tta_section:clone:parent:"+e.get("id"),(function(e){window.vc.ttaSectionActivateOnClone&&e.set("isActiveSection",!0),window.vc.ttaSectionActivateOnClone=!1}))}window.vc.events.on("shortcodes:vc_tta_accordion:add",e),window.vc.events.on("shortcodes:vc_tta_tabs:add",e),window.vc.events.on("shortcodes:vc_tta_tour:add",e),window.vc.events.on("shortcodes:vc_tta_pageable:add",e)}(),function(){"use strict";window.InlineShortcodeView_vc_carousel=window.InlineShortcodeView_vc_images_carousel.extend({})}(),function($){"use strict";window.vc.cloneMethod_vc_tab=function(e,t){return e.params=_.extend({},e.params),e.params.tab_id=vc_guid()+"-cl",_.isUndefined(t.get("active_before_cloned"))||(e.active_before_cloned=t.get("active_before_cloned")),e},window.InlineShortcodeView_vc_tabs=window.InlineShortcodeView_vc_row.extend({events:{"click > :first > .vc_empty-element":"addElement","click > :first > .wpb_wrapper > .ui-tabs-nav > li":"setActiveTab"},already_build:!1,active_model_id:!1,$tabsNav:!1,active:0,render:function(){return _.bindAll(this,"stopSorting"),this.$tabs=this.$el.find("> .wpb_tabs"),window.InlineShortcodeView_vc_tabs.__super__.render.call(this),this.buildNav(),this},buildNav:function(){var e=this.tabsControls();this.$tabs.find('> .wpb_wrapper > .vc_element[data-tag="vc_tab"]').each((function(t){$("li:eq("+t+")",e).attr("data-m-id",$(this).data("model-id"))}))},changed:function(){this.allowAddControlOnEmpty()&&0===this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find("> :first > div").addClass("vc_empty-element"):this.$el.removeClass("vc_empty").find("> :first > div").removeClass("vc_empty-element"),this.setSorting()},setActiveTab:function(e){var t=$(e.currentTarget);this.active_model_id=t.data("m-id")},tabsControls:function(){return this.$tabsNav?this.$tabsNav:this.$tabsNav=this.$el.find(".wpb_tabs_nav")},buildTabs:function(e){if(e&&(this.active_model_id=e.get("id"),this.active=this.tabsControls().find("[data-m-id="+this.active_model_id+"]").index()),!1===this.active_model_id){var t=this.tabsControls().find("li:first");this.active=t.index(),this.active_model_id=t.data("m-id")}this.checkCount()||window.vc.frame_window.vc_iframe.buildTabs(this.$tabs,this.active)},checkCount:function(){return this.$tabs.find('> .wpb_wrapper > .vc_element[data-tag="vc_tab"]').length!=this.$tabs.find("> .wpb_wrapper > .vc_element.vc_vc_tab").length},beforeUpdate:function(){this.$tabs.find(".wpb_tabs_heading").remove(),window.vc.frame_window.vc_iframe.destroyTabs(this.$tabs)},updated:function(){window.InlineShortcodeView_vc_tabs.__super__.updated.call(this),this.$tabs.find(".wpb_tabs_nav:first").remove(),this.buildNav(),window.vc.frame_window.vc_iframe.buildTabs(this.$tabs),this.setSorting()},rowsColumnsConverted:function(){_.each(window.vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}))},addTab:function(e){if(this.updateIfExistTab(e))return!1;var t=this.buildControlHtml(e);return e.get("cloned")&&this.tabsControls().find("[data-m-id="+e.get("cloned_from").id+"]").length?e.get("cloned_appended")||(t.appendTo(this.tabsControls()),e.set("cloned_appended",!0)):t.appendTo(this.tabsControls()),this.changed(),!0},cloneTabAfter:function(e){this.$tabs.find("> .wpb_wrapper > .wpb_tabs_nav > div").remove(),this.buildTabs(e)},updateIfExistTab:function(e){var t=this.tabsControls().find("[data-m-id="+e.get("id")+"]");return!!t.length&&(t.attr("aria-controls","tab-"+e.getParam("tab_id")).find("a").attr("href","#tab-"+e.getParam("tab_id")).text(e.getParam("title")),!0)},buildControlHtml:function(e){e.get("params");var t=$('<li data-m-id="'+e.get("id")+'"><a href="#tab-'+e.getParam("tab_id")+'"></a></li>');return t.data("model",e),t.find("> a").text(e.getParam("title")),t},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),(new window.vc.ShortcodesBuilder).create({shortcode:"vc_tab",params:{tab_id:vc_guid()+"-"+this.tabsControls().find("li").length,title:this.getDefaultTabTitle()},parent_id:this.model.get("id")}).render()},getDefaultTabTitle:function(){return window.i18nLocale.tab},setSorting:function(){this.hasUserAccess()&&window.vc.frame_window.vc_iframe.setTabsSorting(this)},stopSorting:function(e,t){this.tabsControls().find("> li").each((function(e,t){$(this).data("model").save({order:e},{silent:!0})}))},placeElement:function(e,t){var i=window.vc.shortcodes.get(e.data("modelId"));i&&i.get("place_after_id")?(e.insertAfter(window.vc.$page.find("[data-model-id="+i.get("place_after_id")+"]")),i.unset("place_after_id")):e.insertAfter(this.tabsControls()),this.changed()},removeTab:function(e){if(1===window.vc.shortcodes.where({parent_id:this.model.get("id")}).length)return this.model.destroy();var t=this.tabsControls().find("[data-m-id="+e.get("id")+"]"),i=t.index();this.tabsControls().find("[data-m-id]:eq("+(i+1)+")").length?window.vc.frame_window.vc_iframe.setActiveTab(this.$tabs,i+1):this.tabsControls().find("[data-m-id]:eq("+(i-1)+")").length?window.vc.frame_window.vc_iframe.setActiveTab(this.$tabs,i-1):window.vc.frame_window.vc_iframe.setActiveTab(this.$tabs,0),t.remove()},clone:function(e){_.each(window.vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.set("active_before_cloned",this.active_model_id===e.get("id"))}),this),window.InlineShortcodeView_vc_tabs.__super__.clone.call(this,e)}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_tour=window.InlineShortcodeView_vc_tabs.extend({render:function(){return _.bindAll(this,"stopSorting"),this.$tabs=this.$el.find("> .wpb_tour"),window.InlineShortcodeView_vc_tabs.__super__.render.call(this),this.buildNav(),this},beforeUpdate:function(){this.$tabs.find(".wpb_tour_heading,.wpb_tour_next_prev_nav").remove(),vc.frame_window.vc_iframe.destroyTabs(this.$tabs)},updated:function(){this.$tabs.find(".wpb_tour_next_prev_nav").appendTo(this.$tabs),window.InlineShortcodeView_vc_tour.__super__.updated.call(this)}})}(),function(){"use strict";window.InlineShortcodeView_vc_tab=window.InlineShortcodeViewContainerWithParent.extend({controls_selector:"#vc_controls-template-vc_tab",render:function(){var e,t,i;return i=this.model.get("params"),window.InlineShortcodeView_vc_tab.__super__.render.call(this),this.$tab=this.$el.find("> :first"),_.isEmpty(i.tab_id)?(i.tab_id=vc_guid()+"-"+Math.floor(11*Math.random()),this.model.save("params",i),e="tab-"+i.tab_id,this.$tab.attr("id",e)):e=this.$tab.attr("id"),this.$el.attr("id",e),this.$tab.attr("id",e+"-real"),this.$tab.find(".vc_element[data-tag]").length||this.$tab.empty(),this.$el.addClass("ui-tabs-panel wpb_ui-tabs-hide"),this.$tab.removeClass("ui-tabs-panel wpb_ui-tabs-hide"),this.parent_view&&this.parent_view.addTab&&(this.parent_view.addTab(this.model)||this.$el.removeClass("wpb_ui-tabs-hide")),t=this.doSetAsActive(),this.parent_view.buildTabs(t),this},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_tab")},doSetAsActive:function(){var e=this.model.get("active_before_cloned");return(!this.model.get("from_content")&&!this.model.get("default_content")&&_.isUndefined(e)||!_.isUndefined(e)&&(this.model.unset("active_before_cloned"),!0===e))&&this.model},removeView:function(e){window.InlineShortcodeView_vc_tab.__super__.removeView.call(this,e),this.parent_view&&this.parent_view.removeTab&&this.parent_view.removeTab(e)},clone:function(e){var t;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),vc.clone_index/=10,this.model.clone().get("params"),t=new vc.ShortcodesBuilder;var i=vc.CloneModel(t,this.model,this.model.get("parent_id")),n=(this.parent_view.active_model_id,this);t.render((function(){n.parent_view.cloneTabAfter&&n.parent_view.cloneTabAfter(i)}))},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}))}})}(),function($){"use strict";window.InlineShortcodeView_vc_accordion=window.InlineShortcodeView_vc_row.extend({events:{"click > .wpb_accordion > .vc_empty-element":"addElement"},render:function(){return _.bindAll(this,"stopSorting"),this.$accordion=this.$el.find("> .wpb_accordion"),window.InlineShortcodeView_vc_accordion.__super__.render.call(this),this},changed:function(){this.allowAddControlOnEmpty()&&0===this.$el.find(".vc_element[data-tag]").length?this.$el.addClass("vc_empty").find("> :first").addClass("vc_empty-element"):(this.allowAddControlOnEmpty()&&this.$el.removeClass("vc_empty").find("> .vc_empty-element").removeClass("vc_empty-element"),this.setSorting())},buildAccordion:function(e){var t=!1;e&&(t=this.$accordion.find("[data-model-id="+e.get("id")+"]").index()),vc.frame_window.vc_iframe.buildAccordion(this.$accordion,t)},setSorting:function(){vc.frame_window.vc_iframe.setAccordionSorting(this)},beforeUpdate:function(){this.$el.find(".wpb_accordion_heading").remove(),window.InlineShortcodeView_vc_accordion.__super__.beforeUpdate.call(this)},stopSorting:function(){this.$accordion.find("> .wpb_accordion_wrapper > .vc_element[data-tag]").each((function(){vc.shortcodes.get($(this).data("modelId")).save({order:$(this).index()},{silent:!0})}))},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),(new vc.ShortcodesBuilder).create({shortcode:"vc_accordion_tab",params:{title:window.i18nLocale.section},parent_id:this.model.get("id")}).render()},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}))}})}(window.jQuery),function(){"use strict";window.InlineShortcodeView_vc_accordion_tab=window.InlineShortcodeView_vc_tab.extend({events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_controls .vc_parent .vc_control-btn-delete":"destroyParent","click > .vc_controls .vc_parent .vc_control-btn-edit":"editParent","click > .vc_controls .vc_parent .vc_control-btn-clone":"cloneParent","click > .vc_controls .vc_parent .vc_control-btn-prepend":"addSibling","click > .wpb_accordion_section > .vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},changed:function(){this.allowAddControlOnEmpty()&&0===this.$el.find(".vc_element[data-tag]").length?(this.$el.addClass("vc_empty"),this.content().addClass("vc_empty-element")):(this.$el.removeClass("vc_empty"),this.content().removeClass("vc_empty-element"))},render:function(){return window.InlineShortcodeView_vc_tab.__super__.render.call(this),this.content().find(".vc_element[data-tag]").length||this.content().empty(),this.parent_view.buildAccordion(!this.model.get("from_content")&&!this.model.get("default_content")&&this.model),this},rowsColumnsConverted:function(){_.each(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}))},destroy:function(e){var t=this.model.get("parent_id");window.InlineShortcodeView_vc_accordion_tab.__super__.destroy.call(this,e),vc.shortcodes.where({parent_id:t}).length||vc.shortcodes.get(t).destroy()},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_accordion_tab")}})}(),_.isUndefined(vc)&&(window.vc={}),function($){"use strict";vc.createPreLoader=function(){vc.$preloader=$("#vc_preloader").show()},vc.removePreLoader=function(){vc.$preloader&&vc.$preloader.hide()},vc.createOverlaySpinner=function(){vc.$overlaySpinner=$("#vc_overlay_spinner").show()},vc.removeOverlaySpinner=function(){vc.$overlaySpinner&&vc.$overlaySpinner.hide()},vc.createPreLoader(),vc.$frame_wrapper=$("#vc_inline-frame-wrapper"),vc.$frame=$('<iframe src="'+window.vc_iframe_src+'" scrolling="auto" style="width: 100%;" id="vc_inline-frame"></iframe>'),vc.$frame.appendTo(vc.$frame_wrapper),vc.build=function(){if(!vc.loaded){vc.loaded=!0,vc.map=window.vc_mapper,$("#wpadminbar").remove(),$("#screen-meta-links, #screen-meta").hide();var e=$("body");e.attr("data-vc",!0),vc.is_mobile=0<$("body.mobile").length,vc.title=$("#vc_title-saved").val(),vc.add_element_block_view=new vc.AddElementUIPanelFrontendEditor({el:"#vc_ui-panel-add-element"}),vc.edit_element_block_view=new vc.EditElementUIPanel({el:"#vc_ui-panel-edit-element"}),vc.post_settings_view=new vc.PostSettingsUIPanelFrontendEditor({el:"#vc_ui-panel-post-settings"}),vc.templates_editor_view=new vc.TemplatesEditorPanelView({el:"#vc_templates-editor"}),vc.templates_panel_view=new vc.TemplateWindowUIPanelFrontendEditor({el:"#vc_ui-panel-templates"}),vc.pages_templates_panel_view=new vc.PagesTemplateWindowUIPanelFrontendEditor({el:"#vc_ui-panel-pages-templates"}),vc.preset_panel_view=new vc.PresetSettingsUIPanelFrontendEditor({el:"#vc_ui-panel-preset",frontEnd:!0}),vc.app=new vc.View,vc.buildRelevance(),e.hasClass("vc_responsive_disabled")&&(vc.responsive_disabled=!0),vc.setFrameSize("100%"),vc.frame=new vc.FrameView({el:$(vc.$frame.get(0).contentWindow.document).find("body").get(0)}),vc.app.render(),vc.post_shortcodes=vc.frame_window.vc_post_shortcodes,vc.builder.buildFromContent(),void 0!==window.vc.undoRedoApi&&_.defer((function(){vc.undoRedoApi.setZeroState(vc.builder.getContent())})),vc.removePreLoader(),vc.$frame.get(0).contentWindow.vc_js&&vc.$frame.get(0).contentWindow.vc_js(),$(window).trigger("vc_build")}},vc.$frame.on("load",(function(){vc.loaded||window.setTimeout((function(){vc.build()}),50)}))}(window.jQuery),function($){"use strict";var e;(e=function(e,t,i){this.target=e,this.$pointer=null,this.texts=i,this.pointerOptions=t,this.init()}).prototype={init:function(){_.bindAll(this,"openedEvent","reposition")},show:function(){this.$pointer=$(this.target),this.$pointer.data("vcPointerMessage",this),this.pointerOptions.opened=this.openedEvent,this.$pointer.addClass("vc-with-vc-pointer").pointer(this.pointerOptions).pointer("open"),$(window).on("resize.vcPointer",this.reposition)},domButtonsWrapper:function(){return $('<div class="vc_wp-pointer-controls" />')},domCloseBtn:function(){return $('<a class="vc_pointer-close close">'+this.texts.finish+"</a>")},domNextBtn:function(){return $('<button class="button button-primary button-large vc_wp-pointers-next">'+this.texts.next+'<i class="vc_pointer-icon"></i></button>')},domPrevBtn:function(){return $('<button class="button button-primary button-large vc_wp-pointers-prev"><i class="vc_pointer-icon"></i>'+this.texts.prev+"</button> ")},openedEvent:function(e,t){var i=t.pointer.offset();t.pointer.css("z-index",1e5),i&&i.top&&$("body").scrollTop(80<i.top?i.top-80:0)},reposition:function(){this.$pointer.pointer("reposition")},close:function(){this.$pointer&&this.$pointer.removeClass("vc-with-vc-pointer").pointer("close"),$(window).off("resize.vcPointer")}},window.vcPointerMessage=e}(window.jQuery),function($){"use strict";var e;(e=function(e,t){this.pointers=e&&e.messages||[],this._texts=t,this.pointerId=e&&e.pointer_id?e.pointer_id:"",this.pointerData={},this._index=0,this.messagesDismissed=!1,this.init()}).prototype={init:function(){_.bindAll(this,"show","clickEventClose","clickEventNext","clickEventPrev","buttonsEvent"),this.build()},getPointer:function(e){return this.pointerData=this.pointers[e]&&this.pointers[e].target?this.pointers[e]:null,this.pointerData&&this.pointerData.options?new vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts):null},buildOptions:function(e){return e.buttonsEvent&&_.isFunction(window[e.buttonsEvent])?e.buttons=_.bind(window[e.buttonsEvent],this):e.buttons=this.buttonsEvent,e.vcPointerController=this,e},build:function(){if(this.pointer=this.getPointer(this._index),vc.events.once("backendEditor.close",this.close,this),!this.pointer)return!1;this.setShowEventHandler()},show:function(){this.pointer.show(),this.setCloseEventHandler(),vc.events.trigger("vcPointer:show")},setShowEventHandler:function(){var e;this.pointerData.showCallback&&window[this.pointerData.showCallback]?window[this.pointerData.showCallback].call(this):this.pointerData.showEvent?this.pointerData.showEvent.match(/\s/)?1<(e=this.pointerData.closeEvent.split(/\s+(.+)?/)).length&&$(e[1]).one(e[0],this.show):vc.events.once(this.pointerData.showEvent,this.show):this.show()},setCloseEventHandler:function(){var e;this.pointerData.closeCallback&&window[this.pointerData.closeCallback]?window[this.pointerData.closeCallback].call(this):this.pointerData.closeEvent?this.pointerData.closeEvent.match(/\s/)?(e=this.pointerData.closeEvent.split(/\s+(.+)?/),$(e[1]||this.$pointer).one(e[1]&&e[0]?e[0]:"click",this.clickEventNext)):vc.events.once(this.pointerData.closeEvent,this.nextOnEvent,this):this.pointer.$pointer&&0<this.pointer.$pointer.length&&$(this.pointer.$pointer).one("click",this.clickEventNext)},nextOnEvent:function(){this.close(),this.next()},next:function(){this._index++,this.build()},prev:function(){this._index--,this.build()},close:function(){this.pointer&&(this.pointer.close(),this.pointerData=null,this.pointer=null,vc.events.trigger("vcPointer:close",this))},buttonsEvent:function(){var e,t,i,n;return e=this.pointer.domCloseBtn(),t=this.pointer.domNextBtn(),i=this.pointer.domPrevBtn(),e.bind("click.vcPointer",this.clickEventClose),n=this.pointer.domButtonsWrapper().append(e),0<this._index&&(i.bind("click.vcPointer",this.clickEventPrev),n.addClass("vc_wp-pointer-controls-prev").append(i)),this._index+1<this.pointers.length&&(t.bind("click.vcPointer",this.clickEventNext),n.addClass("vc_wp-pointer-controls-next").append(t)),n},clickEventClose:function(){this.close(),this.dismissMessages()},clickEventNext:function(){this.close(),this.next()},clickEventPrev:function(){this.close(),this.prev()},dismissMessages:function(){if(this.messagesDismissed)return!1;$.post(window.ajaxurl,{pointer:this.pointerId,action:"dismiss-wp-pointer"}),this.messagesDismissed=!0}},window.vcPointersController=e}(window.jQuery),function($){"use strict";vc.events.on("app.render",(function(){window.vcPointer&&window.vcPointer.pointers&&window.vcPointer.pointers.length&&_.each(vcPointer.pointers,(function(e){new vcPointersController(e,vcPointer.texts)}),this)})),vc.events.on("vcPointer:show",(function(){vc.app.disableFixedNav=!0})),vc.events.on("vcPointer:close",(function(){vc.app.disableFixedNav=!1})),window.vcPointersEditorsTourEvents=function(){var e
;return(e=this.pointer.domCloseBtn()).bind("click.vcPointer",this.clickEventClose),e},window.vcPointersShowOnContentElementControls=function(){this.pointer&&$(this.pointer.target).length?($(this.pointer.target).parent().addClass("vc-with-vc-pointer-controls"),this.show(),$("#wpb_visual_composer").one("click",(function(){$(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls")}))):vc.events.once("shortcodes:add",vcPointersShowOnContentElementControls,this)},window.vcPointersSetInIFrame=function(){this.pointerData&&vc.frame_window.jQuery(this.pointerData.target).length?(this.pointer=new vc.frame_window.vcPointerMessage(this.pointerData.target,this.buildOptions(this.pointerData.options),this._texts),this.show(),this.pointer.$pointer.closest(".vc_controls").addClass("vc-with-vc-pointer-controls")):vc.events.once("shortcodeView:ready",vcPointersSetInIFrame,this)},window.vcPointersCloseInIFrame=function(){var e,t;e=this,(t=vc.frame_window.jQuery)("body").one("click",(function(){t(".vc-with-vc-pointer-controls").removeClass("vc-with-vc-pointer-controls"),e.nextOnEvent()}))}}(window.jQuery),function(){"use strict";var e,t;e={stack:[],stackPosition:0,stackHash:JSON.stringify(""),zeroState:null,locked:!1,add:function(e){null===this.zeroState&&this.setZeroState(e),this.stackHash!==JSON.stringify(e)&&(this.can("redo")&&(this.stack=this.stack.slice(0,this.stackPosition)),this.stack.push(e),this.stackPosition=this.stack.length,this.stackHash=JSON.stringify(this.get()))},can:function(e){var t=!1;return"undo"===e?t=0<this.stack.length&&0<this.stackPosition:"redo"===e&&(t=0<this.stack.length&&this.stackPosition<this.stack.length),t},undo:function(){this.can("undo")&&(--this.stackPosition,this.stackHash=JSON.stringify(this.get()))},redo:function(){this.can("redo")&&(this.stackPosition+=1,this.stackHash=JSON.stringify(this.get()))},set:function(e){return this.stackPosition<e&&(this.stack=this.stack.slice(e-this.stackPosition),this.stackHash=JSON.stringify(this.get()),!0)},get:function(){return this.stackPosition<1?this.zeroState:this.stack[this.stackPosition-1]},setZeroState:function(e){this.zeroState=e,this.stackHash=JSON.stringify(this.get())}},t={add:function(t){!0!==e.locked&&(e.add(t),window.vc.events.trigger("undoredo:add",t))},getCurrentPosition:function(){return e.stackPosition},undo:function(){return e.undo(),window.vc.events.trigger("undoredo:undo"),t.get()},redo:function(){return e.redo(),window.vc.events.trigger("undoredo:redo"),t.get()},get:function(){return e.get()},canUndo:function(){return!this.isLocked()&&e.can("undo")},canRedo:function(){return!this.isLocked()&&e.can("redo")},setZeroState:function(t){null===e.zeroState?this.add(t):e.setZeroState(t)},lock:function(){e.locked=!0,window.vc.events.trigger("undoredo:lock")},unlock:function(){e.locked=!1,window.vc.events.trigger("undoredo:unlock")},isLocked:function(){return!0===e.locked}},void 0===window.vc&&(window.vc={}),window.vc.undoRedoApi=t}(),function($){"use strict";$((function(){var e,t,i,n;window.vc&&window.vc.events&&(e=$("#vc_navbar-undo"),t=$("#vc_navbar-redo"),n=function(){e.attr("disabled",!window.vc.undoRedoApi.canUndo()),t.attr("disabled",!window.vc.undoRedoApi.canRedo())},i=function(e){for(vc.createOverlaySpinner();vc.shortcodes.models.length;)vc.shortcodes.models[0].destroy();vc.shortcodes.reset([],{silent:!0}),_.delay((function(){var t;(t=e.length?vc.builder.parse([],e):[]).length&&_.each(t,(function(e){vc.builder.create(e)})),vc.builder.render((function(){_.delay((function(){window.vc.undoRedoApi.unlock(),vc.removeOverlaySpinner()}),100)}))}),50)},window.vc.events.on("undoredo:add undoredo:undo undoredo:redo undoredo:lock undoredo:unlock",n),e.on("click.vc-undo",(function(e){if($(this).is("[disabled]")||window.vc.undoRedoApi.isLocked())e&&e.preventDefault&&e.preventDefault();else{window.vc.undoRedoApi.lock();var t=window.vc.undoRedoApi.undo();i(t)}})),t.on("click.vc-redo",(function(e){if($(this).is("[disabled]")||window.vc.undoRedoApi.isLocked())e&&e.preventDefault&&e.preventDefault();else{window.vc.undoRedoApi.lock();var t=window.vc.undoRedoApi.redo();i(t)}})))}))}(window.jQuery);