/*!
 * WPBakery Page Builder v6.0.0 (https://wpbakery.com)
 * Copyright 2011-2020 Michael M, WPBakery
 * License: Commercial. More details: http://go.wpbakery.com/licensing
 */
window.vc||(window.vc={}),function(){"use strict";function e(e){return"\\"+a[e]}vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var t=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},i=/\\|'|\r|\n|\u2028|\u2029/g;vc.template=function(a,n){n=_.defaults({},n,vc.templateOptions.default);var r,s=RegExp([(n.escape||t).source,(n.interpolate||t).source,(n.evaluate||t).source].join("|")+"|$","g"),o=0,c="__p+='";a.replace(s,(function(t,n,r,s,d){return c+=a.slice(o,d).replace(i,e),o=d+t.length,n?c+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?c+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(c+="';\n"+s+"\n__p+='"),t})),c+="';\n",n.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{r=new Function(n.variable||"obj","_",c)}catch(e){throw e.source=c,e}function d(e){return r.call(this,e,_)}var l=n.variable||"obj";return d.source="function("+l+"){\n"+c+"}",d}}(),function(e){"use strict";_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},focus:function(){if(this.aceEnabled()){this.$editor.focus();var e=this.$editor.session.getLength();this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)}else this.$editor.focus()},setEditorAce:function(e){this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.$editor.focus();var t=this.$editor.getSession().getLength();return this.$editor.gotoLine(t,this.$editor.getSession().getLine(t-1).length),this.$editor},setEditorTextarea:function(t){return this.$editor||(this.$editor=e("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),e("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(t),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var t=e(window).height()-380;this.aceEnabled()?e("#"+this.sel).css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var t,a,i=e("#"+this.sel);a=i.offset().top,t=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top-a-70,this.aceEnabled()?i.css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(e){"use strict";e((function(){var t=e('[data-vc-roles="form"]');e('[data-vc-roles="part-state"]').on("click",(function(){var t=e(this);t.data("vcCustomSelector",t.find(":selected").data("vcCustomSelector")||"")})).on("change",(function(){var t,a,i,n,r;if(a=(n=e(this)).data("vcRolePart"),"*"===(i=e('[data-vc-role-related-part="'+a+'"]')).data("vcRolePartState"))return!1;t=n.val(),r=n.data("vcCustomSelector")||"",i.data("vcRolePartState").toString()===t?(i.addClass("vc_visible"),r.length&&i.find(n.data("vcCustomSelector")).prop("checked",!0)):i.removeClass("vc_visible")})),t.on("submit",(function(a){var i,n;n={},a&&a.preventDefault&&a.preventDefault(),(i=e("#submit_btn")).attr("disabled",!0),e("#vc_wp-spinner").show(),n.action=e("#vc_settings-roles-action").val(),n.vc_nonce_field=e("#vc_nonce_field").val(),n.vc_roles={},e("[data-vc-role]").each((function(){var t=e(this),a=t.data("vcRole"),i={};t.find("select").each((function(){var t=e(this),a=t.data("vcPart");void 0===i[a]&&(i[a]={}),i[a][t.data("vcName")]=t.val()})),t.find('[data-vc-role-related-part].vc_visible [data-vc-name][type="checkbox"]').each((function(){var t=e(this),a=t.data("vcPart");void 0===i[a]&&(i[a]={}),i[a][t.data("vcName")]=t.is(":checked")?t.val():"0"})),n.vc_roles[a]=JSON.stringify(i)})),e.ajax({url:t.attr("action"),type:"POST",dataType:"json",data:n,context:this}).done((function(t){var a;e("#vc_wp-spinner").hide(),t.message&&((a=e('<div id="vc_roles-message" class="updated vc_updater-result-message hidden"><p><strong></strong></p></div>')).find("strong").text(t.message),a.insertBefore(i).fadeIn(100),window.setTimeout((function(){a.slideUp(100,(function(){e(this).remove(),i.attr("disabled",!1)}))}),2e3))}))}))})),e("[data-vc-accordion]").on("show.vc.accordion",(function(){e(this).addClass("vc_opened")})).on("hide.vc.accordion",(function(){e(this).removeClass("vc_opened")})),e('[data-vc-ui-element="panel-tab-control"]').on("click",(function(t){var a,i=e(this),n=i.parents("fieldset").first(),r=".vc_wp-form-table";t.preventDefault(),e('[data-vc-ui-element="panel-tabs-controls"] .vc_active',n).removeClass("vc_active"),i.parent().addClass("vc_active"),a=i.data("filter"),n.attr("data-vc-roles-filter-value",a),r+=" "+a,e(".vc_wp-form-table [data-vc-capability]",n).addClass("vc_hidden"),e(r,n).removeClass("vc_hidden")})),e('[data-vc-roles="table-checkbox"]').on("change",(function(){var t=e(this);t.is(":checked")?t.parents("tr:first").find('[data-vc-name!="'+t.attr("data-vc-name")+'"]:checked').prop("checked",!1):t.parents('[data-vc-roles="table"]').first().find('[data-vc-roles-select-all-checkbox="'+t.data("vcCap")+'"]').prop("checked",!1)})),e("[data-vc-roles-select-all-checkbox]").on("change",(function(){var t,a,i,n,r;a=(t=e(this)).is(":checked"),n=(i=t.parents('[data-vc-roles="table"]').first()).find(t.data("vcRelatedControls")),r=t.data("vcRolesSelectAllCheckbox"),i.find('[data-vc-cap="'+r+'"]:visible').prop("checked",a),n.prop("checked",a),a&&_.defer((function(){i.find("[data-vc-roles-select-all-checkbox!="+r+"]:not([data-vc-cap])").prop("checked",!1),i.find('[data-vc-cap!="'+r+'"]:not([data-vc-roles-select-all-checkbox]):visible').prop("checked",!1)}))})),e('[data-vc-role-related-part].vc_visible [data-vc-roles="table"]').each((function(){var t=e(this);t.find("thead [data-vc-roles-select-all-checkbox]").each((function(){var a=e(this),i=a.data("vcRolesSelectAllCheckbox");t.find('[data-vc-cap="'+i+'"]:not(:checked)').length||(a.prop("checked",!0),t.find('tfoot [data-vc-roles-select-all-checkbox="'+i+'"]').prop("checked",!0))}))}))}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),jQuery(document).ready((function(e){"use strict";_.isUndefined(window.less)||(window.vc.less={},window.vc.less.options={relativeUrls:!1,rootpath:!1},window.less.options.env=vcData.debug?"development":"production",window.less.options.logLevel=vcData.debug?4:0,window.vc.less.generateLessFormData=function(e,t){var a={};return _.isEmpty(t)||_.each(t,(function(t,i){var n,r;_.isString(t)?(n=_.first(_.where(e,{name:t})),_.isObject(n)&&0<(r=n.value).length&&(a[i]=r)):_.isObject(t)&&!_.isUndefined(t.key)&&(n=_.first(_.where(e,{name:t.key})),_.isObject(n)||_.isUndefined(t.default_key)?_.isObject(n)||_.isUndefined(t.default)||(n={value:t.default}):n=_.isUndefined(a[t.default_key])?_.first(_.where(e,{name:t.default_key})):{value:a[t.default_key]},_.isObject(n)&&(r=n.value,_.isUndefined(t.modify_output)||!_.isObject(t.modify_output)||_.isEmpty(t.modify_output)||_.each(t.modify_output,(function(e){_.isUndefined(e.plain)||!_.isObject(e.plain)||_.isEmpty(e.plain)||_.each(e.plain,(function(e){var t;t=e.replace("{{ value }}",r),r=t}))})),r&&0<r.length&&(a[i]=r)))})),a},window.vc.less.fileManager=less.FileManager.prototype.extractUrlParts,window.less.FileManager.prototype.extractUrlParts=function(e,t){return e+="?v="+(window.vcData&&window.vcData.version?window.vcData.version:"4.5"),vc.less.fileManager(e,t)},window.vc.less.build=function(e,t){var a;this.options=_.extend({},{modifyVars:{},variablesDataLinker:{},lessPath:""},this.options,e),this.options.modifyVars=this.generateLessFormData(this.options.modifyVars,this.options.variablesDataLinker),a=this,_.defer((function(){less.render('@import "'+a.options.lessPath+'";',a.options).then((function(e){t&&t.call(a,e)}),(function(e){t&&t.call(a,void 0,e)}))}))})}));var vc_am={current_form:!1};window.i18nLocaleVcAutomapper=window.i18nLocaleSettings,function(e){"use strict";function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var a,i,n;vc_am.vcGuid=function(){return t()+t()+"-"+t()},_.extend(wp.shortcode.prototype,{taggedString:function(){var e='[<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>";return _.each(this.attrs.numeric,(function(t){/\s/.test(t)?e+=' <span class="vc_preview-param">"'+_.escape(t)+'"</span>':e+=' <span class="vc_preview-param">'+_.escape(t)+"</span>"})),_.each(this.attrs.named,(function(t,a){e+=' <span class="vc_preview-param">'+_.escape(a)+'="'+_.escape(t)+'"</span>'})),"single"===this.type?e+"]":"self-closing"===this.type?e+" /]":(e+="]",this.content&&(e+='<span class="vc_preview-content">'+_.escape(this.content)+"</span>"),e+'[/<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>]")}}),wp.shortcode.atmPreview=function(e){return new wp.shortcode(e).taggedString()};var r,s,o=e("#vc_settings-automapper");function c(t,a){r&&(window.clearTimeout(r),e(".vc_settings-automapper").remove(),r=!1);var i=e('<div class="vc_atm-message updated'+(a?" vc_message-"+a:"")+'" style="display: none;"></div>');i.text(t),i.prependTo(o).fadeIn(500,(function(){var t=e(this);window.setTimeout((function(){t.remove()}),2e3)}))}function d(t,a){!_.isUndefined(a)&&a.length||(a=e(".tab_intro")),function(t,a,i,n){e(".vc_atm-message").remove();var r=e('<div class="vc_atm-message error" style="display: none;"></div>');return r.text(t),_.isUndefined(void 0)||window.setTimeout((function(){r.remove()}),void 0),r}(t).insertBefore(a).fadeIn(500)}s=function(e){return(e=e.replace(/_|-/," ")).charAt(0).toUpperCase()+e.slice(1)};var l="?";-1<window.ajaxurl.indexOf("?")&&(l="&"),i=window.ajaxurl+l+"vc_action=automapper",n=function(t,a,n){var r;r="create"===t?(a.set("id",vc_am.vcGuid()),{vc_action:"create",action:"vc_automapper_create",data:a.toJSON()}):"update"===t?{vc_action:"update",action:"vc_automapper_update",id:a.get("id"),data:a.toJSON()}:"delete"===t?{vc_action:"delete",action:"vc_automapper_delete",id:a.get("id")}:{vc_action:"read",action:"vc_automapper_read"},e.ajax({method:"POST",url:i,dataType:"json",data:_.extend(r,{_vcnonce:window.vcAdminNonce}),context:this}).done((function(e){if(e.success){var i=e.data,r=a;i&&"read"===t&&(r=i),r?"read"===t&&n.success(r):n.error("Not found")}})).error((function(e){}))};var v=Backbone.Model.extend({defaults:function(){return{tag:"",name:"",category:"",description:"",params:[]}},sync:n}),m=Backbone.Collection.extend({model:v,sync:n});vc_am.shortcodes=new m,Backbone.View.extend({tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, widget-action":"edit","click .vc_automapper-delete-btn":"clear"},template_html:e("#vc_automapper-item-tpl").html()||"<span>{{ tag }}</span>",initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.removeView)},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},edit:function(e){e&&e.preventDefault&&e.preventDefault(),new a({model:this.model}).render()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&this.model.destroy()},removeView:function(){this.$el.remove()}});var p=Backbone.View.extend({render:function(){return vc_am.current_form&&vc_am.current_form.close(),vc_am.current_form=this},getType:function(){return"form"},validate:function(e){var t=!1;if(!e.name)return window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!e.tag||!e.tag.match(/^\S+$/))return window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var a=["param_name","heading","type"];return _.each(e.params,(function(e){_.each(a,(function(a){""!==e[a]&&("param_name"!==a||e[a].match(/^[a-z0-9_]+$/g))||(t=window.i18nLocaleVcAutomapper.error_enter_required_fields)}),this)}),this),t||null},isValid:function(e){return this.validationError=this.validate(e),!this.validationError},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.remove()}}),u=Backbone.View.extend({_$widget_title:!1,_$form_view:!1,edit_view:!1,tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, .widget-action":"edit"},template_html:e("#vc_automapper-item-complex-tpl").html()||"<span>{{ tag }}</span>",header_template_html:'<h4>{{ name }}<span class="in-widget-title"></span></h4>',initialize:function(){_.bindAll(this,"removeEditForm"),this.listenTo(this.model,"destroy",this.removeView),this.model.view=this},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},renderTitle:function(){var e=vc.template(this.header_template_html,vc.templateOptions.custom);this.$widgetTitle().html(e(this.model.toJSON()))},edit:function(e){if(e&&e.preventDefault&&e.preventDefault(),this.$editForm().is(":animated"))return!1;this.$el.addClass("vc_opened"),this.edit_view?this.close():this.edit_view=new f({model:this.model}).render()},$widgetTitle:function(){return this._$widget_title||(this._$widget_title=this.$el.find(".widget-title")),this._$widget_title},$editForm:function(){return this._$edit_form||(this._$edit_form=this.$el.find(".widget-inside")),this._$edit_form},removeEditForm:function(){this.edit_view&&this.edit_view.remove(),this.edit_view=!1},beforeSave:function(){this.$el.find("#vc_atm-name").val(e("#vc_atm-header-name").val())},close:function(){vc_am.current_form=!1,this.$el.removeClass("vc_opened"),this.renderTitle(),this.$editForm().slideUp(200),this.removeEditForm()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.destroy()},removeView:function(){this.remove()}}),h=p.extend({className:"vc_add-form-atm",template_html:e("#vc_automapper-add-form-tpl").html(),events:{"click #vc_atm-parse-string":"parseShortcode","click .vc_atm-cancel":"close"},getType:function(){return"create"},render:function(){h.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e()),this.$el.insertAfter(".vc_automapper-toolbar"),this},shortcodesRegexp:_.memoize((function(){return new RegExp("\\[(\\[?)([\\w|-]+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")})),parseShortcode:function(t){t&&t.preventDefault&&t.preventDefault();var a,i,n,r,o=[];return a=e("#vc_atm-shortcode-string").val(),!_.isEmpty(a)&&(i=a.match(this.shortcodesRegexp()))?(r=wp.shortcode.attrs(i[3]),_.each(r.named,(function(e,t){o.push({param_name:t,type:"textfield",heading:s(t),description:"Example: "+e,value:e})}),this),i[5]&&o.push({param_name:"content",type:"textarea",heading:"Content",description:"",value:i[5]}),n={tag:i[2],name:s(i[2]),category:window.i18nLocaleVcAutomapper.my_shortcodes_category,params:o},void(this.isValid(n)?(vc_am.shortcodes.create(n),c(window.i18nLocaleVcAutomapper.new_shortcode_mapped,"success"),e(".vc_atm-message").remove(),vc_am.shortcodes.last().view.edit()):(this.$el.addClass("form-invalid"),d(this.validationError)))):(this.$el.addClass("form-invalid"),d(window.i18nLocaleVcAutomapper.error_enter_valid_shortcode,this.$el),!1)}}),f=(a=p.extend({className:"vc_edit-form",active_preview:!1,events:{"click #vc_atm-save":"save","click .vc_atm-cancel":"close","click .vc_atm-delete":"clear","click #vc_atm-add-param":"addParam","click .vc_delete-param":"deleteParam","change #vc_atm-is-container":"setContentParam","keyup .vc_param-name, .vc_param-value, #vc_atm-tag":"setPreview","focus #vc_atm-tag":"setTagFieldActive","focus .vc_params input, .vc_params textarea":"setParamFieldActive","focus .vc_param.vc_content input, .vc_param.vc_content textarea":"setContentParamFieldActive","blur #vc_atm-tag, vc_param input":"unsetFieldActive",'change .vc_param-field [name="type"]':"changeParamType"},new:!1,template_html:e("#vc_automapper-form-tpl").html(),param_template_html:e("#vc_atm-form-param-tpl").html(),getType:function(){return"edit"},render:function(){a.__super__.render.call(this);var t=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(t(this.model.toJSON())),this.$el.insertAfter(e("[data-item-id="+this.model.id+"]").hide()),this.addAllParams(),this},changeParamType:function(t){var a,i;i=(a=e(t.currentTarget)).parents(".vc_fields"),"hidden"===a.val()?(i.find('[name="heading"]').attr("disabled",!0),i.find('[name="description"]').attr("disabled",!0)):(i.find('[name="heading"]').attr("disabled",!1),i.find('[name="description"]').attr("disabled",!1))},setTagFieldActive:function(t){this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-tag",e(this.active_preview).addClass("vc_active")},setParamFieldActive:function(t){var a;a=e(t.currentTarget).parents(".vc_param:first").index(),this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-param:eq("+a+")",e(this.active_preview).addClass("vc_active")},setContentParamFieldActive:function(t){this.active_preview&&e(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-content",e(this.active_preview).addClass("vc_active")},unsetFieldActive:function(t){e(this.active_preview).removeClass("vc_active"),this.active_preview=!1},escapeParam:function(e){return e&&e.replace(/"/g,"``")},getPreview:function(e){var t=e.params,a=!1,i={};return _.each(t,(function(e,t){"content"!==e.param_name?i[e.param_name]=this.escapeParam(e.value):a=e.value}),this),wp.shortcode.atmPreview({tag:e.tag,attrs:i,content:a,type:!1===a?"single":""})},setPreview:function(){var t={params:this.getParams(),tag:e("#vc_atm-tag").val()};e("#vc_shortcode-preview").html(this.getPreview(t)),this.active_preview&&e(this.active_preview).addClass("vc_active")},save:function(t){t&&t.preventDefault&&t.preventDefault(),this.$el.find(".vc_error").removeClass("vc_error");var a={tag:e("#vc_atm-tag").val(),name:e("#vc_atm-name").val(),category:e("#vc_atm-category").val(),description:e("#vc_atm-description").val(),params:this.getParams()};this.isValid(a)?(this.model.save(a),c(window.i18nLocaleVcAutomapper.shortcode_updated,"success"),this.close()):d(this.validationError,this.$el.find("#vc_atm-save"))},validate:function(t){var a,i;if(e(".vc_error,.form-invalid").removeClass("vc_error form-invalid"),a=!1,i={},!t.name)return e("#vc_atm-name").addClass("vc_error"),e("#vc_atm-header-name").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!t.tag||!t.tag.match(/^\S+$/))return e("#vc_atm-tag").addClass("vc_error").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var n=["param_name","heading","type"];return _.each(t.params,(function(t,r){var s=e("#vc_atm-params-list [name=param_name]:eq("+r+")");if("content"===t.param_name&&!s.data("system"))return a=window.i18nLocaleVcAutomapper.error_content_param_not_manually,s.addClass("vc_error"),void s.closest(".vc_param-field").addClass("form-invalid");_.isBoolean(i[t.param_name])&&1==i[t.param_name]&&(s.addClass("vc_error"),s.closest(".vc_param-field").addClass("form-invalid"),a=a||window.i18nLocaleVcAutomapper.error_param_already_exists.replace(/\%s/,t.param_name)),i[t.param_name]=!0,_.each(n,(function(i){"hidden"!==t.type&&""===t[i]||"hidden"===t.type&&"heading"!==i&&""===t[i]?(e("#vc_atm-params-list [name="+i+"]:eq("+r+")").addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),a=a||window.i18nLocaleVcAutomapper.error_enter_required_fields):"param_name"!==i||t[i].match(/^[a-z0-9_]+$/g)||(s.addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),a=a||window.i18nLocaleVcAutomapper.error_wrong_param_name)}),this)}),this),a||null},setContentParam:function(t){e(t.currentTarget)[0].checked?(this.addParamField({type:"textarea",heading:"Content",description:"",param_name:"content",value:""}),this.setParamSorting()):this.removeParamField("content"),this.setPreview()},addAllParams:function(){e("#vc_atm-params-list").empty(),_.each(this.model.get("params"),(function(t){this.addParamField(t),"content"===t.param_name&&e("#vc_atm-is-container").prop("checked",!0)}),this),this.setParamSorting()},getParams:function(){var t=[];return _.each(e(".vc_param"),(function(a){var i=e(a);t.push({param_name:i.find("[name=param_name]").val(),type:i.find("[name=type]").val(),description:i.find("[name=description]").val(),heading:i.find("[name=heading]").val(),value:i.find("[name=value]").val()})}),this),t},addParam:function(e){e&&e.preventDefault&&e.preventDefault(),this.addParamField({type:"",heading:"",description:"",param_name:"",value:""}),this.setPreview()},removeParamField:function(t){e('.vc_param-name[value="'+t+'"]').parents(".vc_param").remove()},addParamField:function(t){var a=e('<div class="vc_param wpb_vc_row'+("content"===t.param_name?" vc_content":"")+'"/>').appendTo("#vc_atm-params-list"),i=vc.template(this.param_template_html,vc.templateOptions.custom);a.html(i(t))},setParamSorting:function(){e("#vc_atm-params-list").sortable({items:"> .vc_param",tolerance:"pointer",handle:".vc_move-param",update:this.setPreview,placeholder:"vc_sortable-placeholder"})},deleteParam:function(t){t&&t.preventDefault&&t.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete_param)&&(e(t.currentTarget).parents(".vc_param").remove(),this.setPreview())},close:function(t){t&&t.preventDefault&&t.preventDefault(),this.model&&e("[data-item-id="+this.model.get("id")+"]").show(),vc_am.current_form=!1,e(".vc_atm-message").remove(),this.remove()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.destroy(),this.close())}})).extend({template_html:e("#vc_automapper-form-tpl").html(),getType:function(){return"edit"},initialize:function(){_.bindAll(this,"setPreview")},render:function(){var t=this.model.view;this.model.get("params"),a.__super__.render.call(this);var i=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(i(_.extend({shortcode_preview:this.getPreview(this.model.toJSON())},this.model.toJSON()))),this.$el.appendTo(t.$editForm()),t.$widgetTitle().html('<span class="vc_atm-header"><input type="text" name="name" value="" id="vc_atm-header-name" class="vc_header-name"></span><span class="in-widget-title"></span>'),e("#vc_atm-header-name").val(this.model.get("name")),this.addAllParams(),t.$editForm().slideDown(),this},save:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.view.beforeSave(),f.__super__.save.call(this)},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.model.view.close()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.view.clear(),this.remove())}}),w=Backbone.View.extend({events:{"click #vc_automapper-add-btn":"create",submit:"formSubmit"},className:"vc_atm-form",addFormView:!1,initialize:function(){this.listenTo(vc_am.shortcodes,"add",this.addOne),this.listenTo(vc_am.shortcodes,"reset",this.addAll),this.listenTo(vc_am.shortcodes,"all",this.render),this.$list=e(".vc_automapper-list"),vc_am.shortcodes.fetch()},formSubmit:function(t){var a;t&&t.preventDefault&&t.preventDefault(),_.isObject(t)&&this.addFormView&&!_.isEmpty(t.currentTarget)&&!_.isEmpty(t.currentTarget[0])&&(a=t.currentTarget[0],e(a).is("#vc_atm-shortcode-string")&&this.addFormView.parseShortcode())},addAll:function(e){e.each((function(e){this.addOne(e)}),this)},addOne:function(e){var t=new u({model:e});this.$list.append(t.render().el)},create:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form&&"create"===vc_am.current_form.getType()||(this.addFormView=(new h).render())},render:function(){}});o.length&&new w({el:o})}(window.jQuery),jQuery(document).ready((function(e){"use strict";function t(e,t,a){var i=new Date;i.setDate(i.getDate()+a);var n=encodeURIComponent(t)+(null===a?"":"; expires="+i.toUTCString());document.cookie=e+"="+n}function a(e){var t,a,i,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(a=n[t].substr(0,n[t].indexOf("=")),i=n[t].substr(n[t].indexOf("=")+1),(a=a.replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(i)}e(".wpb_settings_accordion").accordion({active:!!a("wpb_js_composer_settings_group_tab")&&a("wpb_js_composer_settings_group_tab"),collapsible:!0,change:function(e,a){void 0!==a.newHeader.attr("id")?t("wpb_js_composer_settings_group_tab","#"+a.newHeader.attr("id"),31536e3):t("wpb_js_composer_settings_group_tab","",31536e3)},heightStyle:"content"}),e(".wpb-settings-select-all-shortcodes").on("click",(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").attr("checked",!0)})),e(".wpb-settings-select-none-shortcodes").on("click",(function(t){t.preventDefault(),e(this).parent().parent().find("[type=checkbox]").removeAttr("checked")})),e(".vc_settings-tab-control").on("click",(function(t){if(t.preventDefault(),e(this).hasClass("nav-tab-active"))return!1;e(this).attr("href"),e(".vc_settings-tabs > .nav-tab-active").removeClass("nav-tab-active"),e(this).addClass("nav-tab-active")})),e(".vc_settings-tab-content").on("submit",(function(){return!0})),e(".vc_show_example").on("click",(function(t){t.preventDefault();var a=e(".vc_helper");if(a.is(":animated"))return!1;a.toggle(100)})),e(".color-control").wpColorPicker(),e("#vc_settings-color-restore-default").on("click",(function(t){t.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(e("#vc_settings-color-action").val("restore_color"),e("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())})),e("#wpb_js_use_custom").on("change",(function(){this.checked?e("#vc_settings-color").addClass("color_enabled"):e("#vc_settings-color").removeClass("color_enabled")})),e("#vc_settings-updater-button").on("click",(function(t){var a=e(this),i=a.data("vcAction"),n=a.parent();return n.addClass("loading"),a.attr("disabled",!0),e.getJSON(window.ajaxurl,{action:"vc_get_"+i+"_url",_vcnonce:window.vcAdminNonce},(function(e){e&&e.status?window.location=e.url:(alert("Failed to get response from server. Please try again"),n.removeClass("loading"),a.removeAttr("disabled"))})).error((function(){alert("Failed to get response from server. Please refresh page and try again"),n.removeClass("loading"),a.removeAttr("disabled")})),t.preventDefault(),!1}));var i=e("#wpb_csseditor"),n=e("textarea.custom_css.wpb_csseditor");function r(t,a,i,n){n&&e(".vc_atm-message").remove();var r=e('<div class="vc_atm-message '+(a||"")+'" style="display: none;"><p></p></div>');return r.find("p").text(t),_.isUndefined(i)||window.setTimeout((function(){r.fadeOut(500,(function(){e(this).remove()}))}),i),r}i.length&&(window.css_editor=new Vc_postSettingsEditor,window.css_editor.setEditor(n.val()),window.css_editor.getEditor().on("change",(function(){n.val(window.css_editor.getValue())}))),e("#vc_settings-vc-pointers-reset").on("click",(function(t){t.preventDefault(),e.post(window.ajaxurl,{action:"vc_pointer_reset",_vcnonce:window.vcAdminNonce}),e(this).text(e(this).data("vcDoneTxt"))}));var s=!1;e("#vc_settings-color").on("submit",(function(t){var a,i,n,o;t.preventDefault(),s||(a=e("#submit_btn"),e("#wpb_js_use_custom").prop("checked")&&"restore_color"!==e("#vc_settings-color-action").val()?(s=!0,i=e(this).serializeArray(),n=a.data("vc-less-variables"),o=e('<span class="vc_settings-spinner vc_ui-wp-spinner"></span>'),a.val(window.i18nLocaleSettings.saving),o.insertBefore(a).show(),_.delay((function(){vc.less.build({modifyVars:i,variablesDataLinker:n,lessPath:a.data("vc-less-path"),rootpath:a.data("vc-less-root")},(function(t,i){if(_.isUndefined(t)||_.isUndefined(t.css))_.isUndefined(i)||(window.console&&window.console.warn&&window.console.warn("build error",i),r(window.i18nLocaleSettings.save_error+". "+i,"error",void 0,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),s=!1,o.remove());else{e('[name="wpb_js_compiled_js_composer_less"]').val(t.css);var n=e("#vc_settings-color");e.ajax({type:"POST",url:n.attr("action"),data:n.eq(0).serializeArray(),success:function(){r(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),s=!1,o.remove()},error:function(){r(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(a.parent()).fadeIn(500),a.val(window.i18nLocaleSettings.save),s=!1,o.remove()}})}}))}),100)):this.submit())}))}));