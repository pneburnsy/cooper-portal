!function(e){"use strict";window.InlineShortcodeView_vc_row=window.InlineShortcodeView.extend({column_tag:"vc_column",events:{mouseenter:"removeHoldActive"},layout:1,addControls:function(){return this.$controls=e('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},render:function(){var e=this.content();return e&&e.hasClass("vc_row-has-fill")&&(e.removeClass("vc_row-has-fill"),this.$el.addClass("vc_row-has-fill")),window.InlineShortcodeView_vc_row.__super__.render.call(this),vc.frame_window.jQuery("body").hasClass("pp-enabled")&&this.reInitLiquidStack(),this},removeHoldActive:function(){vc.unsetHoldActive()},addColumn:function(){vc.builder.create({shortcode:this.column_tag,parent_id:this.model.get("id")}).render()},addElement:function(e){e&&e.preventDefault&&e.preventDefault(),this.addColumn()},changeLayout:function(e){e&&e.preventDefault&&e.preventDefault(),this.layoutEditor().render(this.model).show()},layoutEditor:function(){return _.isUndefined(vc.row_layout_editor)&&(vc.row_layout_editor=new vc.RowLayoutUIPanelFrontendEditor({el:e("#vc_ui-panel-row-layout")})),vc.row_layout_editor},convertToWidthsArray:function(e){return _.map(e.split(/_/),(function(e){var t=e.split("");return t.splice(Math.floor(e.length/2),0,"/"),t.join("")}))},updated:function(){if(window.InlineShortcodeView_vc_row.__super__.updated.call(this),vc.frame_window.jQuery("body").hasClass("pp-enabled")){vc.frame_window.jQuery("#lqd-site-content").data("plugin_liquidStack")&&this.$el.addClass("pp-section pp-table")}},changed:function(){window.InlineShortcodeView_vc_row.__super__.changed.call(this),vc.frame_window.jQuery("body").hasClass("pp-enabled")&&this.reInitLiquidStack(),this.addLayoutClass()},content:function(){return!1===this.$content&&(this.$content=this.$el.find(".vc_container-anchor:first").parent()),this.$el.find(".vc_container-anchor:first").remove(),this.$content},addLayoutClass:function(){this.$el.removeClass("vc_layout_"+this.layout),this.layout=_.reject(vc.shortcodes.where({parent_id:this.model.get("id")}),(function(e){return e.get("deleted")})).length,this.$el.addClass("vc_layout_"+this.layout)},convertRowColumns:function(e,t){return!!e&&(s=[],r=this.convertToWidthsArray(e),vc.layout_change_shortcodes=[],vc.layout_old_columns=vc.shortcodes.where({parent_id:this.model.get("id")}),_.each(vc.layout_old_columns,(function(e){e.set("deleted",!0),s.push({shortcodes:vc.shortcodes.where({parent_id:e.get("id")}),params:e.get("params")})})),_.each(r,(function(e){var r=s.shift();_.isObject(r)?(n=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:_.extend({},r.params,{width:e})}).last(),_.each(r.shortcodes,(function(e){e.save({parent_id:n.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e)}),this)):(o={width:e},n=t.create({shortcode:this.column_tag,parent_id:this.model.get("id"),order:vc.shortcodes.nextOrder(),params:o}).last())}),this),_.each(s,(function(e){_.each(e.shortcodes,(function(e){e.save({parent_id:n.get("id"),order:vc.shortcodes.nextOrder()},{silent:!0}),vc.layout_change_shortcodes.push(e),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()}),this)}),this),t.render((function(){_.each(vc.layout_change_shortcodes,(function(e){e.trigger("change:parent_id"),e.view.rowsColumnsConverted&&e.view.rowsColumnsConverted()})),_.each(vc.layout_old_columns,(function(e){e.destroy()})),vc.layout_old_columns=[],vc.layout_change_shortcodes=[]})),r);var o,n,s,r},allowAddControl:function(){return"edit"!==vc_user_access().getState("shortcodes")},allowAddControlOnEmpty:function(){return"edit"!==vc_user_access().getState("shortcodes")},reInitLiquidStack:function(){const e=vc.frame_window.jQuery("#lqd-site-content").data("plugin_liquidStack");console.log(e),e&&(this.$el.addClass("pp-section pp-table"),this.$el.children(".pp-tableCell").length||this.$el.wrapInner('<div class="pp-tableCell" style="height:100%"><div class="lqd-stack-section-inner"></div></div>'))}})}(window.jQuery);